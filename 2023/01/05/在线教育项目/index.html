<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/yt32.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/yt16.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.7.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="在线教育项目day1业务模块  技术栈  Mybatis-Plus简介官方网站：https:&#x2F;&#x2F;baomidou.com&#x2F; MyBatis-Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。  润物无声     只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑。   效率至上   只需简单配置，即可快速进行">
<meta property="og:type" content="article">
<meta property="og:title" content="在线教育项目">
<meta property="og:url" content="http://yoursite.com/2023/01/05/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/index.html">
<meta property="og:site_name" content="ZWZ的博客嘻嘻">
<meta property="og:description" content="在线教育项目day1业务模块  技术栈  Mybatis-Plus简介官方网站：https:&#x2F;&#x2F;baomidou.com&#x2F; MyBatis-Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。  润物无声     只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑。   效率至上   只需简单配置，即可快速进行">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.helloimg.com/images/2023/01/05/oCyWFQ.png">
<meta property="og:image" content="https://www.helloimg.com/images/2023/01/05/oCywvY.png">
<meta property="og:image" content="https://www.helloimg.com/images/2023/01/05/oCyvtE.png">
<meta property="og:image" content="https://www.helloimg.com/images/2023/01/05/oCyQqX.jpg">
<meta property="og:image" content="https://www.helloimg.com/images/2023/01/05/oGBdV9.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/08/pSZNV8x.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/09/pSZDAmV.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/11/pSnrxXj.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/11/pSn677R.png">
<meta property="og:image" content="c:%5CUsers%5CZWZ%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1673444529590.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSKz8kd.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSKz2cV.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSMSN59.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSMSrDO.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSMCbIe.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSMCzsP.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSMPPIg.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/13/pSMPEzn.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMXzgf.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMjuKU.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMjKrF.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMjdqe.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMjcxf.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMjWqg.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMvtFs.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMxCkj.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMxp7Q.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMxenU.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMxMN9.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/14/pSMx31x.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/17/pS3FV56.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/17/pS3FfsJ.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/17/pS3F5ZR.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/17/pS3AiA1.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/17/pS3ElqJ.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3D481.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3DHbD.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3DLUH.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3DjPA.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3riVg.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3r9r8.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3s7Ae.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3sf6x.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3sgh9.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS36iVO.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS36Kqf.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS36wZT.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3oHqH.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3THpV.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3TzkR.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS37jv8.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3HZKU.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3HHLF.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/18/pS3HqZ4.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/21/pSGgU58.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/21/pSGg25T.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/21/pSGgorR.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/21/pSGfnLd.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/21/pSGfKeA.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/21/pSJSCmn.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/21/pSJSpOs.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSw9N2n.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwPJcn.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwP0NF.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwP44e.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwPo3d.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwPI9H.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwPhND.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwi3VK.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwidKI.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwFCJe.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwF9iD.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwFKJg.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwtoTK.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwN9k8.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwNFpQ.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwNukT.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwdSTx.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwdFpD.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwdJns.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwrYFI.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwrlOe.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwr3eH.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwr8wd.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwrtYt.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/01/30/pSwrGTA.png">
<meta property="og:image" content="c:%5CUsers%5CZWZ%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1675342372473.png">
<meta property="article:published_time" content="2023-01-05T11:53:15.997Z">
<meta property="article:modified_time" content="2023-02-03T07:01:58.360Z">
<meta property="article:author" content="ZWZ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.helloimg.com/images/2023/01/05/oCyWFQ.png">

<link rel="canonical" href="http://yoursite.com/2023/01/05/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>在线教育项目 | ZWZ的博客嘻嘻</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZWZ的博客嘻嘻</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/01/05/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZWZ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZWZ的博客嘻嘻">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          在线教育项目
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-05 19:53:15" itemprop="dateCreated datePublished" datetime="2023-01-05T19:53:15+08:00">2023-01-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-03 15:01:58" itemprop="dateModified" datetime="2023-02-03T15:01:58+08:00">2023-02-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="在线教育项目"><a href="#在线教育项目" class="headerlink" title="在线教育项目"></a>在线教育项目</h1><h2 id="day1"><a href="#day1" class="headerlink" title="day1"></a>day1</h2><p>业务模块</p>
<p><a href="https://www.helloimg.com/image/oCyWFQ" target="_blank" rel="noopener"><img src="https://www.helloimg.com/images/2023/01/05/oCyWFQ.png" alt="oCyWFQ.png"></a></p>
<p>技术栈</p>
<p><a href="https://www.helloimg.com/image/oCywvY" target="_blank" rel="noopener"><img src="https://www.helloimg.com/images/2023/01/05/oCywvY.png" alt="oCywvY.png"></a></p>
<h3 id="Mybatis-Plus"><a href="#Mybatis-Plus" class="headerlink" title="Mybatis-Plus"></a>Mybatis-Plus</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>官方网站：<a href="https://baomidou.com/" target="_blank" rel="noopener">https://baomidou.com/</a></p>
<p><a href="https://github.com/baomidou/mybatis-plus" target="_blank" rel="noopener">MyBatis-Plus</a>（简称 MP）是一个 <a href="http://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener">MyBatis</a> 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>
<ul>
<li><p>润物无声  </p>
</li>
<li><ul>
<li>只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑。</li>
</ul>
</li>
<li><p>效率至上</p>
</li>
<li><ul>
<li>只需简单配置，即可快速进行 CRUD 操作，从而节省大量时间。</li>
</ul>
</li>
<li><p>丰富功能</p>
</li>
<li><ul>
<li>热加载、代码生成、分页、性能分析等功能一应俱全。</li>
</ul>
</li>
</ul>
<h4 id="Mybatis-plus使用入门"><a href="#Mybatis-plus使用入门" class="headerlink" title="Mybatis-plus使用入门"></a>Mybatis-plus使用入门</h4><h5 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h5><p>mybatis_plus</p>
<h5 id="创建User表"><a href="#创建User表" class="headerlink" title="创建User表"></a>创建User表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line">（</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'主键ID'</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line">    age <span class="built_in">INT</span>(<span class="number">11</span>) <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年龄'</span>,</span><br><span class="line">    email <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮箱'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (<span class="keyword">id</span>, <span class="keyword">name</span>, age, email) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">'Jone'</span>, <span class="number">18</span>, <span class="string">'test1@baomidou.com'</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">'Jack'</span>, <span class="number">20</span>, <span class="string">'test2@baomidou.com'</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">'Tom'</span>, <span class="number">28</span>, <span class="string">'test3@baomidou.com'</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">'Sandy'</span>, <span class="number">21</span>, <span class="string">'test4@baomidou.com'</span>)</span><br><span class="line">(<span class="number">5</span>, <span class="string">'Billie'</span>, <span class="number">24</span>, <span class="string">'test5@baomidou.com'</span>);</span><br></pre></td></tr></table></figure>



<h5 id="idea创建SpringBoot项目"><a href="#idea创建SpringBoot项目" class="headerlink" title="idea创建SpringBoot项目"></a>idea创建SpringBoot项目</h5><p>引入pom依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- mysq1运行时依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- lombok用来简化实体类--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="application-properties配置"><a href="#application-properties配置" class="headerlink" title="application.properties配置"></a>application.properties配置</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mysql数据库连接</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>



<h5 id="SpringBoot-启动类"><a href="#SpringBoot-启动类" class="headerlink" title="SpringBoot 启动类"></a>SpringBoot 启动类</h5><blockquote>
<p>加入@MapperScan 注解，进行包扫描处理。 @Mapper(“xxx.xxx.xxx.mapper”)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.zwz.mybatis_plus.mapper"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusApplication</span> </span>&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="创建实体类"><a href="#创建实体类" class="headerlink" title="创建实体类"></a>创建实体类</h5><blockquote>
<p>在com.zwz.mybatis_plus的包下建立一个entity包用于装实体类 User</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="创建mapper"><a href="#创建mapper" class="headerlink" title="创建mapper"></a>创建mapper</h5><blockquote>
<p>创建mapper包 并写一个mapper接口：UserMapper</p>
<p>继承的是baseMapper，是MybatisPlus提供的接口，里面包含了基础的查询方法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="进行测试"><a href="#进行测试" class="headerlink" title="进行测试"></a>进行测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.mybatis_plus;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.mybatis_plus.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.zwz.mybatis_plus.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testSelectList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="查看sql语句"><a href="#查看sql语句" class="headerlink" title="查看sql语句"></a>查看sql语句</h5><blockquote>
<p>为了在控制台可以查看sql语句的情况，需在properties中加入</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mybatis日志</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>

<h4 id="CURD接口-主键策略"><a href="#CURD接口-主键策略" class="headerlink" title="CURD接口-主键策略"></a>CURD接口-主键策略</h4><h5 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CRUDTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProductMapper productMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user =  <span class="keyword">new</span> User();</span><br><span class="line">        user.setName(<span class="string">"zwz"</span>);</span><br><span class="line">        user.setAge(<span class="number">18</span>);</span><br><span class="line">        user.setEmail(<span class="string">"595488485@qq.com"</span>);</span><br><span class="line">        user.setCreateTime(<span class="keyword">new</span> Date());</span><br><span class="line">        user.setUpdateTime(<span class="keyword">new</span> Date());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> result = userMapper.insert(user); <span class="comment">//得到是数据更新的条数</span></span><br><span class="line">        System.out.println(result);</span><br><span class="line">        System.out.println(user.getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://www.helloimg.com/image/oCyvtE" target="_blank" rel="noopener"><img src="https://www.helloimg.com/images/2023/01/05/oCyvtE.png" alt="oCyvtE.png"></a></p>
<blockquote>
<p>生产了全局唯一的ID</p>
</blockquote>
<h5 id="雪花算法：分布式ID生成器"><a href="#雪花算法：分布式ID生成器" class="headerlink" title="雪花算法：分布式ID生成器"></a><strong>雪花算法：分布式ID生成器</strong></h5><ul>
<li><p>雪花算法是由Twitter公布的分布式主键生成算法，它能够保证不同表的主键的不重复性，以及相同表的主键的有序性。</p>
</li>
<li><p>核心思想：</p>
</li>
<li><ul>
<li>长度共64bit（一个long型）。</li>
<li>首先是一个符号位，1bit标识，由于long基本类型在Java中是带符号的，最高位是符号位，正数是0，负数是1，所以id一般是正数，最高位是0。</li>
<li>41bit时间截(毫秒级)，存储的是时间截的差值（当前时间截 - 开始时间截)，结果约等于69.73年。</li>
<li>10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID，可以部署在1024个节点）。</li>
<li>12bit作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID）。</li>
</ul>
</li>
</ul>
<p><a href="https://www.helloimg.com/image/oCyQqX" target="_blank" rel="noopener"><img src="https://www.helloimg.com/images/2023/01/05/oCyQqX.jpg" alt="oCyQqX.jpg"></a></p>
<p><strong>优点：</strong>整体上按照时间自增排序，并且整个分布式系统内不会产生ID碰撞，并且效率较高。</p>
<h5 id="MP的主键策略"><a href="#MP的主键策略" class="headerlink" title="MP的主键策略"></a>MP的主键策略</h5><ol>
<li><p><strong>ASSIGN_ID</strong></p>
<p>MyBatis-Plus默认的主键策略是：ASSIGN_ID （使用了雪花算法）</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableId</span>(type = IdType.ASSIGN_ID)</span><br><span class="line"><span class="keyword">private</span> String id;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Auto 自增策略<ul>
<li>需要在创建数据表的时候设置主键自增</li>
<li>实体字段中配置 @TableId(type = IdType.AUTO)</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableId</span>(type = IdType.AUTO)</span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>要想影响所有实体的配置，可以设置全局主键配置</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#全局设置主键生成策略</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.id-type</span>=<span class="string">auto</span></span><br></pre></td></tr></table></figure>



<h4 id="Update操作"><a href="#Update操作" class="headerlink" title="Update操作"></a>Update操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateById</span><span class="params">()</span></span>&#123; </span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setAge(<span class="number">28</span>);</span><br><span class="line">    <span class="keyword">int</span> result = userMapper.updateById(user); <span class="comment">// 使用的是mp提供的更新方法</span></span><br><span class="line">    System.out.println(<span class="string">"影响的行数："</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="自动填充"><a href="#自动填充" class="headerlink" title="自动填充"></a>自动填充</h5><h6 id="需求描述："><a href="#需求描述：" class="headerlink" title="需求描述："></a>需求描述：</h6><p>项目中经常会遇到一些数据，每次都使用相同的方式填充，例如记录的创建时间，更新时间等。</p>
<p>我们可以使用MyBatis Plus的自动填充功能，完成这些字段的赋值工作</p>
<h6 id="数据库修改"><a href="#数据库修改" class="headerlink" title="数据库修改"></a>数据库修改</h6><p>在User表中添加datetime类型的新的字段 create_time、update_time</p>
<h6 id="实体类修改"><a href="#实体类修改" class="headerlink" title="实体类修改"></a>实体类修改</h6><p>实体上增加字段并添加自动填充注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="meta">@TableField</span>(fill = FieldFill.INSERT)  <span class="comment">//进行插入的时候默认修改下字段的值</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@TableField(fill = FieldFill.UPDATE)	</span></span><br><span class="line">    <span class="meta">@TableField</span>(fill = FieldFill.INSERT_UPDATE) <span class="comment">//进行更新或插入的时候默认修改下字段的值</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="实现元对象处理器接口"><a href="#实现元对象处理器接口" class="headerlink" title="实现元对象处理器接口"></a><strong>实现元对象处理器接口</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.mybatis_plus.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实现元对象处理器接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"when insert fill"</span>);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"createTime"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"updateTime"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"when update fill"</span>);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"updateTime"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现mybatis-plus提供的handler，从而在更新以及插入操作中自动加入createTime和 updateTime字段的值。</p>
</blockquote>
<h5 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h5><h6 id="模拟冲突"><a href="#模拟冲突" class="headerlink" title="模拟冲突"></a>模拟冲突</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> product</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'主键ID'</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品名称'</span>,</span><br><span class="line">    price <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'价格'</span>,</span><br><span class="line">    <span class="keyword">version</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'乐观锁版本号'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>创建数据库中增加商品表</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> product (<span class="keyword">id</span>, <span class="keyword">NAME</span>, price) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">'外星人笔记本'</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>新增数据</p>
</blockquote>
<p><strong>创建实体类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.mybatis_plus.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.Version;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/5 12:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这是用乐观锁控制版本</span></span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>创建mapper</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.mybatis_plus.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.zwz.mybatis_plus.entity.Product;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/5 12:27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Product</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>模拟失败过程</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对product并发的测试</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConcurrentUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1、小李获取数据</span></span><br><span class="line">        Product p1 = productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">        System.out.println(<span class="string">"小李取得的价格："</span>+p1);</span><br><span class="line">        <span class="comment">//2、小王获取数据</span></span><br><span class="line">        Product p2 = productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">        System.out.println(<span class="string">"小王取得的价格："</span>+p2);</span><br><span class="line">        <span class="comment">//3、小李+50元存入数据库</span></span><br><span class="line">        p1.setPrice(p1.getPrice()+<span class="number">50</span>);</span><br><span class="line">        productMapper.updateById(p1);</span><br><span class="line">        <span class="comment">//4、小王-30元存入数据库</span></span><br><span class="line">        p2.setPrice(p2.getPrice()-<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">int</span> result = productMapper.updateById(p2);</span><br><span class="line">        <span class="keyword">if</span> (result == <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"小王更新失败"</span>);</span><br><span class="line">            p2 = productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">            p2.setPrice(p2.getPrice()-<span class="number">30</span>);</span><br><span class="line">            productMapper.updateById(p2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//最后结果</span></span><br><span class="line">        Product product = productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">        System.out.println(<span class="string">"用户所看到的价格"</span> + product.getPrice());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>会导致价格不正确 正确的价格应该是 100+50-30 = 120 但是结果是70元 问题的原因是大家都获取的数据是100 元。小王应该是获取150元的数据但是一开始的数据是100元，小李和小王的动作并没有互斥进行于是。</p>
</blockquote>
<p><strong>Solution</strong></p>
<ul>
<li>数据库中添加version字段</li>
<li>取出记录时，获取当前version</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,<span class="string">`name`</span>,price,<span class="string">`version`</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<ul>
<li>更新时，version + 1，如果where语句中的version版本不对，则更新失败</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> product <span class="keyword">SET</span> price=price+<span class="number">50</span>, <span class="string">`version`</span>=<span class="string">`version`</span> + <span class="number">1</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">AND</span> <span class="string">`version`</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure>



<h6 id="乐观锁实现流程"><a href="#乐观锁实现流程" class="headerlink" title="乐观锁实现流程"></a>乐观锁实现流程</h6><ol>
<li>修改实体类 @Version注解</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建配置文件<ul>
<li>创建包config，创建文件MybatisPlusConfig.java  此时可以删除主类中的 <em>@MapperScan</em> 扫描注解</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mybatis_plus.config;</span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.atguigu.mybatis_plus.mapper"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>注册乐观锁插件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.mybatis_plus.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/5 12:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span>        <span class="comment">//事物处理</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.zwz.mybatis_plus.mapper"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());    <span class="comment">//乐观锁</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.H2)); <span class="comment">//分页插件</span></span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h4><h5 id="首先先看批处理查询"><a href="#首先先看批处理查询" class="headerlink" title="首先先看批处理查询"></a>首先先看批处理查询</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBatchIds</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="简单条件查询"><a href="#简单条件查询" class="headerlink" title="简单条件查询"></a>简单条件查询</h5><p>通过map封装查询条件</p>
<p><strong>注意：</strong>map中的key对应数据库中的列名。如：数据库user_id，实体类是userId，这时map的key需要填写user_id</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectByMap</span><span class="params">()</span></span>&#123;</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"name"</span>, <span class="string">"zwz"</span>);</span><br><span class="line">	map.put(<span class="string">"age"</span>, <span class="number">18</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="接着是分页"><a href="#接着是分页" class="headerlink" title="接着是分页"></a>接着是分页</h5><ol>
<li>添加分页插件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.mybatis_plus.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/5 12:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span>        <span class="comment">//事物处理</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.zwz.mybatis_plus.mapper"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());    <span class="comment">//乐观锁</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.H2)); <span class="comment">//分页插件</span></span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>测试selectPage分页</li>
</ol>
<p><strong>测试：</strong>最终通过page对象获取相关数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">    Page&lt;User&gt; pageParam = userMapper.selectPage(page, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    pageParam.getRecords().forEach(System.out::println);</span><br><span class="line">    System.out.println(pageParam.getCurrent());</span><br><span class="line">    System.out.println(pageParam.getPages());</span><br><span class="line">    System.out.println(pageParam.getSize());</span><br><span class="line">    System.out.println(pageParam.getTotal());</span><br><span class="line">    System.out.println(pageParam.hasNext());</span><br><span class="line">    System.out.println(pageParam.hasPrevious());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>*<em>控制台sql语句打印：SELECT id,name,age,email,create_time,update_time FROM user LIMIT 0,5 *</em></p>
<p>当指定了特定的查询列时，希望分页结果列表只返回被查询的列，而不是很多null值</p>
<p><strong>测试selectMapsPage分页：结果集是Map</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//条件构造器</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectMapsPage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; userQueryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        userQueryWrapper.select(<span class="string">"id"</span>,<span class="string">"name"</span>);</span><br><span class="line"></span><br><span class="line">        Page&lt;Map&lt;String ,Object&gt;&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">        Page&lt;Map&lt;String, Object&gt;&gt; pageParam = userMapper.selectMapsPage(page, userQueryWrapper);</span><br><span class="line"></span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; records = pageParam.getRecords();</span><br><span class="line">        records.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h4 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a>逻辑删除</h4><h5 id="首先先看删除"><a href="#首先先看删除" class="headerlink" title="首先先看删除"></a>首先先看删除</h5><ol>
<li>根据id删除数据</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单语句删除</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteById</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = userMapper.deleteById(<span class="number">5L</span>);</span><br><span class="line">        System.out.println(<span class="string">"删除了第"</span>+result+<span class="string">"行"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>批量删除</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量删除</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteBatchId</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result = userMapper.deleteBatchIds(Arrays.asList(<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>));</span><br><span class="line">    System.out.println(<span class="string">"删除了"</span>+result+<span class="string">"行"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>条件删除</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//条件删除</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteByMap</span><span class="params">()</span></span>&#123;</span><br><span class="line">        HashMap&lt;String,Object&gt; hashMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        hashMap.put(<span class="string">"name"</span>,<span class="string">"zwz1"</span>);</span><br><span class="line">        hashMap.put(<span class="string">"age"</span>,<span class="number">17</span>);</span><br><span class="line">        <span class="keyword">int</span> result = userMapper.deleteByMap(hashMap);</span><br><span class="line">        System.out.println(<span class="string">"删除了名字是"</span>+hashMap.get(<span class="string">"name"</span>)+<span class="string">"年龄为"</span>+hashMap.get(<span class="string">"age"</span>)+<span class="string">"的"</span>+result+<span class="string">"位用户"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>用map接收删除条件，通过匹配map中的key构造删除语句 delete from user where name = ‘zwz1’ and age = 17</p>
</blockquote>
<h5 id="再看逻辑删除"><a href="#再看逻辑删除" class="headerlink" title="再看逻辑删除"></a>再看逻辑删除</h5><ul>
<li>物理删除：真实删除，将对应数据从数据库中删除，之后查询不到此条被删除数据</li>
<li>逻辑删除：假删除，将对应数据中代表是否被删除字段状态修改为“被删除状态”，之后在数据库中仍旧能看到此条数据记录</li>
</ul>
<p><strong>逻辑删除的使用场景：</strong></p>
<ul>
<li>可以进行数据恢复</li>
<li>有关联数据，不便删除</li>
</ul>
<p><strong>实现流程</strong></p>
<ol>
<li>修改数据库 &lt;添加 deleted字段&gt;</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="string">`deleted`</span> <span class="built_in">boolean</span> <span class="keyword">DEFAULT</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>实体类修改</li>
</ol>
<blockquote>
<p>添加deleted字段，并加上@TableLogic注解，这个注解会使全局使用了该entity的sql语句加上where deleted = 0 这个逻辑语句，在删除的情况下先判断deleted = 0？判断是否存在该数据，为0则代表存在， 为1则代表不存在</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置(可选)</li>
</ol>
<p>application.properties 加入以下配置，此为默认值，如果你的默认值和mp默认的一样,该配置可无</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-delete-value</span>=<span class="string">1</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-not-delete-value</span>=<span class="string">0</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Creating a <span class="keyword">new</span> SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@<span class="number">5</span>c82cd4f] was not registered <span class="keyword">for</span> synchronization because synchronization is not active</span><br><span class="line"><span class="number">2023</span>-<span class="number">01</span>-<span class="number">05</span> <span class="number">21</span>:<span class="number">47</span>:<span class="number">42.478</span>  INFO <span class="number">35952</span> --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-<span class="number">1</span> - Starting...</span><br><span class="line"><span class="number">2023</span>-<span class="number">01</span>-<span class="number">05</span> <span class="number">21</span>:<span class="number">47</span>:<span class="number">43.701</span>  INFO <span class="number">35952</span> --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-<span class="number">1</span> - Start completed.</span><br><span class="line">JDBC Connection [HikariProxyConnection@<span class="number">1602069459</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">103082</span>dd] will not be managed by Spring</span><br><span class="line">==&gt;  Preparing: UPDATE user SET deleted=<span class="number">1</span> WHERE name = ? AND age = ? AND deleted=<span class="number">0</span></span><br><span class="line">==&gt; Parameters: zwz1(String), <span class="number">17</span>(Integer)</span><br><span class="line">&lt;==    Updates: <span class="number">0</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@<span class="number">5</span>c82cd4f]</span><br><span class="line">删除了名字是zwz1年龄为<span class="number">17</span>的<span class="number">0</span>位用户</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如上是控制台打印的信息</p>
</blockquote>
<h4 id="条件构造器"><a href="#条件构造器" class="headerlink" title="条件构造器"></a>条件构造器</h4><h5 id="1-Wrapper"><a href="#1-Wrapper" class="headerlink" title="1. Wrapper"></a>1. Wrapper</h5><p><a href="https://www.helloimg.com/image/oGBdV9" target="_blank" rel="noopener"><img src="https://www.helloimg.com/images/2023/01/05/oGBdV9.png" alt="oGBdV9.png"></a></p>
<p>Wrapper ： 条件构造抽象类，最顶端父类  </p>
<p>​    AbstractWrapper ： 用于查询条件封装，生成 sql 的 where 条件</p>
<p>​        QueryWrapper ： 查询条件封装</p>
<p>​        UpdateWrapper ： Update 条件封装</p>
<p>​    AbstractLambdaWrapper ： 使用Lambda 语法</p>
<p>​        LambdaQueryWrapper ：用于Lambda语法使用的查询Wrapper</p>
<p>​        LambdaUpdateWrapper ： Lambda 更新封装Wrapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryWrapperTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-测试"><a href="#2-测试" class="headerlink" title="2.测试"></a>2.测试</h5><h6 id="1、ge、gt、le、lt、isNull、isNotNull"><a href="#1、ge、gt、le、lt、isNull、isNotNull" class="headerlink" title="1、ge、gt、le、lt、isNull、isNotNull"></a><strong>1、ge、gt、le、lt、isNull、isNotNull</strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper</span><br><span class="line">        .isNull(<span class="string">"name"</span>)</span><br><span class="line">        .ge(<span class="string">"age"</span>, <span class="number">12</span>)</span><br><span class="line">        .isNotNull(<span class="string">"email"</span>);</span><br><span class="line">    <span class="keyword">int</span> result = userMapper.delete(queryWrapper);</span><br><span class="line">    System.out.println(<span class="string">"delete return count = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2、eq、ne"><a href="#2、eq、ne" class="headerlink" title="2、eq、ne"></a>2、eq、ne</h6><p><strong>注意：</strong>seletOne()返回的是一条实体记录，当出现多条时会报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectOne</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">"name"</span>, <span class="string">"Tom"</span>);</span><br><span class="line">    User user = userMapper.selectOne(queryWrapper);<span class="comment">//只能返回一条记录，多余一条则抛出异常</span></span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="3、between、notBetween"><a href="#3、between、notBetween" class="headerlink" title="3、between、notBetween"></a><strong>3、between、notBetween</strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.between(<span class="string">"age"</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br><span class="line">    Integer count = userMapper.selectCount(queryWrapper); <span class="comment">//返回数据数量</span></span><br><span class="line">    System.out.println(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="4、like、notLike、likeLeft、likeRight"><a href="#4、like、notLike、likeLeft、likeRight" class="headerlink" title="4、like、notLike、likeLeft、likeRight"></a><strong>4、like、notLike、likeLeft、likeRight</strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectMaps</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper</span><br><span class="line">        .select(<span class="string">"name"</span>, <span class="string">"age"</span>)</span><br><span class="line">        .like(<span class="string">"name"</span>, <span class="string">"e"</span>)</span><br><span class="line"></span><br><span class="line">        .likeRight(<span class="string">"email"</span>, <span class="string">"5"</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);<span class="comment">//返回值是Map列表</span></span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="day2"><a href="#day2" class="headerlink" title="day2"></a>day2</h2><h3 id="搭建项目"><a href="#搭建项目" class="headerlink" title="搭建项目"></a>搭建项目</h3><h4 id="1-创建父工程"><a href="#1-创建父工程" class="headerlink" title="1. 创建父工程"></a>1. 创建父工程</h4><ul>
<li><p><strong>guli_parent：根目录（父工程），管理四个子模块：</strong></p>
</li>
<li><ul>
<li><p><strong>canal_client：canal数据库表同步模块（统计同步数据）</strong></p>
</li>
<li><p><strong>common</strong>：公共模块父节点**</p>
</li>
<li><ul>
<li>common_util：工具类模块，所有模块都可以依赖于它</li>
<li>service_base：service服务的base包，包含service服务的公共配置类，所有service模块依赖于它</li>
<li>spring_security：认证与授权模块，需要认证授权的service服务依赖于它</li>
</ul>
</li>
<li><p><strong>infrastructure</strong>：基础服务模块父节点</p>
</li>
<li><ul>
<li>api_gateway：api网关服务</li>
</ul>
</li>
<li><p><strong>service**</strong>：api接口服务父节点**</p>
</li>
<li><ul>
<li>service_edu：教学相关api接口服务</li>
<li>service_oss：阿里云oss api接口服务</li>
<li>service_acl：用户权限管理api接口服务（用户管理、角色管理和权限管理等）</li>
<li>service_cms：cms api接口服务</li>
<li>service_sms：短信api接口服务</li>
<li>service_trade：订单和支付相关api接口服务</li>
<li>service_statistics：统计报表api接口服务</li>
<li>service_ucenter：会员api接口服务</li>
<li>service_vod：视频点播api接口服务</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-创建版本控制工程-guli-parent"><a href="#2-创建版本控制工程-guli-parent" class="headerlink" title="2. 创建版本控制工程(guli_parent)"></a>2. 创建版本控制工程(guli_parent)</h4><ol>
<li>Spring initializr 初始化项目 GroupId:com.zwz  Artificial:guli_parent</li>
<li>由于该模块是用于管理版本的，所以Src目录无需则删除</li>
<li>配置Springboot版本</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>配置pom版本号</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis-plus.version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">mybatis-plus.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">velocity.version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">velocity.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swagger.version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">swagger.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun.oss.version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">aliyun.oss.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jodatime.version</span>&gt;</span>2.10.1<span class="tag">&lt;/<span class="name">jodatime.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-fileupload.version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">commons-fileupload.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-io.version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">commons-io.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-lang.version</span>&gt;</span>3.9<span class="tag">&lt;/<span class="name">commons-lang.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">httpclient.version</span>&gt;</span>4.5.1<span class="tag">&lt;/<span class="name">httpclient.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jwt.version</span>&gt;</span>0.7.0<span class="tag">&lt;/<span class="name">jwt.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun-java-sdk-core.version</span>&gt;</span>4.3.3<span class="tag">&lt;/<span class="name">aliyun-java-sdk-core.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun-sdk-oss.version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">aliyun-sdk-oss.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun-java-sdk-vod.version</span>&gt;</span>2.15.2<span class="tag">&lt;/<span class="name">aliyun-java-sdk-vod.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun-java-vod-upload.version</span>&gt;</span>1.4.11<span class="tag">&lt;/<span class="name">aliyun-java-vod-upload.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun-sdk-vod-upload.version</span>&gt;</span>1.4.11<span class="tag">&lt;/<span class="name">aliyun-sdk-vod-upload.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fastjson.version</span>&gt;</span>1.2.28<span class="tag">&lt;/<span class="name">fastjson.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gson.version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">gson.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">json.version</span>&gt;</span>20170516<span class="tag">&lt;/<span class="name">json.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-dbutils.version</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">commons-dbutils.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canal.client.version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">canal.client.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">docker.image.prefix</span>&gt;</span>zx<span class="tag">&lt;/<span class="name">docker.image.prefix</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cloud-alibaba.version</span>&gt;</span>0.2.2.RELEASE<span class="tag">&lt;/<span class="name">cloud-alibaba.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>添加pom依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Spring Cloud--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>Hoxton.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;cloud-alibaba.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--mybatis-plus 持久层--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- velocity 模板引擎, Mybatis Plus 代码生成器需要 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;velocity.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--swagger ui--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--aliyunOSS--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun.oss.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--日期时间工具--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jodatime.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--文件上传--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-fileupload.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--commons-io--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-io.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--commons-lang3--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--httpclient--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;httpclient.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- JWT --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jwt.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--aliyun--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-java-sdk-core.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-sdk-oss.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-vod<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-java-sdk-vod.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;groupId&gt;com.aliyun&lt;/groupId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;artifactId&gt;aliyun-sdk-vod-upload&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;version&gt;$&#123;aliyun-sdk-vod-upload.version&#125;&lt;/version&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--json--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;fastjson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;json.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;gson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-dbutils.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.otter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>canal.client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;canal.client.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>有个小bug 如果dependencyManagement存在的话maven不会自动下载不存在的包，因此可以先吧dependencyManagement注释掉然后下载完包后再写入</p>
</blockquote>
<h3 id="搭建父模块common"><a href="#搭建父模块common" class="headerlink" title="搭建父模块common"></a>搭建父模块common</h3><ul>
<li>在guli_parent下创建普通maven模块    <ul>
<li>GroupId:com.zwz</li>
<li>Artificial:common</li>
</ul>
</li>
<li>由于也是一个父模块 无需编码src也可删除</li>
</ul>
<ol>
<li>配置pom文件</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--lombok用来简化实体类：需要安装lombok插件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>顾名思义，common 普通 放一些普通的通用的依赖</p>
</blockquote>
<ol start="2">
<li><p>创建子模块common_util</p>
<ul>
<li><p>在common下创建普通maven模块</p>
<ul>
<li><p>Group：com.zwz</p>
</li>
<li><p>Artifact：common_util</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>注意该模块是属于common下的子模块不是parent下的</p>
</blockquote>
<ol start="3">
<li><p>创建service_base模块</p>
<ul>
<li><p>在common下创建普通maven模块</p>
<ul>
<li><p>Group：com.zwz</p>
</li>
<li><p>Artifact：service_base</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>注意该模块是属于common下的子模块不是parent下的</p>
</blockquote>
<p><strong>配置pom文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zwz<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common_util<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="搭建Service"><a href="#搭建Service" class="headerlink" title="搭建Service"></a>搭建Service</h3><ol>
<li><p>在guli_parent下创建普通maven模块</p>
<ul>
<li><p>Group：com.atguigu</p>
</li>
<li><p>Artifact：service</p>
</li>
</ul>
</li>
<li><p>删除Src</p>
</li>
<li><p>配置pom文件</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zwz<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>service_base<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- velocity 模板引擎, Mybatis Plus 代码生成器需要 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--lombok用来简化实体类：需要安装lombok插件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--httpclient--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--commons-io--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--json--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>在service下创建普通maven模块</p>
<ul>
<li><p>Group：com.atguigu</p>
</li>
<li><p>Artifact：service_edu</p>
</li>
</ul>
</li>
</ol>
<h3 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h3><h4 id="1、数据库"><a href="#1、数据库" class="headerlink" title="1、数据库"></a>1、数据库</h4><p>创建数据库：guli_edu</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">SQLyog Ultimate v12.09 (64 bit)</span></span><br><span class="line"><span class="comment">MySQL - 5.7.21-log : Database - guli_edu</span></span><br><span class="line"><span class="comment">*********************************************************************</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET NAMES utf8 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=''*/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;</span><br><span class="line"><span class="comment">/*Table structure for table `edu_chapter` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_chapter`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_chapter`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'章节ID'</span>,</span><br><span class="line">  <span class="string">`course_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'章节名称'</span>,</span><br><span class="line">  <span class="string">`sort`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'显示排序'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_course_id`</span> (<span class="string">`course_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_chapter` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `edu_comment` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_comment`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_comment`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'讲师ID'</span>,</span><br><span class="line">  <span class="string">`course_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'课程id'</span>,</span><br><span class="line">  <span class="string">`teacher_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'讲师id'</span>,</span><br><span class="line">  <span class="string">`member_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'会员id'</span>,</span><br><span class="line">  <span class="string">`nickname`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'会员昵称'</span>,</span><br><span class="line">  <span class="string">`avatar`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'会员头像'</span>,</span><br><span class="line">  <span class="string">`content`</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'评论内容'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_course_id`</span> (<span class="string">`course_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_teacher_id`</span> (<span class="string">`teacher_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_member_id`</span> (<span class="string">`member_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 <span class="keyword">COMMENT</span>=<span class="string">'评论'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_comment` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `edu_course` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_course`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_course`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`teacher_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程讲师ID'</span>,</span><br><span class="line">  <span class="string">`subject_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程专业ID'</span>,</span><br><span class="line">  <span class="string">`subject_parent_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程专业父级ID'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程标题'</span>,</span><br><span class="line">  <span class="string">`price`</span> <span class="built_in">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00'</span> <span class="keyword">COMMENT</span> <span class="string">'课程销售价格，设置为0则可免费观看'</span>,</span><br><span class="line">  <span class="string">`lesson_num`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'总课时'</span>,</span><br><span class="line">  <span class="string">`cover`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程封面图片路径'</span>,</span><br><span class="line">  <span class="string">`buy_count`</span> <span class="built_in">bigint</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'销售数量'</span>,</span><br><span class="line">  <span class="string">`view_count`</span> <span class="built_in">bigint</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'浏览数量'</span>,</span><br><span class="line">  <span class="string">`version`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'乐观锁'</span>,</span><br><span class="line">  <span class="string">`status`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'Draft'</span> <span class="keyword">COMMENT</span> <span class="string">'课程状态 Draft未发布  Normal已发布'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_title`</span> (<span class="string">`title`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_subject_id`</span> (<span class="string">`subject_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_teacher_id`</span> (<span class="string">`teacher_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_course` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `edu_course_collect` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_course_collect`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_course_collect`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'收藏ID'</span>,</span><br><span class="line">  <span class="string">`course_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程讲师ID'</span>,</span><br><span class="line">  <span class="string">`member_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'课程专业ID'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程收藏'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_course_collect` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `edu_course_description` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_course_description`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_course_description`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`description`</span> <span class="built_in">text</span> <span class="keyword">COMMENT</span> <span class="string">'课程简介'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 <span class="keyword">COMMENT</span>=<span class="string">'课程简介'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_course_description` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `edu_subject` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_subject`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_subject`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程类别ID'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'类别名称'</span>,</span><br><span class="line">  <span class="string">`parent_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'父ID'</span>,</span><br><span class="line">  <span class="string">`sort`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'排序字段'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_parent_id`</span> (<span class="string">`parent_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程科目'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_subject` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `edu_teacher` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_teacher`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_teacher`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'讲师ID'</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'讲师姓名'</span>,</span><br><span class="line">  <span class="string">`intro`</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'讲师简介'</span>,</span><br><span class="line">  <span class="string">`career`</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'讲师资历,一句话说明讲师'</span>,</span><br><span class="line">  <span class="string">`level`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'头衔 1高级讲师 2首席讲师'</span>,</span><br><span class="line">  <span class="string">`avatar`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'讲师头像'</span>,</span><br><span class="line">  <span class="string">`sort`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'排序'</span>,</span><br><span class="line">  <span class="string">`join_date`</span> <span class="built_in">date</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'入驻时间'</span>,</span><br><span class="line">  <span class="string">`is_deleted`</span> <span class="built_in">tinyint</span>(<span class="number">1</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'逻辑删除 1（true）已删除， 0（false）未删除'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`uk_name`</span> (<span class="string">`name`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 <span class="keyword">COMMENT</span>=<span class="string">'讲师'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_teacher` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`edu_teacher`</span>(<span class="string">`id`</span>,<span class="string">`name`</span>,<span class="string">`intro`</span>,<span class="string">`career`</span>,<span class="string">`level`</span>,<span class="string">`avatar`</span>,<span class="string">`sort`</span>,<span class="string">`join_date`</span>,<span class="string">`is_deleted`</span>,<span class="string">`gmt_create`</span>,<span class="string">`gmt_modified`</span>) <span class="keyword">values</span> (<span class="string">'1'</span>,<span class="string">'刘德华'</span>,<span class="string">'毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余'</span>,<span class="string">'具备深厚的数学思维功底、丰富的小学教育经验，授课风格生动活泼，擅长用形象生动的比喻帮助理解、简单易懂的语言讲解难题，深受学生喜欢'</span>,<span class="number">2</span>,<span class="string">'https://online-teach-file-helen.oss-cn-beijing.aliyuncs.com/avatar/2019/11/25/03.jpg'</span>,<span class="number">10</span>,<span class="string">'2019-10-29'</span>,<span class="number">0</span>,<span class="string">'2018-03-30 17:15:57'</span>,<span class="string">'2019-04-28 05:02:18'</span>),(<span class="string">'10'</span>,<span class="string">'唐嫣'</span>,<span class="string">'北京师范大学法学院副教授'</span>,<span class="string">'北京师范大学法学院副教授、清华大学法学博士。自2004年至今已有9年的司法考试培训经验。长期从事司法考试辅导，深知命题规律，了解解题技巧。内容把握准确，授课重点明确，层次分明，调理清晰，将法条法理与案例有机融合，强调综合，深入浅出。'</span>,<span class="number">1</span>,<span class="string">'http://guli-file.oss-cn-beijing.aliyuncs.com/avatar/2019/02/27/073eb5d2-f5f4-488a-82ed-aec8a5289a5d.png'</span>,<span class="number">20</span>,<span class="string">'2019-10-29'</span>,<span class="number">0</span>,<span class="string">'2018-04-03 14:32:19'</span>,<span class="string">'2019-02-22 02:01:26'</span>),(<span class="string">'2'</span>,<span class="string">'周润发'</span>,<span class="string">'中国人民大学附属中学数学一级教师'</span>,<span class="string">'中国科学院数学与系统科学研究院应用数学专业博士，研究方向为数字图像处理，中国工业与应用数学学会会员。参与全国教育科学“十五”规划重点课题“信息化进程中的教育技术发展研究”的子课题“基与课程改革的资源开发与应用”，以及全国“十五”科研规划全国重点项目“掌上型信息技术产品在教学中的运用和开发研究”的子课题“用技术学数学”。'</span>,<span class="number">2</span>,<span class="string">'https://guli-file-helen.oss-cn-beijing.aliyuncs.com/avatar/2020/04/14/f606ed5b-1d46-43a1-945c-3e1b3b58fc0a.jpg'</span>,<span class="number">1</span>,<span class="string">'2019-10-28'</span>,<span class="number">0</span>,<span class="string">'2018-03-30 18:28:26'</span>,<span class="string">'2020-04-14 17:40:36'</span>),(<span class="string">'3'</span>,<span class="string">'钟汉良'</span>,<span class="string">'钟汉良钟汉良钟汉良钟汉良'</span>,<span class="string">'中教一级职称。讲课极具亲和力。'</span>,<span class="number">1</span>,<span class="string">'http://guli-file.oss-cn-beijing.aliyuncs.com/avatar/2019/02/26/250bab5f-bbd6-49ab-80c3-7413ce806e83.jpg'</span>,<span class="number">2</span>,<span class="string">'2019-10-29'</span>,<span class="number">0</span>,<span class="string">'2018-03-31 09:20:46'</span>,<span class="string">'2019-02-22 02:01:27'</span>),(<span class="string">'4'</span>,<span class="string">'周杰伦'</span>,<span class="string">'长期从事考研政治课讲授和考研命题趋势与应试对策研究。考研辅导新锐派的代表。'</span>,<span class="string">'政治学博士、管理学博士后，北京师范大学马克思主义学院副教授。多年来总结出了一套行之有效的应试技巧与答题方法，针对性和实用性极强，能帮助考生在轻松中应考，在激励的竞争中取得高分，脱颖而出。'</span>,<span class="number">1</span>,<span class="string">'https://online-teach-file-helen.oss-cn-beijing.aliyuncs.com/avatar/2019/11/25/fee1e99f-8852-4da0-a256-9732e55bb608.jpg'</span>,<span class="number">1</span>,<span class="string">'2019-10-27'</span>,<span class="number">0</span>,<span class="string">'2018-04-03 14:13:51'</span>,<span class="string">'2019-10-29 19:52:46'</span>),(<span class="string">'5'</span>,<span class="string">'陈伟霆'</span>,<span class="string">'人大附中2009届毕业生'</span>,<span class="string">'北京大学数学科学学院2008级本科生，2012年第八届学生五四奖章获得者，在数学领域取得多项国际国内奖项，学术研究成绩突出。曾被两次评为北京大学三好学生、一次评为北京大学三好标兵，获得过北京大学国家奖学金、北京大学廖凯原奖学金、北京大学星光国际一等奖学金、北京大学明德新生奖学金等。'</span>,<span class="number">1</span>,<span class="string">''</span>,<span class="number">1</span>,<span class="string">'2019-10-29'</span>,<span class="number">0</span>,<span class="string">'2018-04-03 14:15:36'</span>,<span class="string">'2019-02-22 02:01:29'</span>),(<span class="string">'6'</span>,<span class="string">'姚晨'</span>,<span class="string">'华东师范大学数学系硕士生导师，中国数学奥林匹克高级教练'</span>,<span class="string">'曾参与北京市及全国多项数学活动的命题和组织工作，多次带领北京队参加高中、初中、小学的各项数学竞赛，均取得优异成绩。教学活而新，能够调动学生的学习兴趣并擅长对学生进行思维点拨，对学生学习习惯的养成和非智力因素培养有独到之处，是一位深受学生喜爱的老师。'</span>,<span class="number">1</span>,<span class="string">''</span>,<span class="number">1</span>,<span class="string">'2019-10-29'</span>,<span class="number">0</span>,<span class="string">'2018-04-01 14:19:28'</span>,<span class="string">'2019-02-22 02:01:29'</span>),(<span class="string">'7'</span>,<span class="string">'胡歌'</span>,<span class="string">'考研政治辅导实战派专家，全国考研政治命题研究组核心成员。'</span>,<span class="string">'法学博士，北京师范大学马克思主义学院副教授，专攻毛泽东思想概论、邓小平理论，长期从事考研辅导。出版著作两部，发表学术论文30余篇，主持国家社会科学基金项目和教育部重大课题子课题各一项，参与中央实施马克思主义理论研究和建设工程项目。'</span>,<span class="number">2</span>,<span class="string">''</span>,<span class="number">8</span>,<span class="string">'2019-09-04'</span>,<span class="number">0</span>,<span class="string">'2018-04-03 14:21:03'</span>,<span class="string">'2019-02-22 02:01:30'</span>),(<span class="string">'8'</span>,<span class="string">'谢娜'</span>,<span class="string">'资深课程设计专家，专注10年AACTP美国培训协会认证导师'</span>,<span class="string">'十年课程研发和培训咨询经验，曾任国企人力资源经理、大型外企培训经理，负责企业大学和培训体系搭建；曾任专业培训机构高级顾问、研发部总监，为包括广东移动、东莞移动、深圳移动、南方电网、工商银行、农业银行、民生银行、邮储银行、TCL集团、清华大学继续教育学院、中天路桥、广西扬翔股份等超过200家企业提供过培训与咨询服务，并担任近50个大型项目的总负责人。'</span>,<span class="number">1</span>,<span class="string">''</span>,<span class="number">10</span>,<span class="string">'2019-10-29'</span>,<span class="number">0</span>,<span class="string">'2018-04-03 14:23:33'</span>,<span class="string">'2019-11-23 08:38:09'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `edu_video` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`edu_video`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_video`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'视频ID'</span>,</span><br><span class="line">  <span class="string">`course_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`chapter_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'章节ID'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'节点名称'</span>,</span><br><span class="line">  <span class="string">`video_source_id`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'云端视频资源'</span>,</span><br><span class="line">  <span class="string">`video_original_name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'原始文件名称'</span>,</span><br><span class="line">  <span class="string">`sort`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'排序字段'</span>,</span><br><span class="line">  <span class="string">`play_count`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'播放次数'</span>,</span><br><span class="line">  <span class="string">`is_free`</span> <span class="built_in">tinyint</span>(<span class="number">1</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'是否可以试听：0收费 1免费'</span>,</span><br><span class="line">  <span class="string">`duration`</span> <span class="built_in">float</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'视频时长（秒）'</span>,</span><br><span class="line">  <span class="string">`status`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'Empty'</span> <span class="keyword">COMMENT</span> <span class="string">'状态'</span>,</span><br><span class="line">  <span class="string">`size`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'视频源文件大小（字节）'</span>,</span><br><span class="line">  <span class="string">`version`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'乐观锁'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_course_id`</span> (<span class="string">`course_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_chapter_id`</span> (<span class="string">`chapter_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程视频'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `edu_video` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */</span>;</span><br></pre></td></tr></table></figure>



<h4 id="2、数据库设计规约"><a href="#2、数据库设计规约" class="headerlink" title="2、数据库设计规约"></a>2、数据库设计规约</h4><p><strong>注意：</strong>数据库设计规约并不是数据库设计的严格规范，根据不同团队的不同要求设计</p>
<p>本项目参考《阿里巴巴Java开发手册》：五、MySQL数据库</p>
<p>1、库名与应用名称尽量一致</p>
<p>2、表名、字段名必须使用小写字母或数字，禁止出现数字开头，</p>
<p>3、表名不使用复数名词</p>
<p>4、表的命名最好是加上“业务名称_表的作用”。如，edu_teacher</p>
<p>5、表必备三字段：id, gmt_create, gmt_modified</p>
<p>6、单表行数超过 500 万行或者单表容量超过 2GB，才推荐进行分库分表。 说明：如果预计三年后的数据量根本达不到这个级别，请不要在创建表时就分库分表。 </p>
<p>7、表达是与否概念的字段，必须使用 is_xxx 的方式命名，数据类型是 unsigned tinyint （1 表示是，0 表示否）。 </p>
<p>说明：任何字段如果为非负数，必须是 unsigned。</p>
<p>注意：POJO 类中的任何布尔类型的变量，都不要加 is 前缀。数据库表示是与否的值，使用 tinyint 类型，坚持 is_xxx 的 命名方式是为了明确其取值含义与取值范围。 </p>
<p>正例：表达逻辑删除的字段名 is_deleted，1 表示删除，0 表示未删除。 </p>
<p>8、小数类型为  decimal，禁止使用 float 和 double。 说明：float 和 double  在存储的时候，存在精度损失的问题，很可能在值的比较时，得到不 正确的结果。如果存储的数据范围超过 decimal  的范围，建议将数据拆成整数和小数分开存储。</p>
<p>9、如果存储的字符串长度几乎相等，使用 char 定长字符串类型。 </p>
<p>10、varchar 是可变长字符串，不预先分配存储空间，长度不要超过 5000，如果存储长度大于此值，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索引效率。</p>
<p>11、唯一索引名为 uk_字段名(unique key)；普通索引名则为 idx_字段名(index)。</p>
<p>说明：uk_ 即 unique key；idx_ 即 index 的简称</p>
<p>12、不得使用外键与级联，一切外键概念必须在应用层解决。外键与级联更新适用于单机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响数据库的插入速度。</p>
<h3 id="MP的代码生成器"><a href="#MP的代码生成器" class="headerlink" title="MP的代码生成器"></a>MP的代码生成器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.po.TableFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.DateType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/6 16:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeGenerator</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">genCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//String prefix = "dbxxx_";</span></span><br><span class="line">        String moduleName = <span class="string">"edu"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1、创建代码生成器</span></span><br><span class="line">        AutoGenerator mpg = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、全局配置</span></span><br><span class="line">        GlobalConfig gc = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">        String projectPath = System.getProperty(<span class="string">"user.dir"</span>);</span><br><span class="line">        gc.setOutputDir(projectPath + <span class="string">"/src/main/java"</span>);</span><br><span class="line">        gc.setAuthor(<span class="string">"zwz"</span>);</span><br><span class="line">        gc.setOpen(<span class="keyword">false</span>); <span class="comment">//生成后是否打开资源管理器</span></span><br><span class="line">        <span class="comment">// gc.setFileOverride(false); //重新生成时文件是否覆盖</span></span><br><span class="line">        gc.setServiceName(<span class="string">"%sService"</span>); <span class="comment">//去掉Service接口的首字母I</span></span><br><span class="line">        gc.setIdType(IdType.ASSIGN_ID); <span class="comment">//主键策略</span></span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);<span class="comment">//定义生成的实体类中日期类型</span></span><br><span class="line">        gc.setSwagger2(<span class="keyword">true</span>);<span class="comment">//开启Swagger2模式</span></span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、数据源配置</span></span><br><span class="line">        DataSourceConfig dsc = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">        dsc.setUrl(<span class="string">"jdbc:mysql://localhost:3306/"</span> +  <span class="string">"guli_"</span> + moduleName + <span class="string">"?serverTimezone=GMT%2B8"</span>);</span><br><span class="line">        dsc.setDriverName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        dsc.setUsername(<span class="string">"root"</span>);</span><br><span class="line">        dsc.setPassword(<span class="string">"root"</span>);</span><br><span class="line">        dsc.setDbType(DbType.MYSQL);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4、包配置</span></span><br><span class="line">        PackageConfig pc = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">        pc.setModuleName(moduleName); <span class="comment">//模块名</span></span><br><span class="line">        pc.setParent(<span class="string">"com.zwz.guli.service"</span>);</span><br><span class="line">        pc.setController(<span class="string">"controller"</span>);</span><br><span class="line">        pc.setEntity(<span class="string">"entity"</span>);</span><br><span class="line">        pc.setService(<span class="string">"service"</span>);</span><br><span class="line">        pc.setMapper(<span class="string">"mapper"</span>);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5、策略配置</span></span><br><span class="line">        StrategyConfig strategy = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);<span class="comment">//数据库表映射到实体的命名策略</span></span><br><span class="line">        strategy.setTablePrefix(moduleName + <span class="string">"_"</span>);<span class="comment">//设置表前缀不生成</span></span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);<span class="comment">//数据库表字段映射到实体的命名策略</span></span><br><span class="line">        strategy.setEntityLombokModel(<span class="keyword">true</span>); <span class="comment">// lombok 模型 @Accessors(chain = true) setter链式操作</span></span><br><span class="line">        strategy.setLogicDeleteFieldName(<span class="string">"is_deleted"</span>);<span class="comment">//逻辑删除字段名</span></span><br><span class="line">        strategy.setEntityBooleanColumnRemoveIsPrefix(<span class="keyword">true</span>);<span class="comment">//去掉布尔值的is_前缀</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//自动填充</span></span><br><span class="line">        TableFill gmtCreate = <span class="keyword">new</span> TableFill(<span class="string">"gmt_create"</span>, FieldFill.INSERT);</span><br><span class="line">        TableFill gmtModified = <span class="keyword">new</span> TableFill(<span class="string">"gmt_modified"</span>, FieldFill.INSERT_UPDATE);</span><br><span class="line">        ArrayList&lt;TableFill&gt; tableFills = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        tableFills.add(gmtCreate);</span><br><span class="line">        tableFills.add(gmtModified);</span><br><span class="line">        strategy.setTableFillList(tableFills);</span><br><span class="line">        strategy.setRestControllerStyle(<span class="keyword">true</span>); <span class="comment">//restful api风格控制器</span></span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="keyword">true</span>); <span class="comment">//url中驼峰转连字符</span></span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置BaseEntity</span></span><br><span class="line">        strategy.setSuperEntityClass(<span class="string">"com.zwz.guli.service.base.model.BaseEntity"</span>);</span><br><span class="line">        <span class="comment">// 填写BaseEntity中的公共字段</span></span><br><span class="line">        strategy.setSuperEntityColumns(<span class="string">"id"</span>, <span class="string">"gmt_create"</span>, <span class="string">"gmt_modified"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6、执行</span></span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="执行代码生成器"><a href="#执行代码生成器" class="headerlink" title="执行代码生成器"></a><strong>执行代码生成器</strong></h4><p>XxxServiceImpl 继承了 ServiceImpl 类，并且MP为我们在ServiceImpl中注入了 baseMapper</p>
<h3 id="讲师接口开发"><a href="#讲师接口开发" class="headerlink" title="讲师接口开发"></a>讲师接口开发</h3><h4 id="1、创建application-yml文件"><a href="#1、创建application-yml文件" class="headerlink" title="1、创建application.yml文件"></a>1、创建application.yml文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8110</span> <span class="comment">#服务器端口</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment"># 开发环境设置</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">service_edu</span> <span class="comment"># 服务名</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/guli_edu?serverTimezone=GMT%2B8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">time-zone:</span> <span class="string">GMT+8</span></span><br><span class="line">    <span class="attr">date-format:</span> <span class="string">yyyy-MM-dd</span> <span class="string">HH:mm:ss</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="comment"># mybatis 日志</span></span><br></pre></td></tr></table></figure>

<h4 id="2、创建SpringBoot配置文件"><a href="#2、创建SpringBoot配置文件" class="headerlink" title="2、创建SpringBoot配置文件"></a>2、创建SpringBoot配置文件</h4><blockquote>
<p>在service_base中创建MybatisPlusConfig</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.base.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/6 20:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.zwz.guli.service.*.mapper"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());    <span class="comment">//乐观锁</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.H2)); <span class="comment">//分页插件</span></span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3、创建SpringBoot启动类"><a href="#3、创建SpringBoot启动类" class="headerlink" title="3、创建SpringBoot启动类"></a>3、创建SpringBoot启动类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/6 20:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(&#123;<span class="string">"com.zwz.guli"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceEduApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ServiceEduApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="讲师列表API"><a href="#讲师列表API" class="headerlink" title="讲师列表API"></a>讲师列表API</h3><h4 id="1、编写讲师管理接口"><a href="#1、编写讲师管理接口" class="headerlink" title="1、编写讲师管理接口"></a>1、编写讲师管理接口</h4><p>修改TeacherController的包名，添加 “.admin”</p>
<p>修改TeacherController的@RequestMapping，添加 “/admin”</p>
<blockquote>
<p>修改TeacherController的包名，添加 “.admin”</p>
<p>修改TeacherController的@RequestMapping，添加 “/admin”</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.controller.admin;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.service.TeacherService;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 讲师 前端控制器</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/admin/edu/teacher"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Teacher&gt; <span class="title">listAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> teacherService.list();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/remove/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeById</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> teacherService.removeById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、统一返回的json时间格式"><a href="#2、统一返回的json时间格式" class="headerlink" title="2、统一返回的json时间格式"></a>2、统一返回的json时间格式</h4><p>默认情况下json时间格式带有时区，并且是世界标准时间，和我们的时间差了八个小时</p>
<p>在application.yml中设置</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">time-zone:</span> <span class="string">GMT+8</span></span><br><span class="line">    <span class="attr">date-format:</span> <span class="string">yyyy-MM-dd</span> <span class="string">HH:mm:ss</span></span><br></pre></td></tr></table></figure>

<p>Teacher.java 的 joinDate字段添加数据类型转换，可以覆盖全局配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonFormat</span>(timezone = <span class="string">"GMT+8"</span>, pattern = <span class="string">"yyyy-MM-dd"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="逻辑删除API"><a href="#逻辑删除API" class="headerlink" title="逻辑删除API"></a>逻辑删除API</h3><h4 id="1、添加删除方法"><a href="#1、添加删除方法" class="headerlink" title="1、添加删除方法"></a>1、添加删除方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/remove/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeById</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> teacherService.removeById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、使用postman测试删除"><a href="#2、使用postman测试删除" class="headerlink" title="2、使用postman测试删除"></a>2、使用postman测试删除</h4><p><a href="https://imgse.com/i/pSZNV8x" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/08/pSZNV8x.png" alt="pSZNV8x.png"></a></p>
<h3 id="Swagger2介绍"><a href="#Swagger2介绍" class="headerlink" title="Swagger2介绍"></a>Swagger2介绍</h3><p><a href="https://swagger.io/" target="_blank" rel="noopener">https://swagger.io/</a></p>
<p>前后端分离开发模式中，api文档是最好的沟通方式。</p>
<p>Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。</p>
<ol>
<li>及时性 (接口变更后，能够及时准确地通知相关前后端开发人员)</li>
<li>规范性 (并且保证接口的规范性，如接口的地址，请求方式，参数及响应格式和错误信息)</li>
<li>一致性 (接口信息一致，不会出现因开发人员拿到的文档版本不一致，而出现分歧)</li>
<li>可测性 (直接在接口文档上进行测试，以方便理解业务)</li>
</ol>
<ul>
<li>前端工程师编写接口文档（使用swagger2编辑器或其他接口生成工具）</li>
<li>交给后端工程师</li>
<li>根据swagger文档编写后端接口</li>
<li>最终根据生成的swagger文件进行接口联调</li>
</ul>
<h4 id="配置Swagger2"><a href="#配置Swagger2" class="headerlink" title="配置Swagger2"></a>配置Swagger2</h4><blockquote>
<p>common中添加依赖</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建Swagger2配置文件"><a href="#创建Swagger2配置文件" class="headerlink" title="创建Swagger2配置文件"></a>创建Swagger2配置文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.base.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/6 22:17</span></span><br><span class="line"><span class="comment"> * swagger2 配置类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swagger2Config</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">webApiConfig</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Docket docket = <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2);</span><br><span class="line">        <span class="keyword">return</span> docket;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="重启服务器查看接口"><a href="#重启服务器查看接口" class="headerlink" title="重启服务器查看接口"></a>重启服务器查看接口</h4><p><a href="http://localhost:8101/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8110/swagger-ui.html</a></p>
<p><a href="https://imgse.com/i/pSZDAmV" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/09/pSZDAmV.jpg" alt="pSZDAmV.jpg"></a></p>
<h4 id="常见注解"><a href="#常见注解" class="headerlink" title="常见注解"></a>常见注解</h4><ol>
<li><p>API模型</p>
<p>entity的实体类中可以添加一些自定义设置，例如：定义样例数据</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"入驻时间"</span>, example = <span class="string">"2010-01-01"</span>)</span><br><span class="line"><span class="meta">@JsonFormat</span>(timezone = <span class="string">"GMT+8"</span>, pattern = <span class="string">"yyyy-MM-dd"</span>)</span><br><span class="line"><span class="keyword">private</span> Date joinDate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"创建时间"</span>, example = <span class="string">"2019-01-01 8:00:00"</span>)</span><br><span class="line"><span class="meta">@TableField</span>(fill = FieldFill.INSERT)</span><br><span class="line"><span class="keyword">private</span> Date gmtCreate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"更新时间"</span>, example = <span class="string">"2019-01-01 8:00:00"</span>)</span><br><span class="line"><span class="meta">@TableField</span>(fill = FieldFill.INSERT_UPDATE)</span><br><span class="line"><span class="keyword">private</span> Date gmtModified;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>定义接口说明和参数说明</li>
</ol>
<ul>
<li><p>定义在类上：@Api</p>
</li>
<li><p>定义在方法上：@ApiOperation</p>
</li>
<li><p>定义在参数上：@ApiParam</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Api</span>(tags = <span class="string">"讲师管理"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/admin/edu/teacher"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"所有讲师列表"</span>)</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Teacher&gt; <span class="title">listAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> teacherService.list();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"根据ID删除讲师"</span>)</span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/remove/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeById</span><span class="params">(@ApiParam(<span class="string">"讲师id"</span>)</span> @PathVariable String id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> teacherService.removeById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="统一返回数据"><a href="#统一返回数据" class="headerlink" title="统一返回数据"></a>统一返回数据</h3><p>项目中我们会将响应封装成json返回，一般我们会将所有接口的数据格式统一， 使前端(iOS Android, Web)对数据的操作更一致、轻松。</p>
<p>一般情况下，统一返回数据格式没有固定的格式，只要能描述清楚返回的数据状态以及要返回的具体数据就可以。但是一般会包含状态码、返回消息、数据这几部分内容</p>
<p>例如，我们的系统要求返回的基本数据格式如下：</p>
<p><strong>列表</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"success"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"code"</span>: <span class="number">20000</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"成功"</span>,</span><br><span class="line">  <span class="attr">"data"</span>: &#123;</span><br><span class="line">    <span class="attr">"items"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"刘德华"</span>,</span><br><span class="line">        <span class="attr">"intro"</span>: <span class="string">"毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>分页</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"success"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"code"</span>: <span class="number">20000</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"成功"</span>,</span><br><span class="line">  <span class="attr">"data"</span>: &#123;</span><br><span class="line">    <span class="attr">"total"</span>: <span class="number">17</span>,</span><br><span class="line">    <span class="attr">"rows"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"刘德华"</span>,</span><br><span class="line">        <span class="attr">"intro"</span>: <span class="string">"毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>没有返回数据：</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"success"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"code"</span>: <span class="number">20000</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"成功"</span>,</span><br><span class="line">  <span class="attr">"data"</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>失败：</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"success"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"code"</span>: <span class="number">20001</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"失败"</span>,</span><br><span class="line">  <span class="attr">"data"</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因此，我们定义统一结果</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"success"</span>: 布尔, <span class="comment">//响应是否成功</span></span><br><span class="line">  <span class="attr">"code"</span>: 数字, <span class="comment">//响应码</span></span><br><span class="line">  <span class="attr">"message"</span>: 字符串, <span class="comment">//返回消息</span></span><br><span class="line">  <span class="attr">"data"</span>: HashMap <span class="comment">//返回数据，放在键值对中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、定义统一返回结果"><a href="#二、定义统一返回结果" class="headerlink" title="二、定义统一返回结果"></a>二、定义统一返回结果</h4><h5 id="1、创建返回码定义枚举类"><a href="#1、创建返回码定义枚举类" class="headerlink" title="1、创建返回码定义枚举类"></a>1、创建返回码定义枚举类</h5><p>在common_util中</p>
<p>创建包：com.zwz.guli.common.base.result</p>
<p>创建枚举类： ResultCodeEnum.java</p>
<h5 id="2、创建结果类"><a href="#2、创建结果类" class="headerlink" title="2、创建结果类"></a>2、创建结果类</h5><p>com.zwz.guli.common.base.result 中创建类 R.java</p>
<h5 id="3、修改Controller中的返回结果"><a href="#3、修改Controller中的返回结果" class="headerlink" title="3、修改Controller中的返回结果"></a>3、修改Controller中的返回结果</h5><p>修改service_edu的TeacherController</p>
<p>查询列表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"list"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">listAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;Teacher&gt; list = teacherService.list();</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"items"</span>, list).message(<span class="string">"获取讲师列表成功"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"remove/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">removeById</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> result = teacherService.removeById(id);</span><br><span class="line">    <span class="keyword">if</span>(result)&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().message(<span class="string">"删除成功"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">"数据不存在"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="一、分页"><a href="#一、分页" class="headerlink" title="一、分页"></a>一、分页</h3><h4 id="分页Controller方法"><a href="#分页Controller方法" class="headerlink" title="分页Controller方法"></a>分页Controller方法</h4><p>TeacherController中添加分页方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@ApiOperation(value &#x3D; &quot;讲师分页列表&quot;)</span><br><span class="line">@GetMapping(&quot;&#x2F;list&#x2F;&#123;page&#125;&#x2F;&#123;limit&#125;&quot;)</span><br><span class="line">public R listPage(@ApiParam(value &#x3D; &quot;当前页码&quot;,required &#x3D; true) @PathVariable Long page,</span><br><span class="line">        @ApiParam(value &#x3D; &quot;每页的记录数&quot;,required &#x3D; true) @PathVariable Long limit,</span><br><span class="line">        @ApiParam(&quot;查询对象&quot;) TeacherQueryVo teacherQueryVo) &#123;</span><br><span class="line">    Page&lt;Teacher&gt; pageParam &#x3D; new Page&lt;&gt;(page, limit);</span><br><span class="line">    IPage&lt;Teacher&gt; pageModel &#x3D; teacherService.selectPage(pageParam, teacherQueryVo);</span><br><span class="line">    List&lt;Teacher&gt; records &#x3D; pageModel.getRecords();</span><br><span class="line">    long total &#x3D; pageModel.getTotal();</span><br><span class="line">    return R.ok().data(&quot;total&quot;,total).data(&quot;rows&quot;,records);       &#x2F;&#x2F;前端需要total和rows作为	数据对象</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="二、条件查询"><a href="#二、条件查询" class="headerlink" title="二、条件查询"></a>二、条件查询</h3><p>根据讲师名称name，讲师头衔level、讲师入驻时间查询</p>
<p>创建包：com.zwz.guli.service.edu.entity.vo</p>
<p>创建类：TeacherQueryVo</p>
<ul>
<li>VO层</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.entity.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/9 11:39</span></span><br><span class="line"><span class="comment"> * 对TeacherController返回值进行封装</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ApiModel</span>(<span class="string">"Teacher查询对象"</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherQueryVo</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"讲师姓名"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"讲师级别"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer level;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"开始时间"</span>)</span><br><span class="line">    <span class="keyword">private</span> String joinDateBegin;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"结束时间"</span>)</span><br><span class="line">    <span class="keyword">private</span> String joinDateEnd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>service层接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.TeacherQueryVo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 讲师 服务类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TeacherService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">Teacher</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">IPage&lt;Teacher&gt; <span class="title">selectPage</span><span class="params">(Page&lt;Teacher&gt; pageParam, TeacherQueryVo teacherQueryVo)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>service层实现</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.TeacherQueryVo;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.mapper.TeacherMapper;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.service.TeacherService;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 讲师 服务实现类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">TeacherMapper</span>, <span class="title">Teacher</span>&gt; <span class="keyword">implements</span> <span class="title">TeacherService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IPage&lt;Teacher&gt; <span class="title">selectPage</span><span class="params">(Page&lt;Teacher&gt; pageParam, TeacherQueryVo teacherQueryVo)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//列表显示分页查询列表</span></span><br><span class="line">        <span class="comment">//1.排序：按照sort字段排序(数据库里面有排序字段)</span></span><br><span class="line">        QueryWrapper&lt;Teacher&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        queryWrapper.orderByAsc(<span class="string">"sort"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.分页查询</span></span><br><span class="line">        <span class="keyword">if</span> (teacherQueryVo == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> baseMapper.selectPage(pageParam,queryWrapper);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.根据条件进行查询</span></span><br><span class="line">        String name = teacherQueryVo.getName();</span><br><span class="line">        String joinDateBegin = teacherQueryVo.getJoinDateBegin();</span><br><span class="line">        Integer level = teacherQueryVo.getLevel();</span><br><span class="line">        String joinDateEnd = teacherQueryVo.getJoinDateEnd();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNoneEmpty(name))&#123;</span><br><span class="line">            queryWrapper.likeRight(<span class="string">"name"</span>,name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (level!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            queryWrapper.eq(<span class="string">"level"</span>,level);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(joinDateBegin))&#123;</span><br><span class="line">            queryWrapper.ge(<span class="string">"join_date"</span>,joinDateBegin);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(joinDateEnd))&#123;</span><br><span class="line">            queryWrapper.le(<span class="string">"join_date"</span>,joinDateEnd);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> baseMapper.selectPage(pageParam,queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>controller</li>
</ul>
<p>TeacherController中修改 index方法：</p>
<p>增加参数TeacherQueryVo teacherQueryVo，非必选</p>
<p>teacherService.page 修改成 teacherService.selectPage，并传递teacherQueryVo参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页</span></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"讲师分页列表"</span>)</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/list/&#123;page&#125;/&#123;limit&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">listPage</span><span class="params">(@ApiParam(value = <span class="string">"当前页码"</span>,required = <span class="keyword">true</span>)</span> @PathVariable Long page,</span></span><br><span class="line"><span class="function">                      @<span class="title">ApiParam</span><span class="params">(value = <span class="string">"每页的记录数"</span>,required = <span class="keyword">true</span>)</span> @PathVariable Long limit,</span></span><br><span class="line"><span class="function">                      @<span class="title">ApiParam</span><span class="params">(<span class="string">"查询对象"</span>)</span> TeacherQueryVo teacherQueryVo) </span>&#123;</span><br><span class="line">        Page&lt;Teacher&gt; pageParam = <span class="keyword">new</span> Page&lt;&gt;(page, limit);</span><br><span class="line">        IPage&lt;Teacher&gt; pageModel = teacherService.selectPage(pageParam, teacherQueryVo);</span><br><span class="line">        List&lt;Teacher&gt; records = pageModel.getRecords();</span><br><span class="line">        <span class="keyword">long</span> total = pageModel.getTotal();</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"total"</span>,total).data(<span class="string">"rows"</span>,records);       <span class="comment">//前端需要total和rows作为数据对象</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="三、新增和修改"><a href="#三、新增和修改" class="headerlink" title="三、新增和修改"></a>三、新增和修改</h3><h4 id="一、自动填充"><a href="#一、自动填充" class="headerlink" title="一、自动填充"></a>一、自动填充</h4><p>service_base中</p>
<p>创建包：com.zwz.guli.service.base.handler</p>
<p>创建自动填充处理类：CommonMetaObjectHandler </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.base.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//System.out.println("when insert fill");</span></span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"gmtCreate"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"gmtModified"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//System.out.println("when update fill");</span></span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"gmtModified"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、定义API"><a href="#二、定义API" class="headerlink" title="二、定义API"></a>二、定义API</h4><p>service_edu中新增controller方法</p>
<h5 id="1、新增"><a href="#1、新增" class="headerlink" title="1、新增"></a>1、新增</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"新增讲师"</span>)</span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"save"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">save</span><span class="params">(@ApiParam(<span class="string">"讲师对象"</span>)</span> @RequestBody Teacher teacher)</span>&#123;</span><br><span class="line">     teacherService.save(teacher);</span><br><span class="line">     <span class="keyword">return</span> R.ok().message(<span class="string">"保存成功"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2、根据id修改"><a href="#2、根据id修改" class="headerlink" title="2、根据id修改"></a>2、根据id修改</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"更新讲师"</span>)</span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">update</span><span class="params">(@ApiParam(<span class="string">"讲师对象"</span>)</span> @RequestBody Teacher teacher)</span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> result = teacherService.updateById(teacher);</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().message(<span class="string">"更新成功"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">"更新失败"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="3、根据id获取讲师数据"><a href="#3、根据id获取讲师数据" class="headerlink" title="3、根据id获取讲师数据"></a>3、根据id获取讲师数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@ApiOperation(&quot;根据id回显讲师&quot;)</span><br><span class="line">    @GetMapping(&quot;&#x2F;get&#x2F;&#123;id&#125;&quot;)</span><br><span class="line">    public R getById(@ApiParam(&quot;讲师对象&quot;) @PathVariable String id)&#123;</span><br><span class="line">        Teacher teacher &#x3D; teacherService.getById(id);</span><br><span class="line">        if ((teacher !&#x3D; null)) &#123;</span><br><span class="line">            return R.ok().data(&quot;item&quot;,teacher);</span><br><span class="line">        &#125;else</span><br><span class="line">          return R.error().message(&quot;数据保存在&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="四、统一异常处理"><a href="#四、统一异常处理" class="headerlink" title="四、统一异常处理"></a>四、统一异常处理</h3><h4 id="1、创建统一异常处理器"><a href="#1、创建统一异常处理器" class="headerlink" title="1、创建统一异常处理器"></a>1、创建统一异常处理器</h4><p>service-base中handler包中，</p>
<p>创建统一异常处理类：GlobalExceptionHandler.java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.base.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.R;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.ResultCodeEnum;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.util.ExceptionUtils;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.converter.HttpMessageNotReadableException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.BadSqlGrammarException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/9 15:35</span></span><br><span class="line"><span class="comment"> * 统一异常处理器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandle</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseBody</span></span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">R</span> <span class="title">error</span>(<span class="title">Exception</span> <span class="title">e</span>)</span>&#123;</span><br><span class="line"><span class="comment">//        e.printStackTrace();</span></span><br><span class="line">        log.error(ExceptionUtils.getMessage(e));        <span class="comment">//使用自定义的ExceptionUtils类来规范错误信息 (该类百度即可)</span></span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//BadSqlGrammarException</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(BadSqlGrammarException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseBody</span></span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">R</span> <span class="title">error</span>(<span class="title">BadSqlGrammarException</span> <span class="title">e</span>)</span>&#123;</span><br><span class="line"><span class="comment">//        e.printStackTrace();</span></span><br><span class="line">        log.error(ExceptionUtils.getMessage(e));</span><br><span class="line">        <span class="keyword">return</span> R.setResult(ResultCodeEnum.BAD_SQL_GRAMMAR);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//HttpMessageNotReadableException</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(HttpMessageNotReadableException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseBody</span></span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">R</span> <span class="title">error</span>(<span class="title">HttpMessageNotReadableException</span> <span class="title">e</span>)</span>&#123;</span><br><span class="line"><span class="comment">//        e.printStackTrace();</span></span><br><span class="line">        log.error(ExceptionUtils.getMessage(e));</span><br><span class="line">        <span class="keyword">return</span> R.setResult(ResultCodeEnum.JSON_PARSE_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="一、统一日志管理"><a href="#一、统一日志管理" class="headerlink" title="一、统一日志管理"></a>一、统一日志管理</h3><h4 id="1、什么是日志"><a href="#1、什么是日志" class="headerlink" title="1、什么是日志"></a>1、什么是日志</h4><p>通过日志查看程序的运行过程，运行信息，异常信息等</p>
<h4 id="2、配置日志级别"><a href="#2、配置日志级别" class="headerlink" title="2、配置日志级别"></a>2、配置日志级别</h4><p>日志记录器（Logger）的行为是分等级的。如下表所示：</p>
<p>分为：FATAL、ERROR、WARN、INFO、DEBUG</p>
<p>默认情况下，spring boot从控制台打印出来的日志级别只有INFO及以上级别，可以配置日志级别</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置日志级别</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">ERROR</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这种方式能将ERROR级别以及以上级别的日志打印在控制台上</p>
</blockquote>
<h4 id="二、Logback日志"><a href="#二、Logback日志" class="headerlink" title="二、Logback日志"></a>二、Logback日志</h4><p>spring boot内部使用Logback作为日志实现的框架。</p>
<p>Logback和log4j非常相似，如果你对log4j很熟悉，那对logback很快就会得心应手。</p>
<p>logback相对于log4j的一些优点：<a href="https://blog.csdn.net/caisini_vc/article/details/48551287" target="_blank" rel="noopener">https://blog.csdn.net/caisini_vc/article/details/48551287</a></p>
<h5 id="1、配置logback日志"><a href="#1、配置logback日志" class="headerlink" title="1、配置logback日志"></a>1、配置logback日志</h5><p><strong>删除application.yml中的日志配置</strong></p>
<p><strong>安装idea彩色日志插件：grep console</strong></p>
<p>resources 中创建 logback-spring.xml （默认日志的名字，必须是这个名字）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>  <span class="attr">scan</span>=<span class="string">"true"</span> <span class="attr">scanPeriod</span>=<span class="string">"10 seconds"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>logback<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"log.path"</span> <span class="attr">value</span>=<span class="string">"E:/Education_Project/log/guli_log/edu"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--控制台日志格式：彩色日志--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- magenta:洋红 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- boldMagenta:粗红--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- cyan:青色 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- white:白色 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- magenta:洋红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"CONSOLE_LOG_PATTERN"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">"%yellow(%date&#123;yyyy-MM-dd HH:mm:ss&#125;) |%highlight(%-5level) |%blue(%thread) |%blue(%file:%line) |%green(%logger) |%cyan(%msg%n)"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--文件日志格式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"FILE_LOG_PATTERN"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">"%date&#123;yyyy-MM-dd HH:mm:ss&#125; |%-5level |%thread |%file:%line |%logger |%msg%n"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--编码--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ENCODING"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--输出到控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"CONSOLE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.ThresholdFilter"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志级别--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志格式--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志字符集--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>$&#123;ENCODING&#125;<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--输出到文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"INFO_FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志过滤器：此日志文件只记录INFO级别的--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_info.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>$&#123;ENCODING&#125;<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 每天日志归档路径以及格式 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/info/log-info-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>500MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"WARN_FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志过滤器：此日志文件只记录WARN级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>WARN<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_warn.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>$&#123;ENCODING&#125;<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 此处设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/warn/log-warn-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"ERROR_FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志过滤器：此日志文件只记录ERROR级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_error.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>$&#123;ENCODING&#125;<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 此处设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/error/log-error-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--开发环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--可以灵活设置此处，从而控制日志的输出--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"INFO_FILE"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"WARN_FILE"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--生产环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"pro"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"ERROR"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2、节点说明"><a href="#2、节点说明" class="headerlink" title="2、节点说明"></a>2、节点说明</h5><ul>
<li><p><property>：定义变量</p>
</li>
<li><p><appender>：定义日志记录器</p>
</li>
<li><ul>
<li><filter>：定义日志过滤器</li>
<li><rollingPolicy>：定义滚动策略</li>
</ul>
</li>
<li><p><springProfile>：定义日志适配的环境</p>
</li>
<li><ul>
<li><root>：根日志记录器</li>
</ul>
</li>
</ul>
<h5 id="3、控制日志级别"><a href="#3、控制日志级别" class="headerlink" title="3、控制日志级别"></a>3、控制日志级别</h5><p>通过在开发环境设置以下<root>节点的 level 属性的值，调节日志的级别</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开发环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--可以灵活设置此处，从而控制日志的输出--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"INFO_FILE"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"WARN_FILE"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--生产环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"pro"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"ERROR"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR_FILE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="三、错误日志处理"><a href="#三、错误日志处理" class="headerlink" title="三、错误日志处理"></a>三、错误日志处理</h4><h5 id="1、用日志记录器记录错误日志"><a href="#1、用日志记录器记录错误日志" class="headerlink" title="1、用日志记录器记录错误日志"></a>1、用日志记录器记录错误日志</h5><p>GlobalExceptionHandler.java 中</p>
<p>类上添加注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br></pre></td></tr></table></figure>

<p>修改异常输出语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//e.printStackTrace();</span></span><br><span class="line">log.error(e.getMessage());</span><br></pre></td></tr></table></figure>

<h5 id="2、输出日志堆栈信息"><a href="#2、输出日志堆栈信息" class="headerlink" title="2、输出日志堆栈信息"></a>2、输出日志堆栈信息</h5><p><strong>为了保证日志的堆栈信息能够被输出，我们需要定义工具类</strong></p>
<p>common_util中创建ExceptionUtil.java工具类</p>
<p>修改异常输出语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//e.printStackTrace();</span></span><br><span class="line"><span class="comment">//log.error(e.getMessage());</span></span><br><span class="line">log.error(ExceptionUtils.getMessage(e));</span><br></pre></td></tr></table></figure>

<h2 id="day3"><a href="#day3" class="headerlink" title="day3"></a>day3</h2><h4 id="一、Node-js的概念"><a href="#一、Node-js的概念" class="headerlink" title="一、Node.js的概念"></a>一、Node.js的概念</h4><h5 id="1、JavaScript引擎"><a href="#1、JavaScript引擎" class="headerlink" title="1、JavaScript引擎"></a>1、JavaScript引擎</h5><p>浏览器的内核包括两部分核心：</p>
<ul>
<li><p>DOM渲染引擎</p>
</li>
<li><p>JavaScript解析引擎</p>
</li>
<li><p>Chrome浏览器内置V8引擎，V8引擎执行Javascript的速度非常快，性能非常好。</p>
</li>
</ul>
<h5 id="2、什么是Node-js"><a href="#2、什么是Node-js" class="headerlink" title="2、什么是Node.js"></a>2、什么是Node.js</h5><p>脱离浏览器环境也可以运行JavaScript，只要有JavaScript引擎就可以。</p>
<p>Node.js是一个基于Chrome V8引擎的JavaScript运行环境：即Node.js内置了Chrome的V8 引擎，可以在Node.js环境中直接运行JavaScript程序。</p>
<ul>
<li><p>在Node.js中写JavaScript和在Chrome浏览器中写JavaScript<strong>基本</strong>没有什么不一样。哪里不一样呢？</p>
<ul>
<li>Node.js没有浏览器API，即document，window的等。</li>
<li>加了许多Node.js 专属API，例如文件系统，进程，http功能。</li>
</ul>
</li>
</ul>
<h5 id="3、Node-js有什么用"><a href="#3、Node-js有什么用" class="headerlink" title="3、Node.js有什么用"></a>3、Node.js有什么用</h5><ul>
<li><p>如果你想开发类似JavaWeb的简单的后端程序，那么学习Node.js是一个非常好的选择。</p>
</li>
<li><p>如果你想部署一些高性能的服务，那么学习Node.js也是一个非常好的选择。</p>
</li>
<li><p>通常他会被用来作一个BFF层，即 Backend For Frontend（服务于前端的后端），通俗的说是一个专门用于为前端业务提供数据的后端程序</p>
</li>
</ul>
<h4 id="二、BFF-用户体验适配器"><a href="#二、BFF-用户体验适配器" class="headerlink" title="二、BFF (用户体验适配器)"></a>二、BFF (用户体验适配器)</h4><h5 id="1、BFF-解决什么问题"><a href="#1、BFF-解决什么问题" class="headerlink" title="1、BFF 解决什么问题"></a>1、BFF 解决什么问题</h5><p>一个前端页面向 Service A、Service B 以及 Service C发送请求，不同的微服务返回的值用于渲染页面中不同的组件。此时，每次访问该页面都需要发送 3 个请求。我们需要一个服务来聚合Service A、Service B 以及 Service C响应的数据，这个服务层叫做BFF。</p>
<p><a href="https://imgse.com/i/pSnrxXj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/11/pSnrxXj.png" alt="pSnrxXj.png"></a></p>
<p>手机、平板端、PC机等用户终端都需要向每个Service，例如Service A发送请求。对于同一个功能，不同的终端需要的数据格式和内容会有不同。此时 Service A<br>的一个接口，不能同时满足三个客户端的不同需求。我们可以在Service A中开发三个接口，也可以增加一个数据裁剪服务，将数据按照不同终端的不同要求进行裁剪，这个服务层叫做BFF。</p>
<p><a href="https://imgse.com/i/pSn677R" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/11/pSn677R.png" alt="pSn677R.png"></a></p>
<h4 id="三、安装"><a href="#三、安装" class="headerlink" title="三、安装"></a>三、安装</h4><h5 id="1、下载"><a href="#1、下载" class="headerlink" title="1、下载"></a>1、下载</h5><p>官网：<a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a> </p>
<p>中文网：<a href="http://nodejs.cn/" target="_blank" rel="noopener">http://nodejs.cn/</a> </p>
<p>LTS：长期支持版本</p>
<p>Current：最新版</p>
<h5 id="2、安装"><a href="#2、安装" class="headerlink" title="2、安装"></a>2、安装</h5><h5 id="3、查看版本"><a href="#3、查看版本" class="headerlink" title="3、查看版本"></a>3、查看版本</h5><p>打开cmd控制台，然后node -v</p>
<h4 id="四、ECMAScript-6"><a href="#四、ECMAScript-6" class="headerlink" title="四、ECMAScript 6"></a><strong>四、ECMAScript 6</strong></h4><h5 id="1、什么是-ECMAScript-6"><a href="#1、什么是-ECMAScript-6" class="headerlink" title="1、什么是 ECMAScript 6"></a>1、什么是 ECMAScript 6</h5><p>ECMAScript 6.0（简称 ES6）是 JavaScript 语言的下一代标准， 2015 年 6 月正式发布。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。</p>
<h5 id="2、ECMAScript-和-JavaScript-的关系"><a href="#2、ECMAScript-和-JavaScript-的关系" class="headerlink" title="2、ECMAScript 和 JavaScript 的关系"></a>2、ECMAScript 和 JavaScript 的关系</h5><p>一个常见的问题是，ECMAScript 和 JavaScript 到底是什么关系？</p>
<p>要讲清楚这个问题，需要回顾历史。1996  年 11 月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给标准化组织  ECMA，希望这种语言能够成为国际标准。次年，ECMA 发布 262  号标准文件（ECMA-262）的第一版，规定了浏览器脚本语言的标准，并将这种语言称为 ECMAScript，这个版本就是 1.0 版。</p>
<p>因此，ECMAScript 和 JavaScript 的关系是，前者是后者的规格，后者是前者的一种实现（另外的 ECMAScript 方言还有 Jscript 和 ActionScript）</p>
<h5 id="ES6基本语法"><a href="#ES6基本语法" class="headerlink" title="ES6基本语法"></a>ES6基本语法</h5><p>ES6相对之前的版本语法更严格，新增了面向对象的很多特性以及一些高级特性。本部分只学习项目开发中涉及到ES6的最少必要知识，方便项目开发中对代码的理解</p>
<h6 id="1、let声明变量"><a href="#1、let声明变量" class="headerlink" title="1、let声明变量"></a>1、let声明变量</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var 声明的变量没有局部作用域</span></span><br><span class="line"><span class="comment">// let 声明的变量  有局部作用域</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a)  <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(b)  <span class="comment">// ReferenceError: b is not defined</span></span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var 可以声明多次</span></span><br><span class="line"><span class="comment">// let 只能声明一次</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">4</span>  <span class="comment">// Identifier 'n' has already been declared</span></span><br><span class="line"><span class="built_in">console</span>.log(m)  <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(n)</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var 会变量提升</span></span><br><span class="line"><span class="comment">// let 不存在变量提升</span></span><br><span class="line"><span class="built_in">console</span>.log(x)  <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="string">'apple'</span></span><br><span class="line"><span class="built_in">console</span>.log(y)  <span class="comment">//ReferenceError: y is not defined</span></span><br><span class="line"><span class="keyword">let</span> y = <span class="string">'banana'</span></span><br></pre></td></tr></table></figure>

<h6 id="2、const声明常量（只读变量）"><a href="#2、const声明常量（只读变量）" class="headerlink" title="2、const声明常量（只读变量）"></a><strong>2、const声明常量（只读变量）</strong></h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、声明之后不允许改变    </span></span><br><span class="line"><span class="keyword">const</span> PI = <span class="string">'3.1415926'</span></span><br><span class="line">PI = <span class="number">3</span>  <span class="comment">// TypeError: Assignment to constant variable.</span></span><br><span class="line"><span class="comment">// 2、一但声明必须初始化，否则会报错</span></span><br><span class="line"><span class="keyword">const</span> MY_AGE  <span class="comment">// SyntaxError: Missing initializer in const declaration</span></span><br></pre></td></tr></table></figure>



<h6 id="3、解构赋值"><a href="#3、解构赋值" class="headerlink" title="3、解构赋值"></a>3、解构赋值</h6><p>创建 03-解构赋值-数组解构.js</p>
<p>解构赋值是对赋值运算符的扩展。</p>
<p>他是一种针对数组或者对象进行模式匹配，然后对其中的变量进行赋值。</p>
<p>在代码书写上简洁且易读，语义更加清晰明了；也方便了复杂对象中数据字段获取</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、数组解构</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">let</span> a = arr[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">let</span> b = arr[<span class="number">1</span>]</span><br><span class="line"><span class="keyword">let</span> c = arr[<span class="number">2</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> [x, y, z] = arr</span><br><span class="line"><span class="built_in">console</span>.log(x, y, z)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、对象解构</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;<span class="attr">name</span>: <span class="string">'Helen'</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">let</span> name1 = user.name</span><br><span class="line"><span class="keyword">let</span> age1 = user.age</span><br><span class="line"><span class="built_in">console</span>.log(name1, age1)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, age &#125; =  user<span class="comment">//注意：解构的变量必须和user中的属性同名</span></span><br><span class="line"><span class="built_in">console</span>.log(name, age)</span><br></pre></td></tr></table></figure>

<h6 id="4、模板字符串"><a href="#4、模板字符串" class="headerlink" title="4、模板字符串"></a><strong>4、模板字符串</strong></h6><p>创建 04-模板字符串.js</p>
<p>模板字符串相当于加强版的字符串，用反引号 `，除了作为普通字符串，还可以用来定义多行字符串，还可以在字符串中加入变量和表达式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串插入变量和表达式。变量名写在 $&#123;&#125; 中，$&#123;&#125; 中可以放入 JavaScript 表达式。</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'Mike'</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">27</span></span><br><span class="line"><span class="keyword">let</span> info = <span class="string">`My Name is <span class="subst">$&#123;name&#125;</span>,I am <span class="subst">$&#123;age+<span class="number">1</span>&#125;</span> years old next year.`</span></span><br><span class="line"><span class="built_in">console</span>.log(info)</span><br><span class="line"><span class="comment">// My Name is Mike,I am 28 years old next year.</span></span><br><span class="line"><span class="comment">//原样输出</span></span><br><span class="line"><span class="keyword">let</span> fun = <span class="string">`function()&#123;</span></span><br><span class="line"><span class="string">  console.log('hello')</span></span><br><span class="line"><span class="string">&#125;`</span></span><br><span class="line"><span class="built_in">console</span>.log(fun)</span><br></pre></td></tr></table></figure>

<h6 id="5、声明对象简写"><a href="#5、声明对象简写" class="headerlink" title="5、声明对象简写"></a><strong>5、声明对象简写</strong></h6><p>创建 05-声明对象简写.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="number">12</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'Amy'</span></span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">let</span> person1 = &#123;</span><br><span class="line">    age: age, </span><br><span class="line">    name: name</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(person1)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> person2 = &#123;</span><br><span class="line">    age, </span><br><span class="line">    name</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(person2) <span class="comment">//&#123;age: 12, name: 'Amy'&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="6、箭头函数"><a href="#6、箭头函数" class="headerlink" title="6、箭头函数"></a>6、箭头函数</h6><p>箭头函数提供了一种更加简洁的函数书写方式。基本语法是：<code>参数 =&gt; 函数体``箭头函数多用于匿名函数的定义</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">"10"</span>, <span class="string">"5"</span>, <span class="string">"40"</span>, <span class="string">"25"</span>, <span class="string">"1000"</span>]</span><br><span class="line">arr.sort()</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br><span class="line"><span class="comment">//上面的代码没有按照数值的大小对数字进行排序，</span></span><br><span class="line"><span class="comment">//要实现这一点，就必须使用一个排序函数</span></span><br><span class="line"><span class="comment">//若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。</span></span><br><span class="line"><span class="comment">//若 a 等于 b，则返回 0。</span></span><br><span class="line"><span class="comment">//若 a 大于 b，则返回一个大于 0 的值。</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用箭头函数</span></span><br><span class="line">arr2 = arr.sort(<span class="function">(<span class="params">a,b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当只有一行语句，并且需要返回结果时，可以省略 &#123;&#125; , 结果会自动返回。</span></span><br><span class="line"><span class="comment">//当只有一个参数时，可以不使用圆括号</span></span><br><span class="line">arr2 = arr.sort(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a - b)</span><br></pre></td></tr></table></figure>

<h4 id="五、Vue"><a href="#五、Vue" class="headerlink" title="五、Vue"></a>五、Vue</h4><h5 id="1、Vue-js-是什么"><a href="#1、Vue-js-是什么" class="headerlink" title="1、Vue.js 是什么"></a>1、Vue.js 是什么</h5><p>在为  AngularJS 工作之后，Vue 的作者尤雨溪开发出了这一框架。他声称自己的思路是提取 Angular  中为自己所喜欢的部分，构建出一款相当轻量的框架。Vue 最早发布于 2014 年 2 月。作者在 Hacker News、Echo JS 与  Reddit 的 javascript 版块发布了最早的版本。一天之内，Vue 就登上了这三个网站的首页。Vue 是 Github  上最受欢迎的开源项目之一。同时，在 JavaScript 框架/函数库中，Vue 所获得的星标数已超过 React，并高于  Backbone.js、Angular 2、jQuery 等项目。</p>
<p>Vue.js 是一款流行的 JavaScript 前端框架，目的是简化 Web 开发。Vue 所关注的核心是 MVC 模式中的视图层，同时，它也能方便地获取数据更新，实现视图与模型的交互。</p>
<p>官方网站：<a href="https://cn.vuejs.org" target="_blank" rel="noopener">https://cn.vuejs.org</a></p>
<h5 id="2、初识Vue-js"><a href="#2、初识Vue-js" class="headerlink" title="2、初识Vue.js"></a>2、初识Vue.js</h5><p>创建文件夹vue_pro</p>
<p>创建文件夹vuejs，将vue.min.js引入文件夹</p>
<p>创建 hello.html</p>
<p><img src="C:%5CUsers%5CZWZ%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1673444529590.png" alt="1673444529590"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 插值表达式，声明式渲染，绑定data中的数据 --&gt;</span></span><br><span class="line">        &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//数据模型定义</span></span></span><br><span class="line">            data: &#123;</span><br><span class="line"><span class="actionscript">                message: <span class="string">'hello'</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>这就是声明式渲染</strong>：Vue.js 的核心是一个允许采用简洁的模板语法来声明式地将数据渲染进 DOM 的系统</p>
<p>这里的核心思想就是没有繁琐的DOM操作，例如jQuery中，我们需要先找到div节点，获取到DOM对象，然后进行一系列的节点操作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    message: <span class="string">'Hello Vue!'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同理可以写成下面这样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        message: <span class="string">'Hello Vue!'</span></span><br><span class="line">   	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="二、基本语法"><a href="#二、基本语法" class="headerlink" title="二、基本语法"></a>二、基本语法</h5><h6 id="1、基本数据渲染和指令"><a href="#1、基本数据渲染和指令" class="headerlink" title="1、基本数据渲染和指令"></a>1、基本数据渲染和指令</h6><p>创建 01-基本数据渲染和指令.html</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">        &lt;!-- 指令：v-xxx v-bind 数据绑定指令 --&gt;</span><br><span class="line">        &lt;h1 v-bind:title=<span class="string">"name"</span>&gt;&#123;&#123;name&#125;&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;!-- 简写 --&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h1 :title="name"&gt;&#123;&#123;name&#125;&#125;&lt;/</span>h1&gt;</span><br><span class="line">        &#123;&#123;name&#125;&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script src="vue.min.js"&gt;&lt;/</span>script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">            el: <span class="string">'#app'</span>,</span><br><span class="line">            data:&#123;</span><br><span class="line">                name:<span class="string">'zwz'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>v-bind 特性被称为指令。指令带有前缀 v-</p>
<p>除了使用插值表达式{ { } }进行数据渲染，也可以使用 v-bind指令，它的简写的形式就是一个冒号（:）</p>
</blockquote>
<p>2、双向数据绑定</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"keyword"</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 双向绑定 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model:value</span>=<span class="string">"keyword"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>您要查询的是：&#123;&#123;keyword&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el: <span class="string">'#app'</span>,</span></span><br><span class="line">            data:&#123;</span><br><span class="line"><span class="actionscript">                keyword:<span class="string">'zwz'</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">     <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="3、事件"><a href="#3、事件" class="headerlink" title="3、事件"></a>3、事件</h6><p>创建 03-事件.html</p>
<p>使用 v-on 进行数件处理，v-on:click 表示处理鼠标点击事件，事件调用的方法定义在 vue 对象声明的 methods 节点中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">        &lt;!-- 时间指令：v-on --&gt;</span><br><span class="line">        &lt;button v-on:click&#x3D;&quot;show()&quot;&gt;v-on查询&lt;&#x2F;button&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 简便方法 --&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;show()&quot;&gt;简便@查询&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;vue.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        new Vue(&#123;</span><br><span class="line">            el: &#39;#app&#39;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                show()&#123;</span><br><span class="line">                    alert(&#39;hello&#39;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure>

<h6 id="4、修饰符"><a href="#4、修饰符" class="headerlink" title="4、修饰符"></a>4、修饰符</h6><p>创建 04-修饰符.html</p>
<p>修饰符是以半角句号（.）指明的特殊后缀，用于指出一个指令应该以特殊方式绑定。</p>
<p>例如，这里的 .prevent 修饰符告诉 v-on 指令：阻止表单默认的提交行为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;!-- 修饰符用于指出一个指令应该以特殊方式绑定。</span><br><span class="line">    这里的 .prevent 修饰符告诉 v-on 指令：阻止表单默认的提交行为 --&gt;</span><br><span class="line">    &lt;form action&#x3D;&quot;save&quot; v-on:submit.prevent&#x3D;&quot;check()&quot;&gt;</span><br><span class="line">        姓名：&lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;user.username&quot;&gt;</span><br><span class="line">        &lt;button type&#x3D;&quot;submit&quot;&gt;保存&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;vue.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    new Vue(&#123;</span><br><span class="line">        el: &#39;#app&#39;,</span><br><span class="line">        data () &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                user:&#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            check()&#123;</span><br><span class="line">                console.log(&quot;校验用户名是否输入&quot;)</span><br><span class="line">                console.log(this.user)</span><br><span class="line">                if(!this.user.name)&#123;</span><br><span class="line">                    alert(&#39;请输入用户名&#39;)</span><br><span class="line">                    return</span><br><span class="line">                &#125;</span><br><span class="line">                console.log(&quot;提交表单&quot;);</span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h6 id="5、条件渲染"><a href="#5、条件渲染" class="headerlink" title="5、条件渲染"></a>5、条件渲染</h6><p>创建 05-条件渲染.html</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;checkbox&quot; v-model&#x3D;&quot;ok&quot;&gt;同意许可协议</span><br><span class="line">    &lt;!-- v-if是对dom进行修改 --&gt;</span><br><span class="line">    &lt;!-- 初始化开销小：渲染所需节点，切换开销大：切换时需要创建和删除节点 --&gt;</span><br><span class="line">    &lt;h1 v-if&#x3D;&quot;ok&quot; &gt; 协议内容：...&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;h2 v-else&gt;不显示&lt;&#x2F;h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 初始化开销大：渲染所有节点 切换开销小：切换时只需要修改节点的显示属性--&gt;</span><br><span class="line">    &lt;h3 v-show&#x3D;&quot;ok&quot;&gt;显示&lt;&#x2F;h3&gt;</span><br><span class="line">    &lt;h3 v-show&#x3D;&quot;!ok&quot;&gt;不显示&lt;&#x2F;h3&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;vue.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    new Vue(&#123;</span><br><span class="line">        el: &#39;#app&#39;,</span><br><span class="line">            data () &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                ok:false</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h6 id="6、列表渲染"><a href="#6、列表渲染" class="headerlink" title="6、列表渲染"></a>6、列表渲染</h6><p>创建 06-列表渲染.html</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr v-for&#x3D;&quot;item in userList&quot;&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.username&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.age&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;&#x2F;tr&gt;</span><br><span class="line">        &lt;&#x2F;table&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;vue.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        new Vue(&#123;</span><br><span class="line">            el: &#39;#app&#39;,</span><br><span class="line">            data () &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    userList:[</span><br><span class="line">                        &#123;username:&#39;zwz&#39;,age:18&#125;,</span><br><span class="line">                        &#123;username:&#39;hhh&#39;,age:28&#125;,</span><br><span class="line">                    ]       </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;     </span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure>

<h6 id="7、实例生命周期"><a href="#7、实例生命周期" class="headerlink" title="7、实例生命周期"></a>7、实例生命周期</h6><p>创建 07-vue实例的生命周期.html</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">        &lt;h1 id&#x3D;&quot;h1&quot;&gt;&#123;&#123;message&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;vue.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        new Vue(&#123;</span><br><span class="line">            el: &#39;#app&#39;,</span><br><span class="line">            data () &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    message:&#39;啦啦啦啦啦啦&#39;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                show()&#123;</span><br><span class="line">                    console.log(&#39;show被调用&#39;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;&#x2F;页面创建成功：vue对象的变量和方法就已经初始化成功 (创建成功还没有显示出来)</span><br><span class="line">            created () &#123;</span><br><span class="line">                console.log(&#39;created被调用&#39;);   &#x2F;&#x2F;先被调用</span><br><span class="line">                let h1 &#x3D; document.getElementById(&#39;h1&#39;)</span><br><span class="line">                console.log(&#39;h1的内容是：&#39;+h1.innerText);</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F;页面渲染成功 (创建成功并显示出来)</span><br><span class="line">            mounted () &#123;</span><br><span class="line">                console.log(&#39;mounted被调用&#39;);   &#x2F;&#x2F;后被调用</span><br><span class="line">                let h1 &#x3D; document.getElementById(&#39;h1&#39;)</span><br><span class="line">                console.log(h1.innerText);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure>

<h4 id="六、axios"><a href="#六、axios" class="headerlink" title="六、axios"></a>六、axios</h4><p>axios是独立于vue的一个项目，可以用于浏览器和node.js中发送ajax请求</p>
<h5 id="1、复制js资源"><a href="#1、复制js资源" class="headerlink" title="1、复制js资源"></a>1、复制js资源</h5><p>vue.min.js</p>
<p>axios.min.js</p>
<h5 id="2、创建-axios-html"><a href="#2、创建-axios-html" class="headerlink" title="2、创建 axios.html"></a>2、创建 axios.html</h5><h5 id="3、引入js"><a href="#3、引入js" class="headerlink" title="3、引入js"></a>3、引入js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;vue.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;axios.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4、启动课程中心微服务"><a href="#4、启动课程中心微服务" class="headerlink" title="4、启动课程中心微服务"></a>4、启动课程中心微服务</h5><h5 id="5、编写js"><a href="#5、编写js" class="headerlink" title="5、编写js"></a>5、编写js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    new Vue(&#123;</span><br><span class="line">        el: &#39;#app&#39;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            teacherList: []</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            getTeacherList()&#123;</span><br><span class="line">                axios.get(&#39;http:&#x2F;&#x2F;localhost:8110&#x2F;admin&#x2F;edu&#x2F;teacher&#x2F;list&#39;).then(res &#x3D;&gt; &#123;</span><br><span class="line">                    console.log(response)</span><br><span class="line">                    this.teacherList &#x3D; response.data.data.items</span><br><span class="line">                &#125;).catch(error&#x3D;&gt;&#123;</span><br><span class="line">                    &#x2F;&#x2F;失败</span><br><span class="line">                    console.log(error)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="6、html渲染数据"><a href="#6、html渲染数据" class="headerlink" title="6、html渲染数据"></a>6、html渲染数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;getTeacherList()&quot;&gt;访问&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr v-for&#x3D;&quot;item in teacherList&quot;&gt;</span><br><span class="line">            &lt;td&gt;&#123;&#123;item.id&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;td&gt;&#123;&#123;item.name&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">        &lt;&#x2F;tr&gt;</span><br><span class="line">    &lt;&#x2F;table&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h5 id="7、跨域"><a href="#7、跨域" class="headerlink" title="7、跨域"></a>7、跨域</h5><h6 id="为什么会出现跨域问题？"><a href="#为什么会出现跨域问题？" class="headerlink" title="为什么会出现跨域问题？"></a>为什么会出现跨域问题？</h6><ul>
<li><p>出于浏览器的同源策略限制：</p>
<ul>
<li>所谓同源（即指在同一个域）就是两个地址具有相同的协议（protocol），主机（host）和端口号（port）</li>
<li>同源策略会阻止一个域的javascript脚本和另外一个域的内容进行交互。</li>
</ul>
</li>
<li><p>同源策略（Sameoriginpolicy）是一种约定，它是浏览器最核心也最基本的安全功能。</p>
</li>
</ul>
<h6 id="解决跨域问题："><a href="#解决跨域问题：" class="headerlink" title="解决跨域问题："></a>解决跨域问题：</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Api</span>(tags = <span class="string">"讲师管理"</span>)</span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/admin/edu/teacher"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherController</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在访问的接口处加入跨域注解</p>
</blockquote>
<h5 id="8、使用生命周期函数"><a href="#8、使用生命周期函数" class="headerlink" title="8、使用生命周期函数"></a>8、使用生命周期函数</h5><p>和methods一个级别</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.getTeacherList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>created 在创建页面的时候就会调用里面的方法，因此我们先把数据获取显示到首页面上先</p>
</blockquote>
<h5 id="9、业务分层的简单实现"><a href="#9、业务分层的简单实现" class="headerlink" title="9、业务分层的简单实现"></a>9、业务分层的简单实现</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">	getTeacherList() &#123;</span><br><span class="line">		axios</span><br><span class="line">			.get(<span class="string">"http://localhost:8110/admin/edu/teacher/list"</span>)</span><br><span class="line">			.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.teacherList = res.data.data.items;</span><br><span class="line">				<span class="built_in">console</span>.log(res);</span><br><span class="line">			&#125;);</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//基础配置,返回值是一个函数</span></span><br><span class="line">	initRequest() &#123;</span><br><span class="line">		<span class="keyword">return</span> axios.create(&#123;</span><br><span class="line">			baseURL: <span class="string">"http://localhost:8110"</span>,</span><br><span class="line">			timeout: <span class="number">5000</span>,</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//api调用</span></span><br><span class="line">	teacherListApi() &#123;</span><br><span class="line">		<span class="keyword">let</span> request = <span class="keyword">this</span>.initRequest();</span><br><span class="line">		<span class="keyword">return</span> request(&#123;</span><br><span class="line">			url: <span class="string">"/admin/edu/teacher/list"</span>,</span><br><span class="line">			method: <span class="string">"get"</span>,</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//数据渲染</span></span><br><span class="line">	getTeacherList2() &#123;</span><br><span class="line">		<span class="keyword">this</span>.teacherListApi()</span><br><span class="line">			.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(res);</span><br><span class="line">				<span class="keyword">this</span>.teacherList = res.data.data.items;</span><br><span class="line">			&#125;)</span><br><span class="line">			.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(error);</span><br><span class="line">			&#125;);</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>getTeacherList() 方法并没有分层。配置，api调用以及数据渲染都在一个方法内，不适合大型的前端开发，就类似于Springboot的三层架构一样。 </p>
<p>而后面的则是分层了，首先定义基础方法，然后api调用方法拼接成路径，接着数据层获取api取到数据回显在前端中。</p>
</blockquote>
<h4 id="七、element-ui"><a href="#七、element-ui" class="headerlink" title="七、element-ui"></a>七、element-ui</h4><h6 id="1、引入脚本库"><a href="#1、引入脚本库" class="headerlink" title="1、引入脚本库"></a>1、引入脚本库</h6><p><strong>在axios_pro文件夹中引入：</strong>element-ui\lib</p>
<p><a href="https://imgse.com/i/pSKz8kd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSKz8kd.png" alt="pSKz8kd.png"></a></p>
<h6 id="2、引入css"><a href="#2、引入css" class="headerlink" title="2、引入css"></a>2、引入css</h6><p>在axios.html 的head中引入css</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- import CSS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"element-ui/lib/theme-chalk/index.css"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="3、引入js-1"><a href="#3、引入js-1" class="headerlink" title="3、引入js"></a>3、引入js</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;element-ui&#x2F;lib&#x2F;index.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h6 id="4、渲染讲师列表"><a href="#4、渲染讲师列表" class="headerlink" title="4、渲染讲师列表"></a>4、渲染讲师列表</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table :data&#x3D;&quot;teacherList&quot; style&#x3D;&quot;width: 100%&quot;&gt;</span><br><span class="line">    &lt;el-table-column prop&#x3D;&quot;id&quot; label&#x3D;&quot;id&quot; width&#x3D;&quot;180&quot;&gt; &lt;&#x2F;el-table-column&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;el-table-column prop&#x3D;&quot;name&quot; label&#x3D;&quot;姓名&quot; width&#x3D;&quot;180&quot;&gt;</span><br><span class="line">    &lt;&#x2F;el-table-column&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;el-table-column prop&#x3D;&quot;level&quot; label&#x3D;&quot;级别&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">        &lt;span v-if&#x3D;&quot;scope.row.level &#x3D;&#x3D;&#x3D; 1&quot;&gt;高級講師&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;span v-if&#x3D;&quot;scope.row.level &#x3D;&#x3D;&#x3D; 2&quot;&gt;首席講師&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;!-- &#123;&#123;scope.row.level&#125;&#125; --&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">    &lt;&#x2F;el-table-column&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;el-table-column fixed&#x3D;&quot;right&quot; label&#x3D;&quot;操作&quot; width&#x3D;&quot;100&quot;&gt;</span><br><span class="line">    &lt;&#x2F;el-table-column&gt;</span><br><span class="line">&lt;&#x2F;el-table&gt;</span><br></pre></td></tr></table></figure>

<h6 id="5、浏览器中运行"><a href="#5、浏览器中运行" class="headerlink" title="5、浏览器中运行"></a><strong>5、浏览器中运行</strong></h6><p><a href="https://imgse.com/i/pSKz2cV" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSKz2cV.png" alt="pSKz2cV.png"></a></p>
<h2 id="day4"><a href="#day4" class="headerlink" title="day4"></a>day4</h2><h3 id="1、NPM"><a href="#1、NPM" class="headerlink" title="1、NPM"></a>1、NPM</h3><p>NPM全称Node Package Manager，是Node.js包管理工具，是全球最大的模块生态系统，里面所有的模块都是开源免费的；也是Node.js的包管理工具，相当于前端的Maven 。</p>
<h4 id="使用npm管理项目"><a href="#使用npm管理项目" class="headerlink" title="使用npm管理项目"></a><strong>使用npm管理项目</strong></h4><blockquote>
<p> <strong>创建npm_pro文件夹</strong></p>
</blockquote>
<h5 id="1、项目初始化"><a href="#1、项目初始化" class="headerlink" title="1、项目初始化"></a><strong>1、项目初始化</strong></h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#建立一个空文件夹，在命令提示符进入该文件夹  执行命令初始化</span><br><span class="line">npm init</span><br><span class="line">#按照提示输入相关信息，如果是用默认值则直接回车即可。</span><br><span class="line">#name: 项目名称</span><br><span class="line">#version: 项目版本号</span><br><span class="line">#description: 项目描述</span><br><span class="line">#keywords: &#123;Array&#125;关键词，便于用户搜索到我们的项目</span><br><span class="line">#最后会生成package.json文件，这个是包的配置文件，相当于maven的pom.xml</span><br><span class="line">#我们之后也可以根据需要进行修改。</span><br></pre></td></tr></table></figure>



<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#如果想直接生成 package.json 文件，那么可以使用命令</span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<h5 id="2、修改npm镜像"><a href="#2、修改npm镜像" class="headerlink" title="2、修改npm镜像"></a><strong>2、修改npm镜像</strong></h5><p>NPM官方的管理的包都是从 <a href="http://npmjs.com" target="_blank" rel="noopener">http://npmjs.com</a>下载的，但是这个网站在国内速度很慢。</p>
<p>这里推荐使用淘宝 NPM 镜像 <a href="http://npm.taobao.org/" target="_blank" rel="noopener">http://npm.taobao.org/</a> ，淘宝 NPM 镜像是一个完整 npmjs.com 镜像，同步频率目前为 10分钟一次，以保证尽量与官方服务同步。</p>
<p><strong>设置镜像地址：</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#经过下面的配置，以后所有的 npm install 都会经过淘宝的镜像地址下载</span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org </span><br><span class="line">#查看npm配置信息</span><br><span class="line">npm config list</span><br></pre></td></tr></table></figure>

<h5 id="3、npm-install命令的使用"><a href="#3、npm-install命令的使用" class="headerlink" title="3、npm install命令的使用"></a><strong>3、npm install命令的使用</strong></h5><p>基本命令</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#使用 npm install 安装依赖包的最新版，</span><br><span class="line">#模块安装的位置：项目目录\node_modules</span><br><span class="line">#同时package.json 文件中，依赖包会被添加到dependencies节点下，类似maven中的 &lt;dependencies&gt;</span><br><span class="line">#默认参数：--save  简写  -S  将当前依赖保存在dependencies节点下</span><br><span class="line">npm install jquery</span><br></pre></td></tr></table></figure>

<p>下载特定版本的依赖</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#如果安装时想指定特定的版本</span><br><span class="line">npm install jquery@<span class="number">2</span>.<span class="number">1</span>.x</span><br></pre></td></tr></table></figure>

<p>下载开发依赖</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#devDependencies节点：开发时的依赖包，项目打包到生产环境的时候不包含的依赖</span><br><span class="line">#使用 -D参数将依赖添加到devDependencies节点</span><br><span class="line">npm install --save-dev eslint</span><br><span class="line">#或简写</span><br><span class="line">npm i -D eslint</span><br></pre></td></tr></table></figure>

<p>下载全局依赖</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#全局安装</span><br><span class="line">#Node.js全局安装的npm包和工具的位置：用户目录\AppData\Roaming\npm\node_modules</span><br><span class="line">#一些命令行工具常使用全局安装的方式</span><br><span class="line">npm install --global webpack</span><br><span class="line">#或简写</span><br><span class="line">npm install -g webpack</span><br></pre></td></tr></table></figure>

<p>根据依赖下载安装包</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#npm管理的项目在备份和传输的时候一般不携带node_modules文件夹</span><br><span class="line">#安装会自动在项目目录下添加 package-lock.json文件，这个文件帮助锁定安装包的版本</span><br><span class="line">npm install #根据package.json中的配置下载依赖，初始化项目</span><br></pre></td></tr></table></figure>

<h5 id="4、其它命令"><a href="#4、其它命令" class="headerlink" title="4、其它命令"></a><strong>4、其它命令</strong></h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#更新包（更新到最新版本）</span><br><span class="line">npm update 包名</span><br><span class="line">#全局更新</span><br><span class="line">npm update -g 包名</span><br><span class="line">#卸载包</span><br><span class="line">npm uninstall 包名</span><br><span class="line">#全局卸载</span><br><span class="line">npm uninstall -g 包名</span><br></pre></td></tr></table></figure>

<h3 id="2、模块化简介"><a href="#2、模块化简介" class="headerlink" title="2、模块化简介"></a>2、模块化简介</h3><h4 id="模块化规范"><a href="#模块化规范" class="headerlink" title="模块化规范"></a>模块化规范</h4><ul>
<li>CommonJS模块化规范（基于ES6语法之前）</li>
<li>ES6模块化规范（使用ES6语法）</li>
</ul>
<h4 id="ES6模块化规范"><a href="#ES6模块化规范" class="headerlink" title="ES6模块化规范"></a>ES6模块化规范</h4><p><strong>创建 modularization_pro文件夹</strong></p>
<h5 id="1、导出模块"><a href="#1、导出模块" class="headerlink" title="1、导出模块"></a><strong>1、导出模块</strong></h5><p>创建 src/teacherApi.js 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    getList()&#123;</span><br><span class="line">        <span class="comment">//ajax调用</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'获取讲师列表'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    save()&#123;</span><br><span class="line">        <span class="comment">//ajax调用</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'保存讲师'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、导入模块"><a href="#2、导入模块" class="headerlink" title="2、导入模块"></a><strong>2、导入模块</strong></h5><p>创建 src/teacherComponent.js文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> teacherApi <span class="keyword">from</span> <span class="string">"./teacherApi"</span>;</span><br><span class="line"></span><br><span class="line">teacherApi.getList()</span><br><span class="line">teacherApi.save()</span><br></pre></td></tr></table></figure>

<p><strong>ES6使用 export 和 import 来导出、导入模块。</strong></p>
<h5 id="3、运行程序"><a href="#3、运行程序" class="headerlink" title="3、运行程序"></a><strong>3、运行程序</strong></h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node teacherComponent.js</span><br></pre></td></tr></table></figure>

<p><a href="https://imgse.com/i/pSMSN59" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSMSN59.png" alt="pSMSN59.png"></a></p>
<h4 id="使用Babel转码"><a href="#使用Babel转码" class="headerlink" title="使用Babel转码"></a>使用Babel转码</h4><p>ES6的某些高级语法在浏览器环境甚至是Node.js环境中无法执行。</p>
<p>Babel是一个广泛使用的转码器，可以将ES6代码转为ES5代码，从而在现有环境执行执行。</p>
<p>这意味着，你可以现在就用 ES6 编写程序，而不用担心现有环境是否支持</p>
<h5 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h5><p>Babel提供babel-cli工具，用于命令行转码。它的安装命令如下：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g babel-cli</span><br><span class="line"></span><br><span class="line">#查看是否安装成功</span><br><span class="line">babel --version</span><br></pre></td></tr></table></figure>

<h5 id="2、初始化项目"><a href="#2、初始化项目" class="headerlink" title="2、初始化项目"></a>2<strong>、初始化项目</strong></h5><p>在modularization目录下初始化项目</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<h5 id="3、配置-babelrc"><a href="#3、配置-babelrc" class="headerlink" title="3、配置.babelrc"></a>3、配置.babelrc</h5><p>Babel的配置文件是.babelrc，存放在项目的根目录下，该文件用来设置转码规则和插件，presets字段设定转码规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"presets"</span>: [<span class="string">"es2015"</span>],</span><br><span class="line">    <span class="string">"plugins"</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、安装转码器"><a href="#4、安装转码器" class="headerlink" title="4、安装转码器"></a>4、安装转码器</h5><p>在modularization目录中安装</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-preset-es2015</span><br></pre></td></tr></table></figure>

<h5 id="5、转码"><a href="#5、转码" class="headerlink" title="5、转码"></a>5、转码</h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 整个目录转码</span><br><span class="line"># --out-<span class="built_in">dir</span> 或 -d 参数指定输出目录</span><br><span class="line">babel src -d dist</span><br></pre></td></tr></table></figure>

<h5 id="6、运行程序"><a href="#6、运行程序" class="headerlink" title="6、运行程序"></a>6、运行程序</h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node dist/teacherComponent.js</span><br></pre></td></tr></table></figure>

<h4 id="更多的方式"><a href="#更多的方式" class="headerlink" title="更多的方式"></a>更多的方式</h4><p>ES6模块化规范还有一些其他的语法格式，常见的另一种写法如下：</p>
<p><strong>src/teacherApi.js：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'获取讲师列表2'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">save</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'保存讲师2'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>src/teacherComponent.js：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;getList, save&#125; <span class="keyword">from</span> <span class="string">"./teacherApi.js"</span></span><br><span class="line">getList()</span><br><span class="line">save()</span><br></pre></td></tr></table></figure>

<h3 id="3、Webpack"><a href="#3、Webpack" class="headerlink" title="3、Webpack"></a>3、Webpack</h3><p>Webpack 是一个前端资源加载/打包工具。它将根据模块的依赖关系进行静态分析，然后将这些模块按照指定的规则生成对应的静态资源。</p>
<p>从图中我们可以看出，Webpack 可以将多种静态资源 js、css、less 转换成一个静态文件，减少了页面的请求。 </p>
<p><a href="https://imgse.com/i/pSMSrDO" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSMSrDO.png" alt="pSMSrDO.png"></a></p>
<h4 id="Webpack安装"><a href="#Webpack安装" class="headerlink" title="Webpack安装"></a>Webpack安装</h4><h5 id="1、全局安装"><a href="#1、全局安装" class="headerlink" title="1、全局安装"></a>1、全局安装</h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install -g webpack webpack-cli</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line">npm install -g webpack</span><br><span class="line">npm install -g webpack-cli</span><br></pre></td></tr></table></figure>

<h5 id="2、安装后查看版本号"><a href="#2、安装后查看版本号" class="headerlink" title="2、安装后查看版本号"></a>2、安装后查看版本号</h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack -v</span><br></pre></td></tr></table></figure>



<h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p><strong>创建 webpack_pro文件夹</strong></p>
<h5 id="1、初始化项目"><a href="#1、初始化项目" class="headerlink" title="1、初始化项目"></a>1、初始化项目</h5><p>进入目录，执行命令</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<h5 id="2、创建src文件夹"><a href="#2、创建src文件夹" class="headerlink" title="2、创建src文件夹"></a>2、创建src文件夹</h5><h5 id="3、src下创建common-js"><a href="#3、src下创建common-js" class="headerlink" title="3、src下创建common.js"></a>3、src下创建common.js</h5><p>这里使用的是CommonJS模块化方式，这种方式不支持ES6的语法，所以不需要Babel转码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exports.info = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.write(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、src下创建utils-js"><a href="#4、src下创建utils-js" class="headerlink" title="4、src下创建utils.js"></a><strong>4、src下创建utils.js</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exports.add = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5、src下创建main-js"><a href="#5、src下创建main-js" class="headerlink" title="5、src下创建main.js"></a><strong>5、src下创建main.js</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./common'</span>)</span><br><span class="line"><span class="keyword">const</span> utils = <span class="built_in">require</span>(<span class="string">'./utils'</span>)</span><br><span class="line">common.info(<span class="string">'Hello world!'</span> + utils.add(<span class="number">100</span>, <span class="number">200</span>))</span><br></pre></td></tr></table></figure>

<h4 id="JS打包"><a href="#JS打包" class="headerlink" title="JS打包"></a><strong>JS打包</strong></h4><h5 id="1、创建配置文件"><a href="#1、创建配置文件" class="headerlink" title="1、创建配置文件"></a>1、创建配置文件</h5><p>webpack_pro目录下创建配置文件webpack.config.js</p>
<p>以下配置的意思是：</p>
<ul>
<li>读取当前项目目录下src文件夹中的main.js（入口文件）内容，分析资源依赖，把相关的js文件打包</li>
<li>打包后的文件放入当前目录的dist文件夹下</li>
<li>打包后的js文件名为bundle.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>) <span class="comment">//Node.js内置模块</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/main.js'</span>, <span class="comment">//配置入口文件</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'./dist'</span>), <span class="comment">//输出路径，__dirname：当前文件所在路径</span></span><br><span class="line">        filename: <span class="string">'bundle.js'</span> <span class="comment">//输出文件</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、执行编译命令"><a href="#2、执行编译命令" class="headerlink" title="2、执行编译命令"></a><strong>2、执行编译命令</strong></h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">webpack --<span class="built_in">mode</span>=development</span><br><span class="line">#执行后查看bundle.js 里面包含了上面两个js文件的内容并进行了代码打包</span><br></pre></td></tr></table></figure>

<p>也可以配置项目的npm运行命令，修改package.json文件</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    <span class="comment">//...,</span></span><br><span class="line">    "dev": "webpack --mode=development",</span><br><span class="line">    "prod": "webpack --mode=production"</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>运行npm命令执行打包</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run dev #开发打包</span><br><span class="line">或</span><br><span class="line">npm run prod #生产打包</span><br></pre></td></tr></table></figure>

<h5 id="3、创建入口页面"><a href="#3、创建入口页面" class="headerlink" title="3、创建入口页面"></a><strong>3、创建入口页面</strong></h5><p>webpack_pro目录下创建index.html，引用bundle.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"dist/bundle.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4、测试"><a href="#4、测试" class="headerlink" title="4、测试"></a>4、测试</h5><p>浏览器中查看index.html</p>
<h4 id="CSS打包"><a href="#CSS打包" class="headerlink" title="CSS打包"></a><strong>CSS打包</strong></h4><h5 id="1、安装插件"><a href="#1、安装插件" class="headerlink" title="1、安装插件"></a><strong>1、安装插件</strong></h5><p>Webpack 本身只能处理 JavaScript 模块，如果要处理其他类型的文件，就需要使用 loader 进行转换。</p>
<p>Loader 可以理解为是模块和资源的转换器。</p>
<p>首先我们需要安装相关Loader插件，css-loader 是将 css 装载到 javascript；style-loader 是让 javascript 认识css</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D style-loader css-loader</span><br></pre></td></tr></table></figure>

<h5 id="2、修改webpack-config-js"><a href="#2、修改webpack-config-js" class="headerlink" title="2、修改webpack.config.js"></a><strong>2、修改webpack.config.js</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>); <span class="comment">//Node.js内置模块</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">//...,</span></span><br><span class="line">    output:&#123;</span><br><span class="line">        <span class="comment">//其他配置</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [  </span><br><span class="line">            &#123;  </span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,    <span class="comment">//打包规则应用到以css结尾的文件上</span></span><br><span class="line">                use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;  </span><br><span class="line">        ]  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、在src文件夹-创建style-css"><a href="#3、在src文件夹-创建style-css" class="headerlink" title="3、在src文件夹**创建style.css"></a><strong>3、在src文件夹**</strong>创建style.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>:pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、修改main-js"><a href="#4、修改main-js" class="headerlink" title="4、修改main.js"></a><strong>4、修改main.js</strong></h5><p>在第一行引入style.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(&#39;.&#x2F;style.css&#39;)</span><br></pre></td></tr></table></figure>

<h5 id="5、运行编译命令"><a href="#5、运行编译命令" class="headerlink" title="5、运行编译命令"></a><strong>5、运行编译命令</strong></h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h3 id="4-1、vue-element-admin-重要！！"><a href="#4-1、vue-element-admin-重要！！" class="headerlink" title="4-1、vue-element-admin(重要！！)"></a><strong>4-1、vue-element-admin</strong>(重要！！)</h3><h4 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a><strong>1、简介</strong></h4><p>vue-element-admin是基于element-ui 的一套后台管理系统集成方案。</p>
<p><strong>GitHub地址：</strong><a href="https://github.com/PanJiaChen/vue-element-admin" target="_blank" rel="noopener">https://github.com/PanJiaChen/vue-element-admin</a></p>
<p><strong>项目在线预览：</strong><a href="https://panjiachen.gitee.io/vue-element-admin/#/login?redirect=%2Fdashboard" target="_blank" rel="noopener">https://panjiachen.gitee.io/vue-element-admin</a></p>
<h4 id="2、安装-1"><a href="#2、安装-1" class="headerlink" title="2、安装"></a>2、安装</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 解压压缩包</span><br><span class="line"># 进入目录</span><br><span class="line"><span class="built_in">cd</span> vue-element-admin-master</span><br><span class="line"># 安装依赖</span><br><span class="line">npm install</span><br><span class="line"># 启动。执行后，浏览器自动弹出并访问http://localhost:<span class="number">9527</span>/</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>如果上面的install报错</p>
<p><a href="https://imgse.com/i/pSMCbIe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSMCbIe.png" alt="pSMCbIe.png"></a></p>
<p>则先执行下面的命令，再install</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g node-sass --sass_binary_site=https://npm.taobao.org/mirrors/node-sass/</span><br></pre></td></tr></table></figure>

<h3 id="4-2、vue-admin-template"><a href="#4-2、vue-admin-template" class="headerlink" title="4-2、vue-admin-template"></a>4-2、<strong>vue-admin-template</strong></h3><h4 id="1、简介-1"><a href="#1、简介-1" class="headerlink" title="1、简介"></a>1、简介</h4><p>vueAdmin-template是基于vue-element-admin的一套后台管理系统基础模板（最少精简版），可作为模板进行二次开发。</p>
<p><strong>GitHub地址：</strong><a href="https://github.com/PanJiaChen/vue-admin-template" target="_blank" rel="noopener">https://github.com/PanJiaChen/vue-admin-template</a></p>
<p><strong>建议：</strong>你可以在 <code>vue-admin-template</code> 的基础上进行二次开发，把 <code>vue-element-admin</code>当做工具箱，想要什么功能或者组件就去 <code>vue-element-admin</code> 那里复制过来。</p>
<h4 id="2、安装-2"><a href="#2、安装-2" class="headerlink" title="2、安装"></a>2、安装</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 解压压缩包</span><br><span class="line"># 进入目录</span><br><span class="line"><span class="built_in">cd</span> vue-admin-template-master</span><br><span class="line"># 安装依赖</span><br><span class="line">npm install</span><br><span class="line"># 启动。执行后，浏览器自动弹出并访问http://localhost:<span class="number">9528</span>/</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h3 id="5、ESLint"><a href="#5、ESLint" class="headerlink" title="5、ESLint"></a>5、ESLint</h3><p>ESLint 是一个语法规则和代码风格的检查工具，可以用来保证写出语法正确、风格统一的代码。</p>
<p>不管是多人合作还是个人项目，代码规范是很重要的。这样做不仅可以很大程度地避免基本语法错误，也保证了代码的可读性。这所谓工欲善其事，必先利其器，推荐 ESLint+vscode 来写 vue，有种飞一般的感觉。</p>
<p>每次保存，vscode就能标红不符合ESLint规则的地方，同时还会做一些简单的自我修正。</p>
<h4 id="启用ESLint"><a href="#启用ESLint" class="headerlink" title="启用ESLint"></a>启用ESLint</h4><h5 id="1、ESLint插件安装"><a href="#1、ESLint插件安装" class="headerlink" title="1、ESLint插件安装"></a>1、ESLint插件安装</h5><p>vs code的ESLint插件，能帮助我们自动整理代码格式 </p>
<p><a href="https://imgse.com/i/pSMCzsP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSMCzsP.png" alt="pSMCzsP.png"></a></p>
<h5 id="2、插件的扩展设置"><a href="#2、插件的扩展设置" class="headerlink" title="2、插件的扩展设置"></a>2、插件的扩展设置</h5><p>选择vs code左下角的“设置”， 打开 VSCode 配置文件,添加如下配置</p>
<p><a href="https://imgse.com/i/pSMPPIg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSMPPIg.png" alt="pSMPPIg.png"></a></p>
<blockquote>
<p> 这样每次保存的时候就可以根据根目录下 .eslintrc.js 你配置的ESLint规则来检查和做一些简单的fix</p>
</blockquote>
<h5 id="3、确认开启语法检查"><a href="#3、确认开启语法检查" class="headerlink" title="3、确认开启语法检查"></a>3、确认开启语法检查</h5><p>打开 config/index.js，配置是否开启语法检查</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useEslint: <span class="literal">true</span>,</span><br></pre></td></tr></table></figure>

<p><a href="https://imgse.com/i/pSMPEzn" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/13/pSMPEzn.png" alt="pSMPEzn.png"></a></p>
<h4 id="ESLint规则说明"><a href="#ESLint规则说明" class="headerlink" title="ESLint规则说明"></a>ESLint规则说明</h4><p>参考：<a href="http://eslint.cn/docs/user-guide/getting-started" target="_blank" rel="noopener">http://eslint.cn/docs/user-guide/getting-started</a></p>
<h5 id="1、规则说明"><a href="#1、规则说明" class="headerlink" title="1、规则说明"></a>1、规则说明</h5><p>你可以在 .eslintrc 文件中看到许多像这样的规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    rules: &#123;</span><br><span class="line">        <span class="string">'semi'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],  <span class="comment">//不使用分号，否则报错</span></span><br><span class="line">        <span class="string">'quotes'</span>: [<span class="number">2</span>, <span class="string">'single'</span>] <span class="comment">//使用单引号，否则报错</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>“semi” 和 “quotes” 是 ESLint 中 规则 的名称。第一个值是错误级别，可以使下面的值之一：</p>
<ul>
<li>“off” or 0 - 关闭规则</li>
<li>“warn” or 1 - 将规则视为一个警告</li>
<li>“error” or 2 - 将规则视为一个错误</li>
</ul>
<h5 id="2、语法规则"><a href="#2、语法规则" class="headerlink" title="2、语法规则"></a>2、语法规则</h5><p>本项目的语法规则包括：</p>
<ul>
<li>两个字符缩进</li>
<li>使用单引号</li>
<li>语句后不可以写分号</li>
<li>等</li>
</ul>
<h3 id="6、vue-element-admin-的目录结构"><a href="#6、vue-element-admin-的目录结构" class="headerlink" title="6、vue-element-admin 的目录结构"></a>6、vue-element-admin 的目录结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">├── build                      &#x2F;&#x2F; 构建相关  </span><br><span class="line">├── config                     &#x2F;&#x2F; 配置相关</span><br><span class="line">├── src                        &#x2F;&#x2F; 源代码</span><br><span class="line">│   ├── api                    &#x2F;&#x2F; 所有请求</span><br><span class="line">│   ├── assets                 &#x2F;&#x2F; 主题 字体等静态资源</span><br><span class="line">│   ├── components             &#x2F;&#x2F; 全局公用组件</span><br><span class="line">│   ├── directive              &#x2F;&#x2F; 全局指令</span><br><span class="line">│   ├── filtres                &#x2F;&#x2F; 全局 filter</span><br><span class="line">│   ├── icons                  &#x2F;&#x2F; 项目所有 svg icons</span><br><span class="line">│   ├── lang                   &#x2F;&#x2F; 国际化 language</span><br><span class="line">│   ├── mock                   &#x2F;&#x2F; 项目mock 模拟数据</span><br><span class="line">│   ├── router                 &#x2F;&#x2F; 路由</span><br><span class="line">│   ├── store                  &#x2F;&#x2F; 全局 store管理</span><br><span class="line">│   ├── styles                 &#x2F;&#x2F; 全局样式</span><br><span class="line">│   ├── utils                  &#x2F;&#x2F; 全局公用方法</span><br><span class="line">│   ├── vendor                 &#x2F;&#x2F; 公用vendor</span><br><span class="line">│   ├── views                   &#x2F;&#x2F; view</span><br><span class="line">│   ├── App.vue                &#x2F;&#x2F; 入口页面</span><br><span class="line">│   ├── main.js                &#x2F;&#x2F; 入口 加载组件 初始化等</span><br><span class="line">│   └── permission.js          &#x2F;&#x2F; 权限管理</span><br><span class="line">├── static                     &#x2F;&#x2F; 第三方不打包资源</span><br><span class="line">│   └── Tinymce                &#x2F;&#x2F; 富文本</span><br><span class="line">├── .babelrc                   &#x2F;&#x2F; babel-loader 配置</span><br><span class="line">├── .eslintrc.js                &#x2F;&#x2F; eslint 配置项</span><br><span class="line">├── .gitignore                 &#x2F;&#x2F; git 忽略项</span><br><span class="line">├── favicon.ico                &#x2F;&#x2F; favicon图标</span><br><span class="line">├── index.html                 &#x2F;&#x2F; html模板</span><br><span class="line">└── package.json               &#x2F;&#x2F; package.json</span><br></pre></td></tr></table></figure>

<h4 id="关键文件"><a href="#关键文件" class="headerlink" title="关键文件"></a>关键文件</h4><p>vue-admin-template-master（源码相对简单，我们的后台管理系统基于这个版本）</p>
<h6 id="1、package-js"><a href="#1、package-js" class="headerlink" title="1、package.js"></a>1、package.js</h6><p>npm项目的核心配置文件，包含项目信息，项目依赖，项目启动相关脚本</p>
<ul>
<li><p>启动项目的命令： npm run dev</p>
</li>
<li><p>dev脚本：webpack-dev-server –inline –progress –config build/webpack.dev.conf.js</p>
</li>
<li><ul>
<li>webpack-dev-server：一个小型的基于Node.js的http服务器，可以运行前端项目</li>
<li>–inline：一种启动模式</li>
<li>–progress：显示启动进度</li>
<li>–config build/webpack.dev.conf.js：指定webpack配置文件所在位置</li>
</ul>
</li>
</ul>
<p><a href="https://imgse.com/i/pSMXzgf" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMXzgf.png" alt="pSMXzgf.png"></a></p>
<h6 id="2、build-webpack-dev-conf-js"><a href="#2、build-webpack-dev-conf-js" class="headerlink" title="2、build/webpack.dev.conf.js"></a>2、build/webpack.dev.conf.js</h6><p>webpack配置文件，包含项目在开发环境打包和运行的相关配置</p>
<ul>
<li>webpack.dev.conf.js 中引用了 webpack.base.conf.js</li>
<li>webpack.base.conf.js 中定义了项目打包的入口文件</li>
</ul>
<p><a href="https://imgse.com/i/pSMjuKU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMjuKU.png" alt="pSMjuKU.png"></a></p>
<p><a href="https://imgse.com/i/pSMjKrF" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMjKrF.png" alt="pSMjKrF.png"></a></p>
<p>在HtmlWebpackPlugin配置html模板，生成的js就会自动插入到模板中，如下面的配置。</p>
<p>因此生成的js文件会被自动插入到名为index.html的页面中</p>
<p><a href="https://imgse.com/i/pSMjdqe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMjdqe.png" alt="pSMjdqe.png"></a></p>
<h6 id="3、index-html"><a href="#3、index-html" class="headerlink" title="3、index.html"></a>3、index.html</h6><p>项目默认的html页面</p>
<p><a href="https://imgse.com/i/pSMjcxf" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMjcxf.png" alt="pSMjcxf.png"></a></p>
<p><a href="https://imgse.com/i/pSMjWqg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMjWqg.png" alt="pSMjWqg.png"></a></p>
<h6 id="4、src-main-js"><a href="#4、src-main-js" class="headerlink" title="4、src/main.js"></a>4、src/main.js</h6><p>项目js入口文件，项目的所有前端功能都在这个文件中引入和定义，并初始化全局的Vue对象</p>
<p><a href="https://imgse.com/i/pSMvtFs" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMvtFs.png" alt="pSMvtFs.png"></a></p>
<h6 id="5、config-dev-env-js"><a href="#5、config-dev-env-js" class="headerlink" title="5、config/dev.env.js"></a>5、config/dev.env.js</h6><p>定义全局常量值</p>
<p><a href="https://imgse.com/i/pSMxCkj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMxCkj.png" alt="pSMxCkj.png"></a><br><a href="https://imgse.com/i/pSMxp7Q" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMxp7Q.png" alt="pSMxp7Q.png"></a></p>
<p>因此，在项目中的任意位置可以直接使用 process.env.BASE_API 常量表示后端接口的主机地址</p>
<h6 id="6、src-utils-request-js"><a href="#6、src-utils-request-js" class="headerlink" title="6、src/utils/request.js"></a>6、src/utils/request.js</h6><p>引入axios模块，定义全局的axios实例，并导出模块</p>
<p><a href="https://imgse.com/i/pSMxenU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMxenU.png" alt="pSMxenU.png"></a></p>
<h6 id="7、src-api-login-js"><a href="#7、src-api-login-js" class="headerlink" title="7、src/api/login.js"></a>7、src/api/login.js</h6><p>引用request模块，调用远程api</p>
<p><a href="https://imgse.com/i/pSMxMN9" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMxMN9.png" alt="pSMxMN9.png"></a></p>
<h3 id="7、前端登录问题"><a href="#7、前端登录问题" class="headerlink" title="7、前端登录问题"></a>7、前端登录问题</h3><p>默认情况下，前端项目已经实现了登录功能，后端连接到远程Mock平台的模拟数据接口进行登录，而Mock平台地址无效，导致前端的登录功能无法执行</p>
<p><a href="https://imgse.com/i/pSMx31x" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/14/pSMx31x.png" alt="pSMx31x.png"></a></p>
<p>####Mock登录接口</p>
<p>我们暂时将请求切换到本地Mock数据的接口中，使系统可以进行模拟登录，以便进行后续的开发工作</p>
<h5 id="1、修改前端接口配置"><a href="#1、修改前端接口配置" class="headerlink" title="1、修改前端接口配置"></a>1、修改前端接口配置</h5><p>在 config/dev.env.js 中修改BASE_API</p>
<p>注意：这个文件修改后需要重启前端服务器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BASE_API: <span class="string">'"http://127.0.0.1:8110"'</span></span><br></pre></td></tr></table></figure>

<h5 id="2、前端登录接口文件"><a href="#2、前端登录接口文件" class="headerlink" title="2、前端登录接口文件"></a>2、前端登录接口文件</h5><p>src/api/login.js，可以在这个文件中分析后端Mock数据的接口的url地址：</p>
<ul>
<li>登录：/user/login</li>
<li>登出：/user/info</li>
<li>获取用户信息：/user/logout</li>
</ul>
<h5 id="3、后端接口文件"><a href="#3、后端接口文件" class="headerlink" title="3、后端接口文件"></a>3、后端接口文件</h5><p>暂时在service_edu微服务中创建LoginController，模拟上面三个接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.R;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/13 15:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//登录</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"token"</span>,<span class="string">"admin"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取用户信息</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"info"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">info</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"name"</span>,<span class="string">"admin"</span>)</span><br><span class="line">                     .data(<span class="string">"roles"</span>,<span class="string">"[admin,admin]"</span>)</span><br><span class="line">                     .data(<span class="string">"avatar"</span>,<span class="string">"https://img0.baidu.com/it/u=1203513050,788537387&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1280&amp;h=800"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//退出</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"logout"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">logout</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8、router"><a href="#8、router" class="headerlink" title="8、router"></a>8、router</h3><h4 id="路由的作用"><a href="#路由的作用" class="headerlink" title="路由的作用"></a>路由的作用</h4><p>Vue.js 路由允许我们通过锚点定义不同的 URL， 达到访问不同的页面的目的，每个页面的内容通过延迟加载渲染出来。</p>
<p>通过 Vue.js 可以实现多视图的单页Web应用（single page web application，SPA）</p>
<h4 id="路由实例"><a href="#路由实例" class="headerlink" title="路由实例"></a>路由实例</h4><p><strong>创建文件夹router_pro</strong></p>
<h5 id="1、复制js资源-1"><a href="#1、复制js资源-1" class="headerlink" title="1、复制js资源"></a>1、复制js资源</h5><p>vue.min.js</p>
<p>vue-router.min.js</p>
<h5 id="2、创建-路由-html"><a href="#2、创建-路由-html" class="headerlink" title="2、创建 路由.html"></a>2、创建 路由.html</h5><h5 id="3、引入js-2"><a href="#3、引入js-2" class="headerlink" title="3、引入js"></a>3、引入js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"vue.min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="vue-router.min.js"&gt;&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4、编写html"><a href="#4、编写html" class="headerlink" title="4、编写html"></a>4、编写html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 路由定义 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/student"</span>&gt;</span>会员管理<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/teacher"</span>&gt;</span>讲师管理<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 路由出口 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="5、编写js-1"><a href="#5、编写js-1" class="headerlink" title="5、编写js"></a>5、编写js</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue-router.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//定义视图组件</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> Welcome = &#123; template: <span class="string">"&lt;div&gt;欢迎&lt;/div&gt;"</span> &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> Student = &#123; template: <span class="string">"&lt;div&gt;会员列表&lt;/div&gt;"</span> &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> Teacher = &#123; template: <span class="string">"&lt;div&gt;讲师列表&lt;/div&gt;"</span> &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">//定义路由</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> routes = [</span></span><br><span class="line"><span class="actionscript">        &#123; path: <span class="string">"/"</span>, component: Welcome &#125;,</span></span><br><span class="line"><span class="actionscript">        &#123; path: <span class="string">"/student"</span>, component: Student &#125;,</span></span><br><span class="line"><span class="actionscript">        &#123; path: <span class="string">"/teacher"</span>, component: Teacher &#125;,</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">//基于路由创建路由实例</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span></span><br><span class="line">    routes,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="comment">//挂在路由实例</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">"app"</span>,</span></span><br><span class="line">        router,</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9、前端路由配置"><a href="#9、前端路由配置" class="headerlink" title="9、前端路由配置"></a>9、前端路由配置</h3><p>####一、创建vue组件</p>
<p>在src/views文件夹下创建以下文件夹和文件</p>
<p>form.vue &amp; list.vue</p>
<h5 id="1、form-vue"><a href="#1、form-vue" class="headerlink" title="1、form.vue"></a>1、form.vue</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;h1&gt;讲师管理&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;p&gt;讲师列表&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2、list-vue"><a href="#2、list-vue" class="headerlink" title="2、list.vue"></a>2、list.vue</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;h1&gt;讲师管理&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;p&gt;讲师表单&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="二、路由定义"><a href="#二、路由定义" class="headerlink" title="二、路由定义"></a><strong>二、路由定义</strong></h4><p>修改 src/router/index.js 文件，重新定义constantRouterMap</p>
<p><strong>注意：</strong>每个路由的name不能相同</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRouterMap = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/login'</span>,</span><br><span class="line">    component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/login/index'</span>),</span><br><span class="line">    hidden: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">'/404'</span>, <span class="attr">component</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/404'</span>), <span class="attr">hidden</span>: <span class="literal">true</span> &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: <span class="string">'/dashboard'</span>,</span><br><span class="line">    name: <span class="string">'Dashboard'</span>,</span><br><span class="line">    hidden: <span class="literal">true</span>,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'dashboard'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/dashboard/index'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 讲师管理</span></span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/teacher'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: <span class="string">'/teacher/list'</span>,</span><br><span class="line">    name: <span class="string">'Teacher'</span>,</span><br><span class="line">    meta: &#123; <span class="attr">title</span>: <span class="string">'讲师管理'</span> &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'list'</span>,</span><br><span class="line">        name: <span class="string">'TeacherList'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/teacher/list'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'讲师列表'</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'create'</span>,</span><br><span class="line">        name: <span class="string">'TeacherCreate'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/teacher/form'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'添加讲师'</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'edit/:id'</span>,</span><br><span class="line">        name: <span class="string">'TeacherEdit'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/teacher/form'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'编辑讲师'</span> &#125;,</span><br><span class="line">        hidden: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">'*'</span>, <span class="attr">redirect</span>: <span class="string">'/404'</span>, <span class="attr">hidden</span>: <span class="literal">true</span> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="三、其他定义"><a href="#三、其他定义" class="headerlink" title="三、其他定义"></a>三、其他定义</h4><h5 id="1、项目名称"><a href="#1、项目名称" class="headerlink" title="1、项目名称"></a><strong>1、项目名称</strong></h5><p>将vue-admin-template-master重命名为guli_admin</p>
<h5 id="2、端口号"><a href="#2、端口号" class="headerlink" title="2、端口号"></a>2、端口号</h5><p>在 config/index.js中修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">port: 9528</span><br></pre></td></tr></table></figure>

<h5 id="3、国际化设置"><a href="#3、国际化设置" class="headerlink" title="3、国际化设置"></a>3、国际化设置</h5><p>src/main.js，第7行，修改语言为 zh-CN，使用中文语言环境，例如：日期时间组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import locale from &#39;element-ui&#x2F;lib&#x2F;locale&#x2F;lang&#x2F;zh-CN&#39; &#x2F;&#x2F; lang i18n</span><br></pre></td></tr></table></figure>

<h5 id="4、入口页面"><a href="#4、入口页面" class="headerlink" title="4、入口页面"></a>4、入口页面</h5><p>index.html</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;title&gt;谷粒学院后台管理系统&lt;&#x2F;title&gt;</span><br></pre></td></tr></table></figure>

<h5 id="5、登录页"><a href="#5、登录页" class="headerlink" title="5、登录页"></a><strong>5、登录页</strong></h5><p>src/views/login/index.vue，第4行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3 class&#x3D;&quot;title&quot;&gt;谷粒学院后台管理系统&lt;&#x2F;h3&gt;</span><br></pre></td></tr></table></figure>

<h2 id="day5"><a href="#day5" class="headerlink" title="day5"></a>day5</h2><h3 id="01-前端项目开发流程"><a href="#01-前端项目开发流程" class="headerlink" title="01-前端项目开发流程"></a>01-前端项目开发流程</h3><h4 id="一、项目开发流程"><a href="#一、项目开发流程" class="headerlink" title="一、项目开发流程"></a>一、项目开发流程</h4><p><a href="https://imgse.com/i/pS3FV56" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/17/pS3FV56.png" alt="pS3FV56.png"></a></p>
<h5 id="1、定义路由模块"><a href="#1、定义路由模块" class="headerlink" title="1、定义路由模块"></a>1、定义路由模块</h5><p>src/router/index.js</p>
<p>配置讲师管理相关路由</p>
<h5 id="2、定义api模块"><a href="#2、定义api模块" class="headerlink" title="2、定义api模块"></a>2、定义api模块</h5><blockquote>
<p>定义api是因为前端也需要像后端一样一层调用一层，如果都在同一层写那么前端项目就会很乱，如果是开发小型项目可以用直接把代码写在一层</p>
<p>比如如下，这样get后面的url地址可以分离到api模块中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">"http://localhost:8080"</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">	res.data.....</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>创建文件 src/api/teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="comment">// @会使用guli_admin/src/utils/request.js中定义的 process.env.BASE_API (api 的 base_url)</span></span><br><span class="line">  list() &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      url: <span class="string">'/admin/edu/teacher/list'</span>,</span><br><span class="line">      method: <span class="string">'get'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、定义页面组件脚本"><a href="#3、定义页面组件脚本" class="headerlink" title="3、定义页面组件脚本"></a><strong>3、定义页面组件脚本</strong></h5><p>src/views/teacher/list.vue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> teacherApi <span class="keyword">from</span> <span class="string">'../../api/teacher'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      teacherList: [], <span class="comment">// 讲师列表</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    fetchData() &#123;</span><br><span class="line">      teacherApi.list().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.teacherList = res.data.items</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、定义页面组件模板"><a href="#4、定义页面组件模板" class="headerlink" title="4、定义页面组件模板"></a><strong>4、定义页面组件模板</strong></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">"list"</span> <span class="attr">border</span> <span class="attr">stripe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">"index"</span> <span class="attr">width</span>=<span class="string">"50"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"name"</span> <span class="attr">label</span>=<span class="string">"名称"</span> <span class="attr">width</span>=<span class="string">"80"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">"头衔"</span> <span class="attr">width</span>=<span class="string">"90"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">v-if</span>=<span class="string">"scope.row.level === 1"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>高级讲师<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">v-if</span>=<span class="string">"scope.row.level === 2"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>首席讲师<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"intro"</span> <span class="attr">label</span>=<span class="string">"简介"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"sort"</span> <span class="attr">label</span>=<span class="string">"排序"</span> <span class="attr">width</span>=<span class="string">"60"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"joinDate"</span> <span class="attr">label</span>=<span class="string">"入驻时间"</span> <span class="attr">width</span>=<span class="string">"160"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="二、项目执行流程"><a href="#二、项目执行流程" class="headerlink" title="二、项目执行流程"></a>二、项目执行流程</h4><p>1、页面加载流程</p>
<p><a href="https://imgse.com/i/pS3FfsJ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/17/pS3FfsJ.png" alt="pS3FfsJ.png"></a></p>
<h5 id="2、页面渲染流程"><a href="#2、页面渲染流程" class="headerlink" title="2、页面渲染流程"></a><strong>2、页面渲染流程</strong></h5><p><a href="https://imgse.com/i/pS3F5ZR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/17/pS3F5ZR.png" alt="pS3F5ZR.png"></a></p>
<h3 id="02-分页列表组件"><a href="#02-分页列表组件" class="headerlink" title="02-分页列表组件"></a>02-分页列表组件</h3><h4 id="一、分页查询"><a href="#一、分页查询" class="headerlink" title="一、分页查询"></a>一、分页查询</h4><h5 id="1、定义api模块"><a href="#1、定义api模块" class="headerlink" title="1、定义api模块"></a>1、定义api模块</h5><p>src/api/teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pageList(page, limit, searchObj) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/admin/edu/teacher/list/<span class="subst">$&#123;page&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">        method: <span class="string">'get'</span>,</span><br><span class="line">	    params: searchObj</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、定义页面组件脚本"><a href="#2、定义页面组件脚本" class="headerlink" title="2、定义页面组件脚本"></a>2、定义页面组件脚本</h5><p>src/views/teacher/list.vue，完善data定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      teacherList: [], <span class="comment">// 讲师列表</span></span><br><span class="line">      total: <span class="number">0</span>, <span class="comment">// 总记录数</span></span><br><span class="line">      page: <span class="number">1</span>, <span class="comment">// 页码</span></span><br><span class="line">      limit: <span class="number">5</span>, <span class="comment">// 每页记录数</span></span><br><span class="line">      searchObj: &#123;</span><br><span class="line">        name: <span class="string">''</span>,</span><br><span class="line">        level: <span class="string">''</span>,</span><br><span class="line">        joinDateBegin: <span class="string">''</span>,</span><br><span class="line">        joinDateEnd: <span class="string">''</span></span><br><span class="line">      &#125;, <span class="comment">// 查询表单</span></span><br></pre></td></tr></table></figure>

<p>修改fetchData方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    fetchData() &#123;</span><br><span class="line">      teacherApi.pageList(<span class="keyword">this</span>.page, <span class="keyword">this</span>.limit, <span class="keyword">this</span>.searchObj).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 此处本来应该是返回respond.data.data.items的,因为数据定义的是data.data.items里面才有数据库的数据</span></span><br><span class="line">        <span class="comment">// 但是前端有个响应拦截器，当后端返回值为20000时才是正确，前端返回了respond.data，于是这里应该是res.data.items</span></span><br><span class="line">        <span class="keyword">this</span>.teacherList = res.data.rows</span><br><span class="line">        <span class="keyword">this</span>.total = res.data.total</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h5 id="3、定义页面组件模板"><a href="#3、定义页面组件模板" class="headerlink" title="3、定义页面组件模板"></a>3、定义页面组件模板</h5><p>在table组件下面添加分页组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:current-page</span>=<span class="string">"page"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:total</span>=<span class="string">"total"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:page-size</span>=<span class="string">"limit"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:page-sizes</span>=<span class="string">"[5,10,15,20]"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"margin-top: 10px"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">layout</span>=<span class="string">"prev, pager, next,sizes,jumper,-&gt;,total"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">current-change</span>=<span class="string">"changeCurrentPage"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">size-change</span>=<span class="string">"changePageSize"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4、改变每页条数"><a href="#4、改变每页条数" class="headerlink" title="4、改变每页条数"></a><strong>4、改变每页条数</strong></h5><p>为<code>&lt;el-pagination&gt;</code>组件注册事件</p>
<p><code>@size-change=&quot;changePageSize&quot;</code></p>
<p>定义事件脚本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 改变每页记录数</span></span><br><span class="line">    changePageSize(size) &#123;</span><br><span class="line">      <span class="keyword">this</span>.limit = size</span><br><span class="line">      <span class="keyword">this</span>.fetchData()</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>每次点击进入新的页面的时候都要刷新，不然只有第一页的数据</p>
</blockquote>
<h5 id="5、翻页"><a href="#5、翻页" class="headerlink" title="5、翻页"></a>5、翻页</h5><p>为<code>&lt;el-pagination&gt;</code>组件注册事件</p>
<p><code>@current-change=&quot;changeCurrentPage&quot;</code></p>
<p>定义事件脚本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">changeCurrentPage(page) &#123;</span><br><span class="line">      <span class="comment">//console.log(page)</span></span><br><span class="line">      <span class="keyword">this</span>.page = page</span><br><span class="line">      <span class="keyword">this</span>.fetchData()</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>同理都需要刷新</p>
</blockquote>
<h5 id="6、序号列"><a href="#6、序号列" class="headerlink" title="6、序号列"></a>6、序号列</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">  <span class="attr">label</span>=<span class="string">"#"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">width</span>=<span class="string">"50"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">    &#123;&#123; (page - 1) * limit + scope.$index + 1 &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><a href="https://imgse.com/i/pS3AiA1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/17/pS3AiA1.png" alt="pS3AiA1.png"></a></p>
<h5 id="7、查询表单"><a href="#7、查询表单" class="headerlink" title="7、查询表单"></a>7、查询表单</h5><p>在table组件上面添加查询表单</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">"teacherList"</span> <span class="attr">border</span> <span class="attr">stripe</span> @<span class="attr">selection-change</span>=<span class="string">"handleSelectionChange"</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"name"</span> <span class="attr">label</span>=<span class="string">"复选框"</span> <span class="attr">width</span>=<span class="string">"40"</span> <span class="attr">type</span>=<span class="string">"selection"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">"#"</span> <span class="attr">width</span>=<span class="string">"50"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          &#123;&#123; (page-1)*limit + scope.$index + 1 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"name"</span> <span class="attr">label</span>=<span class="string">"名称"</span> <span class="attr">width</span>=<span class="string">"80"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">"头衔"</span> <span class="attr">width</span>=<span class="string">"90"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">v-if</span>=<span class="string">"scope.row.level === 1"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>高级讲师<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">v-if</span>=<span class="string">"scope.row.level === 2"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>首席讲师<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"intro"</span> <span class="attr">label</span>=<span class="string">"简介"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"sort"</span> <span class="attr">label</span>=<span class="string">"排序"</span> <span class="attr">width</span>=<span class="string">"60"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">"joinDate"</span> <span class="attr">label</span>=<span class="string">"入驻时间"</span> <span class="attr">width</span>=<span class="string">"160"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">"操作"</span> <span class="attr">width</span>=<span class="string">"230"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"success"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">"modify(scope.row)"</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"danger"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">"removeById(scope.row.id)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"'/teacher/edit/'+ scope.row.id"</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">style</span>=<span class="string">"margin-left:10px"</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>重置表单脚本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重置表单</span></span><br><span class="line">resetData() &#123;</span><br><span class="line">    <span class="keyword">this</span>.searchObj = &#123;&#125;</span><br><span class="line">    <span class="keyword">this</span>.fetchData()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、数据删除"><a href="#二、数据删除" class="headerlink" title="二、数据删除"></a>二、数据删除</h4><h5 id="1、定义api模块-1"><a href="#1、定义api模块-1" class="headerlink" title="1、定义api模块"></a>1、定义api模块</h5><p>src/api/teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">removeById(id) &#123;</span><br><span class="line">   <span class="keyword">return</span> request(&#123;</span><br><span class="line">     url: <span class="string">`/admin/edu/teacher/remove/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">     method: <span class="string">'delete'</span></span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<h5 id="2、定义页面组件模板"><a href="#2、定义页面组件模板" class="headerlink" title="2、定义页面组件模板"></a>2、定义页面组件模板</h5><p>在table组件中添加删除列</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">"操作"</span> <span class="attr">width</span>=<span class="string">"230"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"success"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">"modify(scope.row)"</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"danger"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">"removeById(scope.row.id)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"'/teacher/edit/'+ scope.row.id"</span> &gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">style</span>=<span class="string">"margin-left:10px"</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3、定义页面组件模板-1"><a href="#3、定义页面组件模板-1" class="headerlink" title="3、定义页面组件模板"></a>3、定义页面组件模板</h5><p>src/views/teacher/form.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--查询表单--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:inline</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;el-input v-model="searchObj.name" placeholder="讲师"/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-autocomplete</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">"searchObj.name"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:fetch-suggestions</span>=<span class="string">"querySearch"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:trigger-on-focus</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"inline-input"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">placeholder</span>=<span class="string">"讲师"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value-key</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">select</span>=<span class="string">"handleSelect"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">"searchObj.level"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"头衔"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">label</span>=<span class="string">"高级讲师"</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">label</span>=<span class="string">"首席讲师"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"入驻时间"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">"searchObj.joinDateBegin"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"开始时间"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">value-format</span>=<span class="string">"yyyy-MM-dd"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"-"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">"searchObj.joinDateEnd"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"结束时间"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">value-format</span>=<span class="string">"yyyy-MM-dd"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-search"</span> @<span class="attr">click</span>=<span class="string">"fetchData()"</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"default"</span> @<span class="attr">click</span>=<span class="string">"resetData()"</span>&gt;</span>清空<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="三、axios响应拦截器"><a href="#三、axios响应拦截器" class="headerlink" title="三、axios响应拦截器"></a>三、axios响应拦截器</h4><h5 id="1、关于code-20000"><a href="#1、关于code-20000" class="headerlink" title="1、关于code===20000"></a>1、关于code===20000</h5><p>code!==20000的响应会被拦截，并转到 error=&gt;{} 处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (res.code !== <span class="number">20000</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'error'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、关于response"><a href="#2、关于response" class="headerlink" title="2、关于response"></a>2、关于response</h5><p>code===20000时放行，前端页面接收到response.data的值，而不是response</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (res.code !== <span class="number">20000</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'error'</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> response.data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、关于error"><a href="#3、关于error" class="headerlink" title="3、关于error"></a>3、关于error</h5><p>统一处理错误结果，显示错误消息</p>
<h3 id="03-表单组件"><a href="#03-表单组件" class="headerlink" title="03-表单组件"></a>03-表单组件</h3><h5 id="一、新增讲师"><a href="#一、新增讲师" class="headerlink" title="一、新增讲师"></a>一、新增讲师</h5><p><img src="https://s1.ax1x.com/2023/01/17/pS3ElqJ.png" alt="pS3ElqJ.png"></p>
<h5 id="1、定义api模块-2"><a href="#1、定义api模块-2" class="headerlink" title="1、定义api模块"></a>1、定义api模块</h5><p> src/api/teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">save(teacher) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      url: <span class="string">'/admin/edu/teacher/save'</span>,</span><br><span class="line">      method: <span class="string">'post'</span>,</span><br><span class="line">      data: teacher</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h5 id="2、定义页面组件脚本-1"><a href="#2、定义页面组件脚本-1" class="headerlink" title="2、定义页面组件脚本"></a>2、定义页面组件脚本</h5><p>src/views/teacher/form.vue，完善data定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 讲师对象</span></span><br><span class="line">      teacher: &#123;</span><br><span class="line">        sort: <span class="number">0</span>,</span><br><span class="line">        level: <span class="number">1</span>,</span><br><span class="line">        avatar: <span class="string">''</span></span><br><span class="line">      &#125;,</span><br><span class="line">      saveBtnDisabled: <span class="literal">false</span> <span class="comment">// 默认按钮可用,防止表单重复提交</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、定义页面组件模板-2"><a href="#3、定义页面组件模板-2" class="headerlink" title="3、定义页面组件模板"></a>3、定义页面组件模板</h5><p>src/views/teacher/form.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 输入表单 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">"120px"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"讲师名称"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"teacher.name"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"入驻时间"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-date-picker</span> <span class="attr">v-model</span>=<span class="string">"teacher.joinDate"</span> <span class="attr">value-format</span>=<span class="string">"yyyy-MM-dd"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"讲师排序"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">"teacher.sort"</span> <span class="attr">:min</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"讲师头衔"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">"teacher.level"</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">           数据类型一定要和取出的json中的一致，否则没法回填</span></span><br><span class="line"><span class="comment">           因此，这里value使用动态绑定的值，保证其数据类型是number</span></span><br><span class="line"><span class="comment">           --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:value</span>=<span class="string">"1"</span> <span class="attr">label</span>=<span class="string">"高级讲师"</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:value</span>=<span class="string">"2"</span> <span class="attr">label</span>=<span class="string">"首席讲师"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"讲师资历"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"teacher.career"</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"讲师简介"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"teacher.intro"</span> <span class="attr">:rows</span>=<span class="string">"10"</span> <span class="attr">type</span>=<span class="string">"textarea"</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- 讲师头像：TODO --&gt;</span></span><br><span class="line">     </span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="4、实现新增功能"><a href="#4、实现新增功能" class="headerlink" title="4、实现新增功能"></a>4、实现新增功能</h5><p>src/views/teacher/form.vue，引入teacher api模块：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> teacherApi <span class="keyword">from</span> <span class="string">'@/api/teacher'</span></span><br></pre></td></tr></table></figure>

<p>定义保存方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    saveOrUpdate() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.teacher)</span><br><span class="line">      <span class="keyword">this</span>.saveBtnDisabled = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.teacher.id) &#123;</span><br><span class="line">        <span class="keyword">this</span>.updateData()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="keyword">this</span>.saveData() &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    saveData() &#123;</span><br><span class="line">      teacherApi.save(<span class="keyword">this</span>.teacher).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 弹出成功提示</span></span><br><span class="line">        <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">          message: res.message,</span><br><span class="line">          type: <span class="string">'success'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">'/teacher/list'</span> &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、显示讲师信息"><a href="#二、显示讲师信息" class="headerlink" title="二、显示讲师信息"></a>二、显示讲师信息</h4><h5 id="1、定义api模块-3"><a href="#1、定义api模块-3" class="headerlink" title="1、定义api模块"></a>1、定义api模块</h5><p> src/api/teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用于回先数据</span></span><br><span class="line">  getById(id) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      url: <span class="string">`/admin/edu/teacher/get/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">      method: <span class="string">'get'</span></span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h5 id="2、定义页面组件脚本-2"><a href="#2、定义页面组件脚本-2" class="headerlink" title="2、定义页面组件脚本"></a>2、定义页面组件脚本</h5><p>src/views/teacher/form.vue，methods中定义回显方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fetchDataById(id) &#123;</span><br><span class="line">      teacherApi.getById(id).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.teacher = res.data.item</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>页面渲染成功后获取数据</p>
<p>因为已在路由中定义如下内容：path: ‘edit/:id’，因此可以使用 this.$route.params.id 获取路由中的id</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.$route.params.id) &#123;</span><br><span class="line">    	<span class="keyword">this</span>.fetchDataById(<span class="keyword">this</span>.$route.params.id)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h5 id="3、定义页面组件模板-3"><a href="#3、定义页面组件模板-3" class="headerlink" title="3、定义页面组件模板"></a>3、定义页面组件模板</h5><p>src/views/teacher/list.vue，表格“操作”列中增加“修改”按钮</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=<span class="string">"'/teacher/edit/'+scope.row.id"</span>&gt;</span><br><span class="line">    &lt;el-button type=<span class="string">"primary"</span> size=<span class="string">"mini"</span> icon=<span class="string">"el-icon-edit"</span>&gt;修改&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>router-link&gt;</span><br></pre></td></tr></table></figure>

<h4 id="三、更新讲师"><a href="#三、更新讲师" class="headerlink" title="三、更新讲师"></a>三、更新讲师</h4><h5 id="1、定义api模块-4"><a href="#1、定义api模块-4" class="headerlink" title="1、定义api模块"></a>1、定义api模块</h5><p> src/api/teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">updateById(teacher) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/admin/edu/teacher/update'</span>,</span><br><span class="line">        method: <span class="string">'put'</span>,</span><br><span class="line">        data: teacher</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、定义页面组件脚本-3"><a href="#2、定义页面组件脚本-3" class="headerlink" title="2、定义页面组件脚本"></a>2、定义页面组件脚本</h5><p>src/views/teacher/form.vue，methods中定义updateData</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">updateData() &#123;</span><br><span class="line">      teacherApi.updateById(<span class="keyword">this</span>.teacher).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 弹出成功提示</span></span><br><span class="line">        <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">          message: res.message,</span><br><span class="line">          type: <span class="string">'success'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">'/teacher/list'</span> &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>完善saveOrUpdate方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">saveOrUpdate() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.teacher)</span><br><span class="line">    <span class="keyword">this</span>.saveBtnDisabled = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.teacher.id) &#123;</span><br><span class="line">    	<span class="keyword">this</span>.updateData()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">    	<span class="keyword">this</span>.saveData() </span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="四、组件重用问题"><a href="#四、组件重用问题" class="headerlink" title="四、组件重用问题"></a>四、组件重用问题</h4><p><strong>问题：</strong>vue-router导航切换 时，如果两个路由都渲染同个组件，</p>
<p>组件的生命周期方法（created或者mounted）不会再被调用, 组件会被重用，显示上一个路由渲染出来的自建</p>
<p><strong>解决方案：</strong>可以简单的在 router-view上加上一个唯一的key，来保证路由切换时都会重新触发生命周期方法，确保组件被重新初始化。</p>
<p>修改 <strong>src/views/layout/components/AppMain.vue</strong> 文件如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">:key</span>=<span class="string">"key"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    key() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.$route.name !== <span class="literal">undefined</span>? <span class="keyword">this</span>.$route.name + +<span class="keyword">new</span> <span class="built_in">Date</span>(): <span class="keyword">this</span>.$route + +<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="04-计算组件"><a href="#04-计算组件" class="headerlink" title="04-计算组件"></a>04-计算组件</h3><h4 id="计算属性缓存-vs-方法"><a href="#计算属性缓存-vs-方法" class="headerlink" title="计算属性缓存 vs 方法"></a><a href="https://cn.vuejs.org/v2/guide/computed.html#计算属性缓存-vs-方法" target="_blank" rel="noopener"><strong>计算属性缓存 vs 方法</strong></a></h4><p>看起来计算属性和方法能完成相同的功能，那么他们有什么区别呢？</p>
<ul>
<li><strong>计算属性基于缓存：</strong>在相关依赖发生改变时它们才会重新求值。</li>
<li><strong>方法将总会再次执行</strong></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>原始值:&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>反转字符串：&#123;&#123;message.split('').reverse().join('')&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用方法1反转字符串：&#123;&#123; reversed() &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用方法2反转字符串：&#123;&#123; reversed() &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用计算属性1反转字符串：&#123;&#123; reverseMessage &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用计算属性2反转字符串：&#123;&#123; reverseMessage &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el: <span class="string">'#app'</span>,</span></span><br><span class="line">            data () &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                    message:<span class="string">'hello'</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                reversed()&#123;</span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">'方法'</span>);</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="keyword">this</span>.message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            computed: &#123;</span><br><span class="line">                reverseMessage()&#123;</span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">'计算属性'</span>);</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="keyword">this</span>.message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="05-关于Vue组件"><a href="#05-关于Vue组件" class="headerlink" title="05-关于Vue组件"></a>05-关于Vue组件</h3><h4 id="一、什么是组件"><a href="#一、什么是组件" class="headerlink" title="一、什么是组件"></a>一、什么是组件</h4><p>组件（Component）是 Vue.js 最强大的功能之一。</p>
<p>组件可以扩展 HTML 元素，封装可重用的代码。</p>
<p>组件系统让我们可以用独立可复用的小组件来构建大型应用，几乎任意类型的应用界面都可以抽象为一个组件树：</p>
<p><a href="https://imgse.com/i/pS3D481" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3D481.png" alt="pS3D481.png" border="0" /></a></p>
<h4 id="二、前端项目组件分析"><a href="#二、前端项目组件分析" class="headerlink" title="二、前端项目组件分析"></a>二、前端项目组件分析</h4><p>1、三要素</p>
<ul>
<li>入口js：src/main.js</li>
<li>入口页面：src/App.vue</li>
<li>路由：src/router/index.js</li>
</ul>
<p>main.js 中引入了App.vue和 router/index.js，根据路由配置，App.vue中会显示相应的页面内容</p>
<h5 id="2、入口文件"><a href="#2、入口文件" class="headerlink" title="2、入口文件"></a>2、入口文件</h5><p>src/main.js</p>
<p><a href="https://imgse.com/i/pS3DHbD" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3DHbD.png" alt="pS3DHbD.png"></a></p>
<h5 id="3、主页面模块"><a href="#3、主页面模块" class="headerlink" title="3、主页面模块"></a>3、主页面模块</h5><p>src/App.vue</p>
<p><a href="https://imgse.com/i/pS3DLUH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3DLUH.png" alt="pS3DLUH.png" border="0" /></a></p>
<h5 id="4、路由模块"><a href="#4、路由模块" class="headerlink" title="4、路由模块"></a>4、路由模块</h5><p>src/router/index.js</p>
<p><a href="https://imgse.com/i/pS3DjPA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3DjPA.png" alt="pS3DjPA.png"></a></p>
<h5 id="5、登录页面组件"><a href="#5、登录页面组件" class="headerlink" title="5、登录页面组件"></a>5、登录页面组件</h5><p><a href="https://imgse.com/i/pS3riVg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3riVg.png" alt="pS3riVg.png"></a></p>
<h4 id="三、前端项目布局分析"><a href="#三、前端项目布局分析" class="headerlink" title="三、前端项目布局分析"></a>三、前端项目布局分析</h4><h5 id="1、路由模块"><a href="#1、路由模块" class="headerlink" title="1、路由模块"></a>1、路由模块</h5><p>src/router/index.js</p>
<p><a href="https://imgse.com/i/pS3r9r8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3r9r8.png" alt="pS3r9r8.png"></a></p>
<h5 id="2、布局模块"><a href="#2、布局模块" class="headerlink" title="2、布局模块"></a>2、布局模块</h5><p>src/views/layout/Layout.vue</p>
<p><a href="https://imgse.com/i/pS3s7Ae" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3s7Ae.png" alt="pS3s7Ae.png"></a></p>
<h5 id="3、核心内容区域"><a href="#3、核心内容区域" class="headerlink" title="3、核心内容区域"></a>3、核心内容区域</h5><p>src/views/layout/components/AppMain.vue</p>
<p><a href="https://imgse.com/i/pS3sf6x" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3sf6x.png" alt="pS3sf6x.png"></a></p>
<h5 id="4、讲师列表页面组件"><a href="#4、讲师列表页面组件" class="headerlink" title="4、讲师列表页面组件"></a>4、讲师列表页面组件</h5><p><a href="https://imgse.com/i/pS3sgh9" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3sgh9.png" alt="pS3sgh9.png"></a></p>
<h2 id="day6"><a href="#day6" class="headerlink" title="day6"></a>day6</h2><h3 id="OSS服务"><a href="#OSS服务" class="headerlink" title="OSS服务"></a>OSS服务</h3><blockquote>
<p>为了解决海量数据存储与弹性扩容，项目中我们采用云存储的解决方案- 阿里云OSS。 </p>
</blockquote>
<h4 id="一、开通“对象存储OSS”服务"><a href="#一、开通“对象存储OSS”服务" class="headerlink" title="一、开通“对象存储OSS”服务"></a>一、开通“对象存储OSS”服务</h4><h5 id="1、申请阿里云账号"><a href="#1、申请阿里云账号" class="headerlink" title="1、申请阿里云账号"></a>1、申请阿里云账号</h5><h5 id="2、实名认证"><a href="#2、实名认证" class="headerlink" title="2、实名认证"></a>2、实名认证</h5><h5 id="3、开通“对象存储OSS”服务"><a href="#3、开通“对象存储OSS”服务" class="headerlink" title="3、开通“对象存储OSS”服务"></a>3、开通“对象存储OSS”服务</h5><h5 id="4、进入管理控制台"><a href="#4、进入管理控制台" class="headerlink" title="4、进入管理控制台"></a>4、进入管理控制台</h5><h4 id="二、控制台使用"><a href="#二、控制台使用" class="headerlink" title="二、控制台使用"></a>二、控制台使用</h4><h5 id="1、创建Bucket"><a href="#1、创建Bucket" class="headerlink" title="1、创建Bucket"></a>1、创建Bucket</h5><p>命名：guli-file</p>
<p>读写权限：公共读</p>
<h5 id="2、上传默认头像"><a href="#2、上传默认头像" class="headerlink" title="2、上传默认头像"></a>2、上传默认头像</h5><p>创建文件夹avatar，上传默认的用户头像 me.jpg</p>
<p><a href="https://imgse.com/i/pS36iVO" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS36iVO.png" alt="pS36iVO.png"></a></p>
<h4 id="三、使用RAM子用户"><a href="#三、使用RAM子用户" class="headerlink" title="三、使用RAM子用户"></a>三、使用RAM子用户</h4><h5 id="1、进入子用户管理页面"><a href="#1、进入子用户管理页面" class="headerlink" title="1、进入子用户管理页面"></a>1、进入子用户管理页面</h5><p><a href="https://imgse.com/i/pS36Kqf" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS36Kqf.png" alt="pS36Kqf.png"></a></p>
<h5 id="2、添加用户"><a href="#2、添加用户" class="headerlink" title="2、添加用户"></a>2、添加用户</h5><h5 id="3、获取子用户key"><a href="#3、获取子用户key" class="headerlink" title="3、获取子用户key"></a>3、获取子用户key</h5><p>AccessKeyId, AccessKeySecret</p>
<h5 id="4、设置用户权限"><a href="#4、设置用户权限" class="headerlink" title="4、设置用户权限"></a>4、设置用户权限</h5><p>AliyunOSSFullAccess</p>
<p><a href="https://imgse.com/i/pS36wZT" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS36wZT.png" alt="pS36wZT.png" border="0" /></a></p>
<h4 id="四、使用SDK"><a href="#四、使用SDK" class="headerlink" title="四、使用SDK"></a><strong>四、使用SDK</strong></h4><p>在OSS的概览页右下角找到“Bucket管理”，点击“OSS学习路径”</p>
<h4 id="五、创建测试项目"><a href="#五、创建测试项目" class="headerlink" title="五、创建测试项目"></a>五、创建测试项目</h4><h5 id="1、创建Maven项目"><a href="#1、创建Maven项目" class="headerlink" title="1、创建Maven项目"></a>1、创建Maven项目</h5><p>com.atguigu</p>
<p>aliyun_oss</p>
<h5 id="2、配置pom"><a href="#2、配置pom" class="headerlink" title="2、配置pom"></a>2、配置pom</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--aliyunOSS--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3、确认常量"><a href="#3、确认常量" class="headerlink" title="3、确认常量"></a>3、确认常量</h5><p>（1）endpoint（外网访问）：选择某一个bucket，在bucket主页面查找</p>
<p>（2）bucketName</p>
<p>（3）accessKeyId</p>
<p>（4）accessKeySecret</p>
<h4 id="六、测试用例"><a href="#六、测试用例" class="headerlink" title="六、测试用例"></a>六、测试用例</h4><h5 id="1、创建Bucket-1"><a href="#1、创建Bucket-1" class="headerlink" title="1、创建Bucket"></a>1、创建Bucket</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.oss.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.CannedAccessControlList;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.oss.service.FileService;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.oss.util.OssProperties;</span><br><span class="line"><span class="keyword">import</span> org.joda.time.DateTime;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/16 21:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileServiceImpl</span> <span class="keyword">implements</span> <span class="title">FileService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OssProperties ossProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(InputStream inputStream, String <span class="keyword">module</span>, String originalFilename)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//读取配置文件</span></span><br><span class="line">        String endpoint = ossProperties.getEndpoint();</span><br><span class="line">        String keyid = ossProperties.getKeyid();</span><br><span class="line">        String keysecrect = ossProperties.getKeysecrect();</span><br><span class="line">        String bucketname = ossProperties.getBucketname();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">        OSS ossClient = <span class="keyword">new</span> OSSClientBuilder().build(endpoint, keyid, keysecrect);</span><br><span class="line">        <span class="comment">//如果bucket不存在</span></span><br><span class="line">        <span class="keyword">if</span> (!ossClient.doesBucketExist(bucketname))&#123;</span><br><span class="line">            <span class="comment">//则创建</span></span><br><span class="line">            ossClient.createBucket(bucketname);</span><br><span class="line">            ossClient.setBucketAcl(bucketname, CannedAccessControlList.PublicRead);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//构建objectName：文件路径 avatar/2023/01/16/me.jpg</span></span><br><span class="line">        String folder = <span class="keyword">new</span> DateTime().toString(<span class="string">"yyyy/MM/dd"</span>);</span><br><span class="line">        String fileName = UUID.randomUUID().toString();</span><br><span class="line">        String fileExtension = originalFilename.substring(originalFilename.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">        String key = <span class="keyword">module</span> +<span class="string">"/"</span> + folder + <span class="string">"/"</span> + fileName + fileExtension;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 后面要对文件上传错误进行处理，此处捕获了异常但是知识打印了一句话，导致前台获取到了数据但是实际上是没有数据的，即使前台显示成功，但是阿里云上依旧是没有数据的</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/*try &#123;</span></span><br><span class="line"><span class="comment">            // 创建PutObjectRequest对象。</span></span><br><span class="line"><span class="comment">            PutObjectRequest putObjectRequest = new PutObjectRequest(bucketname, key, inputStream);</span></span><br><span class="line"><span class="comment">            // 设置该属性可以返回response。如果不设置，则返回的response为空。</span></span><br><span class="line"><span class="comment">            //putObjectRequest.setProcess("true");</span></span><br><span class="line"><span class="comment">            // 创建PutObject请求。</span></span><br><span class="line"><span class="comment">            PutObjectResult result = ossClient.putObject(putObjectRequest);</span></span><br><span class="line"><span class="comment">            // 如果上传成功，则返回200。</span></span><br><span class="line"><span class="comment">            //System.out.println(result.getResponse().getStatusCode());</span></span><br><span class="line"><span class="comment">        &#125; catch (OSSException oe) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println("Caught an OSSException, which means your request made it to OSS, "</span></span><br><span class="line"><span class="comment">                    + "but was rejected with an error response for some reason.");</span></span><br><span class="line"><span class="comment">            System.out.println("Error Message:" + oe.getErrorMessage());</span></span><br><span class="line"><span class="comment">            System.out.println("Error Code:" + oe.getErrorCode());</span></span><br><span class="line"><span class="comment">            System.out.println("Request ID:" + oe.getRequestId());</span></span><br><span class="line"><span class="comment">            System.out.println("Host ID:" + oe.getHostId());</span></span><br><span class="line"><span class="comment">        &#125; catch (ClientException ce) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println("Caught an ClientException, which means the client encountered "</span></span><br><span class="line"><span class="comment">                    + "a serious internal problem while trying to communicate with OSS, "</span></span><br><span class="line"><span class="comment">                    + "such as not being able to access the network.");</span></span><br><span class="line"><span class="comment">            System.out.println("Error Message:" + ce.getMessage());</span></span><br><span class="line"><span class="comment">        &#125; finally &#123;</span></span><br><span class="line"><span class="comment">            if (ossClient != null) &#123;</span></span><br><span class="line"><span class="comment">                ossClient.shutdown();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        ossClient.putObject(bucketname,key,inputStream);</span><br><span class="line">        ossClient.shutdown();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回url</span></span><br><span class="line">        <span class="comment">//https://guli-file-zwz.oss-cn-hangzhou.aliyuncs.com/avatar/me.jpg</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"https://"</span> + bucketname + <span class="string">"."</span> + endpoint + <span class="string">"/"</span> + key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、判断bucket是否存在"><a href="#2、判断bucket是否存在" class="headerlink" title="2、判断bucket是否存在"></a>2、判断bucket是否存在</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testExist</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">    OSS ossClient = <span class="keyword">new</span> OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">    <span class="keyword">boolean</span> exists = ossClient.doesBucketExist(bucketName);</span><br><span class="line">    System.out.println(exists);</span><br><span class="line">    <span class="comment">// 关闭OSSClient。</span></span><br><span class="line">    ossClient.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、设置bucket访问权限"><a href="#3、设置bucket访问权限" class="headerlink" title="3、设置bucket访问权限"></a>3、设置bucket访问权限</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAccessControl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">    OSS ossClient = <span class="keyword">new</span> OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">    <span class="comment">// 设置存储空间的访问权限为：公共读。</span></span><br><span class="line">    ossClient.setBucketAcl(bucketName, CannedAccessControlList.PublicRead);</span><br><span class="line">    <span class="comment">// 关闭OSSClient。</span></span><br><span class="line">    ossClient.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="正式开始项目"><a href="#正式开始项目" class="headerlink" title="正式开始项目"></a>正式开始项目</h3><h4 id="一、加入OSS微服务"><a href="#一、加入OSS微服务" class="headerlink" title="一、加入OSS微服务"></a>一、加入OSS微服务</h4><h5 id="1、创建模块"><a href="#1、创建模块" class="headerlink" title="1、创建模块"></a>1、创建模块</h5><p>Artifact：service_oss</p>
<h5 id="2、配置pom-xml"><a href="#2、配置pom-xml" class="headerlink" title="2、配置pom.xml"></a>2、配置pom.xml</h5><p>检查一下guli_parent中的aliyun-sdk-oss的版本，切换到3.8.0</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--aliyunOSS--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3、配置application-yml"><a href="#3、配置application-yml" class="headerlink" title="3、配置application.yml"></a>3、配置application.yml</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8120</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#环境设置</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">service-oss</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aliyun:</span></span><br><span class="line">  <span class="attr">oss:</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">oss-cn-hangzhou.aliyuncs.com</span></span><br><span class="line">    <span class="attr">keyid:</span> <span class="string">LTAI5tETSdYmk2AxVQDNWvst</span></span><br><span class="line">    <span class="attr">keysecrect:</span> <span class="string">fq6gqW2ZdF9aWDVZhJy7qUErplXakw</span></span><br><span class="line">    <span class="attr">bucketname:</span> <span class="string">guli-file-zwz</span></span><br></pre></td></tr></table></figure>

<h5 id="4、logback-spring-xml"><a href="#4、logback-spring-xml" class="headerlink" title="4、logback-spring.xml"></a>4、logback-spring.xml</h5><p>修改日志路径为 guli_log/oss</p>
<p><a href="https://imgse.com/i/pS3oHqH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3oHqH.png" alt="pS3oHqH.png"></a></p>
<h5 id="5、创建启动类"><a href="#5、创建启动类" class="headerlink" title="5、创建启动类"></a>5、创建启动类</h5><p>创建ServiceOssApplication.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.oss;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/16 20:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//取消数据源自动配置，如果不取消则会导致该服务自动配置数据源导致启动失败。</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span>(exclude = DataSourceAutoConfiguration<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">ComponentScan</span>(</span>&#123;<span class="string">"com.zwz.guli"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceOssApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ServiceOssApplication<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="6、启动项目"><a href="#6、启动项目" class="headerlink" title="6、启动项目"></a>6、启动项目</h5><p>测试项目初始化是否成功，报告如下错误</p>
<p><a href="https://imgse.com/i/pS3THpV" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3THpV.png" alt="pS3THpV.png"></a></p>
<p><strong>原因：</strong>jdbc依赖引入项目后，springboot的自动配置试图在配置文件中查找jdbc相关配置</p>
<p><strong>解决方案：</strong>主类上添加注解exclude属性，禁用jdbc自动配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span>(exclude = DataSourceAutoConfiguration<span class="class">.<span class="keyword">class</span>)//取消数据源自动配置</span></span><br></pre></td></tr></table></figure>



<h4 id="二、实现文件上传"><a href="#二、实现文件上传" class="headerlink" title="二、实现文件上传"></a>二、实现文件上传</h4><h5 id="1、从配置文件读取常量"><a href="#1、从配置文件读取常量" class="headerlink" title="1、从配置文件读取常量"></a>1、从配置文件读取常量</h5><p>创建常量读取工具类：OssProperties.java</p>
<p><a href="https://imgse.com/i/pS3TzkR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3TzkR.png" alt="pS3TzkR.png"></a></p>
<h5 id="2、文件上传业务"><a href="#2、文件上传业务" class="headerlink" title="2、文件上传业务"></a>2、文件上传业务</h5><p>创建Service接口：FileService.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.oss.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/16 21:11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FileService</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 阿里云Oss文件上传</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputStream 输入流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> module 文件夹名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> originalFilename 原始文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 文件在oss服务器上的url地址</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">upload</span><span class="params">(InputStream inputStream,String <span class="keyword">module</span>,String originalFilename)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现：FileServiceImpl.java</p>
<p>参考SDK中的：Java-&gt;上传文件-&gt;简单上传-&gt;流式上传-&gt;上传文件流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.oss.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.CannedAccessControlList;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.oss.service.FileService;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.oss.util.OssProperties;</span><br><span class="line"><span class="keyword">import</span> org.joda.time.DateTime;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/16 21:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileServiceImpl</span> <span class="keyword">implements</span> <span class="title">FileService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OssProperties ossProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(InputStream inputStream, String <span class="keyword">module</span>, String originalFilename)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//读取配置文件</span></span><br><span class="line">        String endpoint = ossProperties.getEndpoint();</span><br><span class="line">        String keyid = ossProperties.getKeyid();</span><br><span class="line">        String keysecrect = ossProperties.getKeysecrect();</span><br><span class="line">        String bucketname = ossProperties.getBucketname();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">        OSS ossClient = <span class="keyword">new</span> OSSClientBuilder().build(endpoint, keyid, keysecrect);</span><br><span class="line">        <span class="comment">//如果bucket不存在</span></span><br><span class="line">        <span class="keyword">if</span> (!ossClient.doesBucketExist(bucketname))&#123;</span><br><span class="line">            <span class="comment">//则创建</span></span><br><span class="line">            ossClient.createBucket(bucketname);</span><br><span class="line">            ossClient.setBucketAcl(bucketname, CannedAccessControlList.PublicRead);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//构建objectName：文件路径 avatar/2023/01/16/me.jpg</span></span><br><span class="line">        String folder = <span class="keyword">new</span> DateTime().toString(<span class="string">"yyyy/MM/dd"</span>);</span><br><span class="line">        String fileName = UUID.randomUUID().toString();</span><br><span class="line">        String fileExtension = originalFilename.substring(originalFilename.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">        String key = <span class="keyword">module</span> +<span class="string">"/"</span> + folder + <span class="string">"/"</span> + fileName + fileExtension;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 后面要对文件上传错误进行处理，此处捕获了异常但是知识打印了一句话，导致前台获取到了数据但是实际上是没有数据的，即使前台显示成功，但是阿里云上依旧是没有数据的</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/*try &#123;</span></span><br><span class="line"><span class="comment">            // 创建PutObjectRequest对象。</span></span><br><span class="line"><span class="comment">            PutObjectRequest putObjectRequest = new PutObjectRequest(bucketname, key, inputStream);</span></span><br><span class="line"><span class="comment">            // 设置该属性可以返回response。如果不设置，则返回的response为空。</span></span><br><span class="line"><span class="comment">            //putObjectRequest.setProcess("true");</span></span><br><span class="line"><span class="comment">            // 创建PutObject请求。</span></span><br><span class="line"><span class="comment">            PutObjectResult result = ossClient.putObject(putObjectRequest);</span></span><br><span class="line"><span class="comment">            // 如果上传成功，则返回200。</span></span><br><span class="line"><span class="comment">            //System.out.println(result.getResponse().getStatusCode());</span></span><br><span class="line"><span class="comment">        &#125; catch (OSSException oe) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println("Caught an OSSException, which means your request made it to OSS, "</span></span><br><span class="line"><span class="comment">                    + "but was rejected with an error response for some reason.");</span></span><br><span class="line"><span class="comment">            System.out.println("Error Message:" + oe.getErrorMessage());</span></span><br><span class="line"><span class="comment">            System.out.println("Error Code:" + oe.getErrorCode());</span></span><br><span class="line"><span class="comment">            System.out.println("Request ID:" + oe.getRequestId());</span></span><br><span class="line"><span class="comment">            System.out.println("Host ID:" + oe.getHostId());</span></span><br><span class="line"><span class="comment">        &#125; catch (ClientException ce) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println("Caught an ClientException, which means the client encountered "</span></span><br><span class="line"><span class="comment">                    + "a serious internal problem while trying to communicate with OSS, "</span></span><br><span class="line"><span class="comment">                    + "such as not being able to access the network.");</span></span><br><span class="line"><span class="comment">            System.out.println("Error Message:" + ce.getMessage());</span></span><br><span class="line"><span class="comment">        &#125; finally &#123;</span></span><br><span class="line"><span class="comment">            if (ossClient != null) &#123;</span></span><br><span class="line"><span class="comment">                ossClient.shutdown();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        ossClient.putObject(bucketname,key,inputStream);</span><br><span class="line">        ossClient.shutdown();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回url</span></span><br><span class="line">        <span class="comment">//https://guli-file-zwz.oss-cn-hangzhou.aliyuncs.com/avatar/me.jpg</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"https://"</span> + bucketname + <span class="string">"."</span> + endpoint + <span class="string">"/"</span> + key;</span><br></pre></td></tr></table></figure>

<h5 id="3、控制层"><a href="#3、控制层" class="headerlink" title="3、控制层"></a><strong>3、控制层</strong></h5><p>创建controller：FileController.java，重启并在Swagger中测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.oss.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.R;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.ResultCodeEnum;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.util.ExceptionUtils;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.base.exception.GuliException;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.oss.service.FileService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/16 23:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Api</span>(description = <span class="string">"阿里云文件管理"</span>)</span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/admin/oss/file"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> FileService fileService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"文件上传"</span>)</span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"upload"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">upload</span><span class="params">(@ApiParam(value = <span class="string">"文件"</span>,required = <span class="keyword">true</span>)</span> @<span class="title">RequestParam</span><span class="params">(<span class="string">"file"</span>)</span> MultipartFile file,</span></span><br><span class="line"><span class="function">                    @<span class="title">ApiParam</span><span class="params">(value = <span class="string">"模块"</span>,required = <span class="keyword">true</span>)</span> @<span class="title">RequestParam</span><span class="params">(<span class="string">"module"</span>)</span> String <span class="keyword">module</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream inputStream = file.getInputStream();</span><br><span class="line">            String originalFilename = file.getOriginalFilename();</span><br><span class="line">            String uploadUrl = fileService.upload(inputStream, <span class="keyword">module</span>, originalFilename);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> R.ok().message(<span class="string">"文件上传成功"</span>).data(<span class="string">"url"</span>,uploadUrl);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(ExceptionUtils.getMessage(e));</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(ResultCodeEnum.FILE_UPLOAD_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="三、前端整合文件上传"><a href="#三、前端整合文件上传" class="headerlink" title="三、前端整合文件上传"></a>三、前端整合文件上传</h3><h4 id="一、前端组件参考"><a href="#一、前端组件参考" class="headerlink" title="一、前端组件参考"></a>一、前端组件参考</h4><p><a href="https://element.eleme.cn/2.4/#/zh-CN/component/upload" target="_blank" rel="noopener">https://element.eleme.cn/2.4/#/zh-CN/component/upload</a></p>
<h4 id="二、整合上传组件"><a href="#二、整合上传组件" class="headerlink" title="二、整合上传组件"></a><strong>二、整合上传组件</strong></h4><h5 id="1、定义页面组件模板"><a href="#1、定义页面组件模板" class="headerlink" title="1、定义页面组件模板"></a>1、定义页面组件模板</h5><p>src/views/teacher/form.vue：参考案例文档</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 讲师头像：TODO --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"讲师照片"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:show-file-list</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:on-success</span>=<span class="string">"handleAvatarSuccess"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:on-error</span>=<span class="string">"handleAvatarError"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:before-upload</span>=<span class="string">"beforeAvatarUpload"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">class</span>=<span class="string">"avatar-uploader"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">action</span>=<span class="string">"http://localhost:8120/admin/oss/file/upload?module=avatar"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">"teacher.avatar"</span> <span class="attr">:src</span>=<span class="string">"teacher.avatar"</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"el-icon-plus avatar-uploader-icon"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css：参考案例文档</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">  <span class="selector-class">.avatar-uploader</span> <span class="selector-class">.el-upload</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#d9d9d9</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.avatar-uploader</span> <span class="selector-class">.el-upload</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#409EFF</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.avatar-uploader-icon</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#8c939d</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">178px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">178px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">178px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.avatar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">178px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">178px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2、定义页面组件脚本-4"><a href="#2、定义页面组件脚本-4" class="headerlink" title="2、定义页面组件脚本"></a>2、定义页面组件脚本</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件上传成功了</span></span><br><span class="line">    handleAvatarSuccess(response) &#123;</span><br><span class="line">        <span class="keyword">if</span> (response.success) &#123;</span><br><span class="line">            <span class="keyword">this</span>.teacher.avatar = response.data.url</span><br><span class="line">            <span class="keyword">this</span>.$message.success(<span class="string">'上传成功!'</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.$message.error(<span class="string">'上传失败!(非20000)'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 文件上传前的校验</span></span><br><span class="line">    beforeAvatarUpload(file) &#123;</span><br><span class="line">        <span class="keyword">const</span> isJPG = file.type === <span class="string">'image/jpeg'</span></span><br><span class="line">        <span class="keyword">const</span> isLt2M = file.size / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!isJPG) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$message.error(<span class="string">'上传头像图片只能是 JPG 格式!'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!isLt2M) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$message.error(<span class="string">'上传头像图片大小不能超过 2MB!'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isJPG &amp;&amp; isLt2M</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="四、自定义异常类"><a href="#四、自定义异常类" class="headerlink" title="四、自定义异常类"></a>四、自定义异常类</h3><h4 id="一、文件上传异常分析"><a href="#一、文件上传异常分析" class="headerlink" title="一、文件上传异常分析"></a><strong>一、文件上传异常分析</strong></h4><h5 id="1、制造异常"><a href="#1、制造异常" class="headerlink" title="1、制造异常"></a>1、制造异常</h5><p>将application.yml文件中的keyid改成错误的值，运行程序，执行上传阿里云sdk内部会抛出异常，并打印相关错误日志</p>
<h5 id="2、异常处理方案"><a href="#2、异常处理方案" class="headerlink" title="2、异常处理方案"></a>2、异常处理方案</h5><p>方案1：异常处理器中捕获相关异常</p>
<p>方案2：自定义异常，异常处理器中捕获自定义异常</p>
<h4 id="二、自定义异常处理"><a href="#二、自定义异常处理" class="headerlink" title="二、自定义异常处理"></a><strong>二、自定义异常处理</strong></h4><h5 id="1、创建自定义异常类"><a href="#1、创建自定义异常类" class="headerlink" title="1、创建自定义异常类"></a><strong>1、创建自定义异常类</strong></h5><p>service-base模块中创建com.atguigu.guli.service.base.exception包，</p>
<p>创建GuliException.java通用异常类 继承 RuntimeException，RuntimeException 对代码没有侵入性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.base.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.ResultCodeEnum;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/17 14:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GuliException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GuliException</span><span class="params">(String message, Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GuliException</span><span class="params">(ResultCodeEnum resultCodeEnum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(resultCodeEnum.getMessage());</span><br><span class="line">        <span class="keyword">this</span>.code = resultCodeEnum.getCode();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"GuliException&#123;"</span>+<span class="string">"code="</span>+code+<span class="string">",Message="</span>+<span class="keyword">this</span>.getMessage()+<span class="string">"&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、添加异常处理方法"><a href="#2、添加异常处理方法" class="headerlink" title="2、添加异常处理方法"></a>2、添加异常处理方法</h5><p>GlobalExceptionHandler.java中添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span>(GuliException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseBody</span></span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">R</span> <span class="title">error</span>(<span class="title">GuliException</span> <span class="title">e</span>)</span>&#123;</span><br><span class="line">        log.error(ExceptionUtils.getMessage(e));        <span class="comment">//使用自定义的ExceptionUtils类来规范错误信息 (该类百度即可)</span></span><br><span class="line">        <span class="keyword">return</span> R.error().message(e.getMessage()).code(e.getCode());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、修改FileController"><a href="#3、修改FileController" class="headerlink" title="3、修改FileController"></a>3、修改FileController</h5><p>在类上添加日志注解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j</span><br></pre></td></tr></table></figure>

<p>业务中需要的位置抛出GuliException</p>
<p><a href="https://imgse.com/i/pS37jv8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS37jv8.png" alt="pS37jv8.png"></a></p>
<h5 id="4、打印完整的异常信息"><a href="#4、打印完整的异常信息" class="headerlink" title="4、打印完整的异常信息"></a>4、打印完整的异常信息</h5><p>GuliException类中重写toString方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"GuliException&#123;"</span> +</span><br><span class="line">        <span class="string">"code="</span> + code +</span><br><span class="line">        <span class="string">", message="</span> + <span class="keyword">this</span>.getMessage() +</span><br><span class="line">        <span class="string">'&#125;'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="三、前端错误处理"><a href="#三、前端错误处理" class="headerlink" title="三、前端错误处理"></a>三、前端错误处理</h4><h5 id="1、统一异常错误处理"><a href="#1、统一异常错误处理" class="headerlink" title="1、统一异常错误处理"></a>1、统一异常错误处理</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件上传成功了</span></span><br><span class="line">    handleAvatarSuccess(response) &#123;</span><br><span class="line">      <span class="keyword">if</span> (response.success) &#123;</span><br><span class="line">        <span class="keyword">this</span>.teacher.avatar = response.data.url</span><br><span class="line">        <span class="keyword">this</span>.$message.success(<span class="string">'上传成功!'</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(<span class="string">'上传失败!(非20000)'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h5 id="2、http异常错误处理"><a href="#2、http异常错误处理" class="headerlink" title="2、http异常错误处理"></a>2、http异常错误处理</h5><p>注册事件</p>
<p><a href="https://imgse.com/i/pS3HZKU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3HZKU.png" alt="pS3HZKU.png"></a></p>
<p>事件函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件上传失败(http)</span></span><br><span class="line">    handleAvatarError() &#123;</span><br><span class="line">      <span class="keyword">this</span>.$message.error(<span class="string">'上传失败!(非http失败)'</span>)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="五、批量删除"><a href="#五、批量删除" class="headerlink" title="五、批量删除"></a>五、批量删除</h3><h4 id="一、后端接口"><a href="#一、后端接口" class="headerlink" title="一、后端接口"></a>一、后端接口</h4><p>TeacherController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量删除</span></span><br><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"根据ID列表删除讲师"</span>)</span><br><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/batchRemove"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">removeRows</span><span class="params">(@ApiParam(value = <span class="string">"讲师id列表"</span>,required = <span class="keyword">true</span>)</span></span></span><br><span class="line"><span class="function">                    @RequestBody List&lt;String&gt; idList) </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> result = teacherService.removeByIds(idList);</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().message(<span class="string">"删除成功"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">"删除失败"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://imgse.com/i/pS3HHLF" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3HHLF.png" alt="pS3HHLF.png"></a><br><a href="https://imgse.com/i/pS3HqZ4" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/18/pS3HqZ4.png" alt="pS3HqZ4.png"></a></p>
<h4 id="二、前端"><a href="#二、前端" class="headerlink" title="二、前端"></a>二、前端</h4><h5 id="1、api"><a href="#1、api" class="headerlink" title="1、api"></a>1、api</h5><p>teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 批量删除</span></span><br><span class="line">  batchRemove(idList) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      url: <span class="string">'/admin/edu/teacher/batchRemove/'</span>,</span><br><span class="line">      method: <span class="string">'delete'</span>,</span><br><span class="line">      data: idList</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、添加删除复选框"><a href="#2、添加删除复选框" class="headerlink" title="2、添加删除复选框"></a>2、添加删除复选框</h5><p>views/teacher/list.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">"selection"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3、添加删除按钮"><a href="#3、添加删除按钮" class="headerlink" title="3、添加删除按钮"></a>3、添加删除按钮</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 工具按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"margin-bottom: 10px"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">size</span>=<span class="string">"mini"</span> @<span class="attr">click</span>=<span class="string">"batchRemove()"</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4、定义删除方法"><a href="#4、定义删除方法" class="headerlink" title="4、定义删除方法"></a>4、定义删除方法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">batchRemove() &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5、data中定义数据"><a href="#5、data中定义数据" class="headerlink" title="5、data中定义数据"></a>5、data中定义数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">multipleSelection: [], &#x2F;&#x2F; 批量选中页表，用于批量删除，batchRemove</span><br></pre></td></tr></table></figure>

<h5 id="6、表格组件中添加事件"><a href="#6、表格组件中添加事件" class="headerlink" title="6、表格组件中添加事件"></a>6、表格组件中添加事件</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@selection-change="handleSelectionChange"</span><br></pre></td></tr></table></figure>

<h5 id="7、定义事件的回调函数"><a href="#7、定义事件的回调函数" class="headerlink" title="7、定义事件的回调函数"></a>7、定义事件的回调函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当表格中多选项发生变化的时候触发</span></span><br><span class="line">    handleSelectionChange(selection) &#123;</span><br><span class="line">      <span class="comment">// 获取选择框</span></span><br><span class="line">      <span class="keyword">this</span>.multipleSelection = selection</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h5 id="8、完善removeRows方法"><a href="#8、完善removeRows方法" class="headerlink" title="8、完善removeRows方法"></a>8、完善removeRows方法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 批量删除</span></span><br><span class="line">    batchRemove() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.multipleSelection.length === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">          message: <span class="string">'所选数据为空，请您选择数据'</span>,</span><br><span class="line">          type: <span class="string">'warning'</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$confirm(<span class="string">'此操作将永久删除这些用户, 是否继续?'</span>, <span class="string">'提示'</span>, &#123;</span><br><span class="line">          confirmButtonText: <span class="string">'确定'</span>,</span><br><span class="line">          cancelButtonText: <span class="string">'取消'</span>,</span><br><span class="line">          type: <span class="string">'warning'</span></span><br><span class="line">        &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> idList = []</span><br><span class="line">          <span class="keyword">this</span>.multipleSelection.forEach(<span class="function"><span class="params">items</span> =&gt;</span> &#123;</span><br><span class="line">            idList.push(items.id)</span><br><span class="line">          &#125;)</span><br><span class="line">          teacherApi.batchRemove(idList).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 刷新页面</span></span><br><span class="line">            <span class="keyword">this</span>.fetchData()</span><br><span class="line">            <span class="comment">// 弹出成功提示</span></span><br><span class="line">            <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">              message: res.message,</span><br><span class="line">              type: <span class="string">'success'</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (err === <span class="string">'cancel'</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">              type: <span class="string">'info'</span>,</span><br><span class="line">              message: <span class="string">'已取消删除'</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>进行了健壮性的检测，如果没选则提示没有选。</p>
<p>ps：直接cv之前写过的删除进行修改即可</p>
</blockquote>
<h3 id="六、自动提示"><a href="#六、自动提示" class="headerlink" title="六、自动提示"></a>六、自动提示</h3><h4 id="一、后端接口-1"><a href="#一、后端接口-1" class="headerlink" title="一、后端接口"></a>一、后端接口</h4><h5 id="1、TeacherController"><a href="#1、TeacherController" class="headerlink" title="1、TeacherController"></a>1、TeacherController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"根据关键字查询讲师列表"</span>)</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/list/&#123;name&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">selectNameListByKey</span><span class="params">(@ApiParam(value = <span class="string">"关键字"</span>,required = <span class="keyword">true</span>)</span> @PathVariable String name)</span>&#123;</span><br><span class="line">        List&lt;Map&lt;String,Object&gt;&gt; nameList = teacherService.selectNameList(name);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"nameList"</span>,nameList);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、TeacherService"><a href="#2、TeacherService" class="headerlink" title="2、TeacherService"></a>2、TeacherService</h5><p>接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Map&lt;String, Object&gt;&gt; selectNameListByKey(String key);</span><br></pre></td></tr></table></figure>

<p>实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    public List&lt;Map&lt;String, Object&gt;&gt; selectNameList(String name) &#123;</span><br><span class="line">        QueryWrapper&lt;Teacher&gt; teacherQueryWrapper &#x3D; new QueryWrapper&lt;&gt;();</span><br><span class="line">        teacherQueryWrapper.select(&quot;name&quot;);</span><br><span class="line">        teacherQueryWrapper.likeRight(&quot;name&quot;,name);</span><br><span class="line"></span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list &#x3D; baseMapper.selectMaps(teacherQueryWrapper);</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、前端整合"><a href="#二、前端整合" class="headerlink" title="二、前端整合"></a>二、前端整合</h4><h5 id="1、api-1"><a href="#1、api-1" class="headerlink" title="1、api"></a>1、api</h5><p>teacher.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择关键字名字删除</span></span><br><span class="line">  selectNameListByName(name) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      url: <span class="string">`/admin/edu/teacher/list/<span class="subst">$&#123;name&#125;</span>`</span>,</span><br><span class="line">      method: <span class="string">'get'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、组件"><a href="#2、组件" class="headerlink" title="2、组件"></a>2、组件</h5><p>views/teacher/list.vue</p>
<p><strong>注意： value-key=”name” 的设置</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;el-input v-model="searchObj.name" placeholder="讲师"/&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-autocomplete</span></span></span><br><span class="line"><span class="tag">             <span class="attr">v-model</span>=<span class="string">"searchObj.name"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:fetch-suggestions</span>=<span class="string">"querySearch"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:trigger-on-focus</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">class</span>=<span class="string">"inline-input"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">placeholder</span>=<span class="string">"讲师"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">value-key</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">             @<span class="attr">select</span>=<span class="string">"handleSelect"</span></span></span><br><span class="line"><span class="tag">             /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入建议，用于打出一个关键字自动检索相关关键字的功能，第6-18行</span></span><br><span class="line">    querySearch(queryString, callback) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'queryString'</span>, queryString)</span><br><span class="line">      teacherApi.selectNameListByName(queryString).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        callback(res.data.nameList)</span><br><span class="line">        <span class="built_in">console</span>.log(res.data.nameList)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="day7-Nacos注册中心和服务调用"><a href="#day7-Nacos注册中心和服务调用" class="headerlink" title="day7 Nacos注册中心和服务调用"></a>day7 Nacos注册中心和服务调用</h2><h3 id="一、Springcloue-Alibaba"><a href="#一、Springcloue-Alibaba" class="headerlink" title="一、Springcloue Alibaba"></a>一、Springcloue Alibaba</h3><h4 id="一、停更引发的升级惨案"><a href="#一、停更引发的升级惨案" class="headerlink" title="一、停更引发的升级惨案"></a>一、停更引发的升级惨案</h4><p>停更不停用：Spring Cloud Netflix 项目进入了维护模式</p>
<ul>
<li>被动修复bugs</li>
<li>不再接受合并请求</li>
<li>不再发布新版本</li>
</ul>
<p><a href="https://imgse.com/i/pSGgU58" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/21/pSGgU58.png" alt="pSGgU58.png"></a></p>
<h4 id="二、版本选择"><a href="#二、版本选择" class="headerlink" title="二、版本选择"></a>二、版本选择</h4><p>在guli_parent中确认以下依赖的版本</p>
<h5 id="1、Spring-Boot"><a href="#1、Spring-Boot" class="headerlink" title="1、Spring Boot"></a>1、Spring Boot</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>(可改可不改)，防止出现奇奇怪怪的bug就可以改</p>
</blockquote>
<h5 id="2、Spring-Cloud"><a href="#2、Spring-Cloud" class="headerlink" title="2、Spring Cloud"></a>2、Spring Cloud</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>Hoxton.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3、Spring-Cloud-Alibaba"><a href="#3、Spring-Cloud-Alibaba" class="headerlink" title="3、Spring Cloud Alibaba"></a>3、<strong>Spring Cloud Alibaba</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="二、Nacos注册中心"><a href="#二、Nacos注册中心" class="headerlink" title="二、Nacos注册中心"></a>二、Nacos注册中心</h3><h4 id="一、Nacos"><a href="#一、Nacos" class="headerlink" title="一、Nacos"></a>一、Nacos</h4><h5 id="1、常见注册中心"><a href="#1、常见注册中心" class="headerlink" title="1、常见注册中心"></a>1、常见注册中心</h5><ul>
<li><p>Eureka：Eureka是Spring Cloud Netflix中的重要组件，主要作用就是做服务注册和发现。2.0遇到性能瓶颈，停止维护，现在已经闭源。</p>
</li>
<li><p>Consul：Consul是基于GO语言开发的开源工具，主要面向分布式，服务化的系统提供服务注册、服务发现和配置管理的功能。</p>
</li>
<li><p>Zookeeper：zookeeper是一个分布式服务框架，是Apache Hadoop 的一个子项目。</p>
</li>
<li><p>Nacos（Spring Cloud Alibaba）</p>
</li>
<li><ul>
<li>Alibaba针对Spring Cloud体系的注册中心</li>
<li>相对于 Spring Cloud Eureka 来说，Nacos 更强大</li>
<li>Nacos = Spring Cloud Eureka + Spring Cloud Config + Spring Cloud Bus</li>
</ul>
</li>
</ul>
<h5 id="2、为什么叫Nacos"><a href="#2、为什么叫Nacos" class="headerlink" title="2、为什么叫Nacos"></a>2、为什么叫Nacos</h5><ul>
<li><p>前四个字母分别为 Naming 和 Configuration 的前两个字母，最后的s为Service</p>
</li>
<li><ul>
<li>Dynamic Naming and Configuration Service</li>
</ul>
</li>
<li><p>Nacos就是：注册中心 + 配置中心的组合</p>
</li>
<li><ul>
<li>Spring Cloud Alibaba Nacos = SpringCloudEureka + SpringCloudConfig +SpringCloudBus</li>
</ul>
</li>
</ul>
<h5 id="3、Nacos下载和安装"><a href="#3、Nacos下载和安装" class="headerlink" title="3、Nacos下载和安装"></a>3、Nacos下载和安装</h5><p>下载地址：<a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener">https://github.com/alibaba/nacos/releases</a></p>
<p>下载版本：nacos-server-1.1.4.zip 或 nacos-server-1.1.4.tar.gz，解压任意目录即可</p>
<h5 id="4、启动Nacos"><a href="#4、启动Nacos" class="headerlink" title="4、启动Nacos"></a>4、启动Nacos</h5><p>- Windows</p>
<p>启动：双击bin/startup.cmd运行文件</p>
<p>访问：<a href="http://localhost:8848/nacos" target="_blank" rel="noopener">http://localhost:8848/nacos</a></p>
<p>用户名密码：nacos/nacos</p>
<p>- Linux/Unix/Mac</p>
<p>启动命令(standalone代表着单机模式运行，非集群模式)</p>
<p>启动命令：sh startup.sh -m standalone</p>
<p><a href="https://imgse.com/i/pSGg25T" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/21/pSGg25T.png" alt="pSGg25T.png"></a></p>
<h4 id="二、服务注册"><a href="#二、服务注册" class="headerlink" title="二、服务注册"></a>二、服务注册</h4><h5 id="1、引入依赖"><a href="#1、引入依赖" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h5><p>service模块中配置Nacos客户端的pom依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--服务注册--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2、添加服务配置信息"><a href="#2、添加服务配置信息" class="headerlink" title="2、添加服务配置信息"></a>2、添加服务配置信息</h5><p>配置application.properties，在客户端微服务中添加注册Nacos服务的配置信息</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring：</span></span><br><span class="line">	<span class="attr">cloud:</span></span><br><span class="line">        <span class="attr">nacos:</span></span><br><span class="line">          <span class="attr">discovery:</span></span><br><span class="line">            <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br></pre></td></tr></table></figure>

<h5 id="3、添加Nacos客户端注解"><a href="#3、添加Nacos客户端注解" class="headerlink" title="3、添加Nacos客户端注解"></a>3、添加Nacos客户端注解</h5><p>在客户端微服务启动类中添加注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br></pre></td></tr></table></figure>

<h5 id="4、启动客户端微服务"><a href="#4、启动客户端微服务" class="headerlink" title="4、启动客户端微服务"></a>4、启动客户端微服务</h5><p>启动注册中心，启动已注册的微服务，可以在Nacos服务列表中看到被注册的微服务</p>
<p><a href="https://imgse.com/i/pSGgorR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/21/pSGgorR.png" alt="pSGgorR.png"></a></p>
<h5 id="5、注册oss微服务"><a href="#5、注册oss微服务" class="headerlink" title="5、注册oss微服务"></a>5、注册oss微服务</h5><p>使用同样的方式注册oss微服务</p>
<h3 id="三、OpenFeign"><a href="#三、OpenFeign" class="headerlink" title="三、OpenFeign"></a>三、OpenFeign</h3><h4 id="一、OpenFeign是什么"><a href="#一、OpenFeign是什么" class="headerlink" title="一、OpenFeign是什么"></a>一、OpenFeign是什么</h4><p>OpenFeign是Spring Cloud提供的一个声明式的伪Http客户端， 它使得调用远程服务就像调用本地服务一样简单， 只需要创建一个接口并添加一个注解即可。</p>
<p>Nacos很好的兼容了OpenFeign， OpenFeign默认集成了 Ribbon， 所以在Nacos下使用OpenFeign默认就实现了负载均衡的效果。</p>
<h4 id="二、OpenFeign的引入"><a href="#二、OpenFeign的引入" class="headerlink" title="二、OpenFeign的引入"></a>二、OpenFeign的引入</h4><h5 id="1、引入依赖-1"><a href="#1、引入依赖-1" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h5><p>service模块中配置OpenFeign的pom依赖（实际是在服务消费者端需要OpenFeign的依赖）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    服务调用 :用户要调用oss中的接口删除前端的讲师图片。 edu微服务是消费者，oss微服务是生产者，因此该依赖只需要放在edu中即可，但是考虑到有可能oss会调用其他的接口于是放在了父pom文件中，为service中的所有微服务都引入依赖</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2、启动类添加注解"><a href="#2、启动类添加注解" class="headerlink" title="2、启动类添加注解"></a>2、启动类添加注解</h5><p>在service_edu的启动类添加如下注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients</span></span><br></pre></td></tr></table></figure>

<h4 id="三、OpenFeign的使用"><a href="#三、OpenFeign的使用" class="headerlink" title="三、OpenFeign的使用"></a>三、OpenFeign的使用</h4><h5 id="1、oss微服务中创建测试api"><a href="#1、oss微服务中创建测试api" class="headerlink" title="1、oss微服务中创建测试api"></a>1、oss微服务中创建测试api</h5><p>服务的生产者的FileController中添加如下方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"测试"</span>)</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"test"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">"oss test被调用"</span>);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、edu微服务中创建远程调用接口"><a href="#2、edu微服务中创建远程调用接口" class="headerlink" title="2、edu微服务中创建远程调用接口"></a>2、edu微服务中创建远程调用接口</h5><p>服务消费者中创建feign包，创建如下接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.feign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.R;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.feign.fallback.OssFileServiceFallBack;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.DeleteMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/19 14:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"service-oss"</span>,fallback = OssFileServiceFallBack<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">interface</span> <span class="title">OssFileService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/admin/oss/file/test"</span>)</span><br><span class="line">    <span class="function">R <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、调用远程方法"><a href="#3、调用远程方法" class="headerlink" title="3、调用远程方法"></a>3、调用远程方法</h5><p>服务消费者中的TeacherController中添加如下方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"测试服务调用"</span>)</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ossFileService.test();	</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="四、负载均衡"><a href="#四、负载均衡" class="headerlink" title="四、负载均衡"></a>四、负载均衡</h4><h5 id="1、配置多实例"><a href="#1、配置多实例" class="headerlink" title="1、配置多实例"></a>1、配置多实例</h5><p><a href="https://imgse.com/i/pSGfnLd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/21/pSGfnLd.png" alt="pSGfnLd.png"></a></p>
<h5 id="2、测试负载均衡"><a href="#2、测试负载均衡" class="headerlink" title="2、测试负载均衡"></a>2、测试负载均衡</h5><p>对比两个实例输出日志的时间，可以发现默认情况下是轮询策略</p>
<p><a href="https://imgse.com/i/pSGfKeA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/21/pSGfKeA.png" alt="pSGfKeA.png"></a></p>
<h5 id="3、Ribbon的负载均衡策略"><a href="#3、Ribbon的负载均衡策略" class="headerlink" title="3、Ribbon的负载均衡策略"></a>3、Ribbon的负载均衡策略</h5><table>
<thead>
<tr>
<th>策略名</th>
<th>策略描述</th>
</tr>
</thead>
<tbody><tr>
<td>BestAvailableRule</td>
<td>选择一个最小的并发请求的server</td>
</tr>
<tr>
<td>AvailabilityFilteringRule</td>
<td>过滤掉那些因为一直连接失败的被标记为circuit tripped的后端server，并过滤掉那些高并发的的后端server（activeconnections 超过配置的阈值）</td>
</tr>
<tr>
<td>WeightedResponseTimeRule</td>
<td>根据响应时间分配一个weight，响应时间越长，weight越小，被选中的可能性越低。</td>
</tr>
<tr>
<td>RetryRule</td>
<td>对选定的负载均衡策略机上重试机制。</td>
</tr>
<tr>
<td>RoundRobinRule</td>
<td>轮询选择server</td>
</tr>
<tr>
<td>RandomRule</td>
<td>随机选择一个server</td>
</tr>
<tr>
<td>ZoneAvoidanceRule</td>
<td>综合判断server所在区域的性能和server的可用性选择server</td>
</tr>
</tbody></table>
<p>配置负载均衡策略的方式：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">service-product:</span> <span class="comment"># 调用的提供者的名称 </span></span><br><span class="line">  <span class="attr">ribbon:</span> </span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span></span><br></pre></td></tr></table></figure>

<h4 id="五、OpenFeign的超时控制"><a href="#五、OpenFeign的超时控制" class="headerlink" title="五、OpenFeign的超时控制"></a>五、OpenFeign的超时控制</h4><h5 id="1、模拟长流程业务"><a href="#1、模拟长流程业务" class="headerlink" title="1、模拟长流程业务"></a>1、模拟长流程业务</h5><p>修改oss服务FileController的test方法，添加sleep 3秒：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"测试"</span>)</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"test"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    log.info(<span class="string">"oss 被调用"</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、远程调用测试"><a href="#2、远程调用测试" class="headerlink" title="2、远程调用测试"></a>2、远程调用测试</h5><p>上面的程序在测试时会出现远程调用超时错误。如下：因为OpenFeign默认等待1秒钟，否则超时报错</p>
<p><a href="https://imgse.com/i/pSJSCmn" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/21/pSJSCmn.png" alt="pSJSCmn.png"></a></p>
<p>超时后，服务消费者端默认会发起一次重试</p>
<p><a href="https://imgse.com/i/pSJSpOs" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/21/pSJSpOs.png" alt="pSJSpOs.png"></a></p>
<p>重试规则：每隔一秒发起重试</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">  <span class="attr">MaxAutoRetries:</span> <span class="number">0</span> <span class="comment"># 同一实例最大重试次数，不包括首次调用，默认0</span></span><br><span class="line">  <span class="attr">MaxAutoRetriesNextServer:</span> <span class="number">1</span> <span class="comment"># 重试其他实例的最大重试次数，不包括首次所选的server，默认1</span></span><br></pre></td></tr></table></figure>

<h5 id="3、解决方案"><a href="#3、解决方案" class="headerlink" title="3、解决方案"></a><strong>3、解决方案</strong></h5><p>application.yml文件中配置ribbon的超时时间（因为OpenFeing的底层即是对ribbon的封装）</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">  <span class="attr">ConnectTimeout:</span> <span class="number">10000</span> <span class="comment">#连接建立的超时时长，默认1秒</span></span><br><span class="line">  <span class="attr">ReadTimeout:</span> <span class="number">10000</span> <span class="comment">#处理请求的超时时间，默认为1秒</span></span><br></pre></td></tr></table></figure>

<h4 id="六、OpenFeign日志"><a href="#六、OpenFeign日志" class="headerlink" title="六、OpenFeign日志"></a>六、OpenFeign日志</h4><h5 id="1、作用"><a href="#1、作用" class="headerlink" title="1、作用"></a>1、作用</h5><p>OpenFeign提供了日志打印功能，我们可以通过配置来调整日志级别，从而了解OpenFeign中Http请求的细节。即对OpenFeign远程接口调用的情况进行监控和日志输出。</p>
<h5 id="2、日志级别"><a href="#2、日志级别" class="headerlink" title="2、日志级别"></a>2、日志级别</h5><ul>
<li>NONE：默认级别，不显示日志</li>
<li>BASIC：仅记录请求方法、URL、响应状态及执行时间</li>
<li>HEADERS：除了BASIC中定义的信息之外，还有请求和响应头信息</li>
<li>FULL：除了HEADERS中定义的信息之外，还有请求和响应正文及元数据信息</li>
</ul>
<h5 id="3、配置日志bean"><a href="#3、配置日志bean" class="headerlink" title="3、配置日志bean"></a>3、配置日志bean</h5><p>在service_edu中创建配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.guli.service.edu.config;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OpenFeignConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    Logger.<span class="function">Level <span class="title">feignLoggerLevel</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.FULL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、开启日志"><a href="#4、开启日志" class="headerlink" title="4、开启日志"></a>4、开启日志</h5><p>在service_edu中，application.yml中指定监控的接口，以及日志级别</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.atguigu.guli.service.edu.feign.OssFileService:</span> <span class="string">debug</span> <span class="comment">#以什么级别监控哪个接口</span></span><br></pre></td></tr></table></figure>

<h3 id="四、删除讲师头像"><a href="#四、删除讲师头像" class="headerlink" title="四、删除讲师头像"></a>四、删除讲师头像</h3><blockquote>
<p> 需求：</p>
</blockquote>
<p>删除讲师的同时删除讲师头像</p>
<h4 id="一、删除文件接口"><a href="#一、删除文件接口" class="headerlink" title="一、删除文件接口"></a>一、删除文件接口</h4><p>oss微服务中实现删除文件接口</p>
<h5 id="1、FileService接口"><a href="#1、FileService接口" class="headerlink" title="1、FileService接口"></a>1、FileService接口</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeFile</span><span class="params">(String url)</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="2、FileService实现"><a href="#2、FileService实现" class="headerlink" title="2、FileService实现"></a>2、FileService实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除头像</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeFile</span><span class="params">(String url)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//读取配置文件</span></span><br><span class="line">    String endpoint = ossProperties.getEndpoint();</span><br><span class="line">    String keyid = ossProperties.getKeyid();</span><br><span class="line">    String keysecrect = ossProperties.getKeysecrect();</span><br><span class="line">    String bucketname = ossProperties.getBucketname();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">    OSS ossClient = <span class="keyword">new</span> OSSClientBuilder().build(endpoint, keyid, keysecrect);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除文件或目录。如果要删除目录，目录必须为空</span></span><br><span class="line">    <span class="comment">//https://guli-file-zwz.oss-cn-hangzhou.aliyuncs.com/avatar/me.jpg</span></span><br><span class="line">    String host = <span class="string">"https://"</span> + bucketname + <span class="string">"."</span> + endpoint +<span class="string">"/"</span>;</span><br><span class="line">    String objectName = url.substring(host.length());</span><br><span class="line">    ossClient.deleteObject(bucketname, objectName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭链接</span></span><br><span class="line">    ossClient.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、FileController"><a href="#3、FileController" class="headerlink" title="3、FileController"></a>3、FileController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"文件删除"</span>)</span><br><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"remove"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">removeFile</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    @ApiParam(value = <span class="string">"模块"</span>,required = <span class="keyword">true</span>)</span> @RequestBody String url)</span>&#123;</span><br><span class="line">    fileService.removeFile(url);</span><br><span class="line">    <span class="keyword">return</span> R.ok().message(<span class="string">"文件删除成功"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、OpenFeign远程调用"><a href="#二、OpenFeign远程调用" class="headerlink" title="二、OpenFeign远程调用"></a>二、OpenFeign远程调用</h4><p>edu微服务中实现远程调用</p>
<h5 id="1、创建远程调用接口"><a href="#1、创建远程调用接口" class="headerlink" title="1、创建远程调用接口"></a>1、创建远程调用接口</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/19 14:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"service-oss"</span>,fallback = OssFileServiceFallBack<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">interface</span> <span class="title">OssFileService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/admin/oss/file/test"</span>)</span><br><span class="line">    <span class="function">R <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/admin/oss/file/remove"</span>)</span><br><span class="line">    <span class="function">R <span class="title">removeFile</span><span class="params">(@ApiParam(value = <span class="string">"模块"</span>, required = <span class="keyword">true</span>)</span> @RequestBody String url)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、调用远程方法"><a href="#2、调用远程方法" class="headerlink" title="2、调用远程方法"></a>2、调用远程方法</h5><p>TeacherService中增加根据讲师id删除图片的方法</p>
<p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">removeAvatarById</span><span class="params">(String id)</span></span>;</span><br></pre></td></tr></table></figure>

<p>实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeAvatarById</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//根据id获取讲师头像的avatar 的url</span></span><br><span class="line">    Teacher teacher = baseMapper.selectById(id);</span><br><span class="line">    <span class="keyword">if</span> (teacher != <span class="keyword">null</span>) &#123;</span><br><span class="line">        String avatar = teacher.getAvatar();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(avatar))&#123;</span><br><span class="line">            R r = ossFileService.removeFile(avatar);</span><br><span class="line">            <span class="keyword">return</span> r.getSuccess();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、controller层"><a href="#3、controller层" class="headerlink" title="3、controller层"></a>3、controller层</h5><p>修改TeacherController中的removeById方法，删除讲师的同时删除头像</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"根据ID删除讲师"</span>)</span><br><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/remove/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">removeById</span><span class="params">(@ApiParam(<span class="string">"讲师id"</span>)</span> @PathVariable String id) </span>&#123;</span><br><span class="line">    <span class="comment">//删除讲师头像</span></span><br><span class="line">    teacherService.removeAvatarById(id);</span><br><span class="line">    <span class="comment">//删除讲师</span></span><br><span class="line">    <span class="keyword">boolean</span> result = teacherService.removeById(id);</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().message(<span class="string">"删除成功"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">"删除失败"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="三、前端修改"><a href="#三、前端修改" class="headerlink" title="三、前端修改"></a>三、前端修改</h4><p>前端src/request.js修改超时时间</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.BASE_API, <span class="comment">// api 的 base_url</span></span><br><span class="line">  timeout: <span class="number">12000</span> <span class="comment">// 请求超时时间</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="五、Sentinel"><a href="#五、Sentinel" class="headerlink" title="五、Sentinel"></a>五、Sentinel</h3><h4 id="一、service-edu"><a href="#一、service-edu" class="headerlink" title="一、service_edu"></a>一、service_edu</h4><h5 id="1、tomcat并发修改"><a href="#1、tomcat并发修改" class="headerlink" title="1、tomcat并发修改"></a>1、tomcat并发修改</h5><p>service_edu  yml中tomcat最大并发线程数调整为10</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8110</span> <span class="comment">#服务器端口</span></span><br><span class="line">  <span class="attr">tomcat:</span></span><br><span class="line">    <span class="attr">max-threads:</span> <span class="number">10</span> <span class="comment">#tomcat最大并发值默认是200，这里设置为10</span></span><br></pre></td></tr></table></figure>

<h5 id="2、controller测试方法"><a href="#2、controller测试方法" class="headerlink" title="2、controller测试方法"></a>2、controller测试方法</h5><p>TeacherController中添加并发测试方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"测试并发"</span>)</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/test_Concurrent"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">testConcurrent</span><span class="params">()</span></span>&#123;</span><br><span class="line">    log.info(<span class="string">"test_Concurrent"</span>);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、测试"><a href="#3、测试" class="headerlink" title="3、测试"></a><strong>3、测试</strong></h5><p>访问 test_concurrent，立即得到响应结果</p>
<h4 id="二、JMeter并发测试工具"><a href="#二、JMeter并发测试工具" class="headerlink" title="二、JMeter并发测试工具"></a><strong>二、JMeter并发测试工具</strong></h4><h5 id="1、JMeter下载和安装"><a href="#1、JMeter下载和安装" class="headerlink" title="1、JMeter下载和安装"></a>1、JMeter下载和安装</h5><p>下载地址：<a href="https://jmeter.apache.org/" target="_blank" rel="noopener">https://jmeter.apache.org/</a> apache-jmeter-5.2.1.zip</p>
<p>下载版本：apache-jmeter-5.2.1.zip，解压任意目录即可</p>
<h5 id="2、配置"><a href="#2、配置" class="headerlink" title="2、配置"></a>2、配置</h5><p>/bin/jmeter.properties 37行，改为简体中文</p>
<p>language=zh_CN</p>
<h5 id="3、启动JMeter"><a href="#3、启动JMeter" class="headerlink" title="3、启动JMeter"></a>3、启动JMeter</h5><p>- Windows</p>
<p>启动：双击bin/jmeter.bat运行文件</p>
<p>访问：<a href="http://localhost:8848/nacos" target="_blank" rel="noopener">http://localhost:8848/nacos</a></p>
<p>用户名密码：nacos/nacos</p>
<h4 id="三、使用JMeter测试高并发"><a href="#三、使用JMeter测试高并发" class="headerlink" title="三、使用JMeter测试高并发"></a>三、使用JMeter测试高并发</h4><h5 id="1、添加线程组"><a href="#1、添加线程组" class="headerlink" title="1、添加线程组"></a>1、添加线程组</h5><h5 id="2、配置线程并发"><a href="#2、配置线程并发" class="headerlink" title="2、配置线程并发"></a>2、配置线程并发</h5><h5 id="3、添加Http请求取样器"><a href="#3、添加Http请求取样器" class="headerlink" title="3、添加Http请求取样器"></a>3、添加Http请求取样器</h5><h5 id="4、配置Http取样器"><a href="#4、配置Http取样器" class="headerlink" title="4、配置Http取样器"></a>4、配置Http取样器</h5><p><a href="https://imgse.com/i/pSw9N2n" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSw9N2n.png" alt="pSw9N2n.png"></a></p>
<h5 id="5、配置查看结果树"><a href="#5、配置查看结果树" class="headerlink" title="5、配置查看结果树"></a>5、配置查看结果树</h5><h5 id="6、启动测试"><a href="#6、启动测试" class="headerlink" title="6、启动测试"></a>6、启动测试</h5><h5 id="7、测试并发"><a href="#7、测试并发" class="headerlink" title="7、测试并发"></a>7、测试并发</h5><p>当test接口收到高并发访问请求时，同一服务器上的test_concurrent接口响应延迟严重</p>
<h4 id="四、服务雪崩"><a href="#四、服务雪崩" class="headerlink" title="四、服务雪崩"></a>四、服务雪崩</h4><p>分布式系统环境下，通常会有很多层的服务调用。由于网络原因或自身的原因，服务一般无法保证 100% 可用。如果一个服务出现了问题，调用这个服务就会出现线程阻塞的情况，此时若有大量的请求涌入，就会出现多条线程阻塞等待，进而导致服务瘫痪。</p>
<p>如下图，对于同步调用，当底层的库存服务不可用时，商品服务请求线程被阻塞，当有大批量请求调用库存服务时，最终可能导致整个商品服务资源耗尽，无法继续对外提供服务。</p>
<p>由于服务与服务之间的依赖性，故障会传播，不可用沿请求调用链向上传递，会对整个微服务系统造成灾难性的严重后果，这就是服务故障的 “雪崩效应” 。</p>
<p><a href="https://imgse.com/i/pSwPJcn" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwPJcn.png" alt="pSwPJcn.png"></a></p>
<h4 id="五、服务容错"><a href="#五、服务容错" class="headerlink" title="五、服务容错"></a>五、服务容错</h4><h5 id="一、容错方案"><a href="#一、容错方案" class="headerlink" title="一、容错方案"></a><strong>一、容错方案</strong></h5><p>要防止雪崩的扩散，我们就要做好服务的容错：保护自己不被猪队友拖垮的一些措施。</p>
<p>常见的容错方案：隔离、超时、限流、熔断、降级</p>
<h6 id="1、隔离"><a href="#1、隔离" class="headerlink" title="1、隔离"></a>1、隔离</h6><p>将系统按照一定的原则划分为若干个服务模块，各个模块之间相对独立，无强依赖。当有故障发生时，能将问题和影响隔离在某个模块内部，而不扩散风险，不波及其它模块，不影响整体的系统服务。常见的隔离方式有：线程池隔离和信号量隔离。</p>
<p><a href="https://imgse.com/i/pSwP0NF" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwP0NF.png" alt="pSwP0NF.png"></a></p>
<h6 id="2、超时"><a href="#2、超时" class="headerlink" title="2、超时"></a>2、超时</h6><p>上游服务调用下游服务时，设置一个最大响应时间，如果超过这个时间，下游未作出响应，就断开请求，释放掉线程。</p>
<p><a href="https://imgse.com/i/pSwP44e" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwP44e.png" alt="pSwP44e.png"></a></p>
<h6 id="3、限流"><a href="#3、限流" class="headerlink" title="3、限流"></a>3、限流</h6><p>限制系统的输入和输出流量以达到保护系统的目的。为了保证系统的稳定运行，一旦达到的需要限制的阈值，就采取相应措施以完成限制流量的目的。</p>
<p><a href="https://imgse.com/i/pSwPo3d" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwPo3d.png" alt="pSwPo3d.png"></a></p>
<h6 id="4、熔断"><a href="#4、熔断" class="headerlink" title="4、熔断"></a>4、熔断</h6><p>当下游服务因访问压力过大而响应变慢或失败，上游服务为了保护系统整体的可用性，可以暂时切断对下游服务的调用。这种牺牲局部，保全整体的措施就叫做熔断。</p>
<p><a href="https://imgse.com/i/pSwPI9H" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwPI9H.png" alt="pSwPI9H.png"></a></p>
<h6 id="5、降级"><a href="#5、降级" class="headerlink" title="5、降级"></a>5、降级</h6><p>降级就是为服务提供一个托底方案，一旦服务无法正常调用，就使用托底方案。</p>
<p><a href="https://imgse.com/i/pSwPhND" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwPhND.png" alt="pSwPhND.png"></a></p>
<h5 id="二、容错组件"><a href="#二、容错组件" class="headerlink" title="二、容错组件"></a>二、容错组件</h5><h6 id="1、Hystrix"><a href="#1、Hystrix" class="headerlink" title="1、Hystrix"></a>1、Hystrix</h6><p>Hystrix是由Netflix开源的一个延迟和容错组件，用于隔离访问远程系统、服务或者第三方库，防止级联失败，从而提升系统的可用性与容错性。</p>
<h6 id="2、Resilience4J"><a href="#2、Resilience4J" class="headerlink" title="2、Resilience4J"></a>2、Resilience4J</h6><p>Resilicence4J提供丰富的容错工具，轻量、简单、文档清晰，也是Spring Cloud官方推荐替代Hystrix的产品。不仅如此，Resilicence4j还原生支持Spring Boot 1.x/2.x，而且监控也支持和prometheus等多款主流产品进行整合。</p>
<h6 id="3、Sentinel"><a href="#3、Sentinel" class="headerlink" title="3、Sentinel"></a>3、Sentinel</h6><p>Sentinel 是阿里巴巴开源的一款断路器实现，在阿里内部已经被大规模采用，非常稳定。</p>
<h4 id="六、Sentinel介绍"><a href="#六、Sentinel介绍" class="headerlink" title="六、Sentinel介绍"></a>六、<strong>Sentinel介绍</strong></h4><h5 id="1、什么是Sentinel"><a href="#1、什么是Sentinel" class="headerlink" title="1、什么是Sentinel"></a>1、什么是Sentinel</h5><p>Sentinel (分布式系统的流量防卫兵) 是阿里开源的一套用于服务容错的综合性解决方案。它以流量为切入点，从流量控制、熔断降级、系统负载保护等多个维度来保护服务的稳定性。</p>
<h5 id="2、Sentinel-的特征"><a href="#2、Sentinel-的特征" class="headerlink" title="2、Sentinel 的特征"></a>2、Sentinel 的特征</h5><ul>
<li>丰富的应用场景：Sentinel 承接了阿里巴巴近 10 年的双十一大促流量的核心场景，例如秒杀、消息削峰填谷、集群流量控制、实时熔断下游不可用应用等。</li>
<li>完备的实时监控：Sentinel 提供了实时的监控功能。通过控制台可以看到接入应用的单台机器秒级数据，甚至 500 台以下规模的集群的汇总运行情况。</li>
<li>广泛的开源生态：Sentinel 提供开箱即用的与其它开源框架/库的整合模块，例如与 SpringCloud、Dubbo、gRPC 的整合。只需要引入相应的依赖并进行简单的配置即可快速地接入Sentinel。</li>
<li>完善的扩展点：Sentinel 提供简单易用、完善的扩展接口。您可以通过实现扩展接口来快速地定制逻辑。例如定制规则管理、适配动态数据源等。</li>
</ul>
<h5 id="3、Sentinel-的组成"><a href="#3、Sentinel-的组成" class="headerlink" title="3、Sentinel 的组成"></a>3、Sentinel 的组成</h5><p>核心库（Java 客户端）：不依赖任何框架/库，能够运行于所有 Java 运行时环境，同时对 Dubbo /Spring Cloud 等框架也有较好的支持。</p>
<p>控制台（Dashboard）：基于 Spring Boot 开发，打包后可以直接运行，不需要额外的 Tomcat 等应用容器。</p>
<h4 id="七、Sentinel控制台"><a href="#七、Sentinel控制台" class="headerlink" title="七、Sentinel控制台"></a>七、Sentinel控制台</h4><p>Sentinel 提供一个轻量级的控制台, 它提供机器发现、单机资源实时监控以及规则管理等功能。</p>
<h5 id="1、下载和安装"><a href="#1、下载和安装" class="headerlink" title="1、下载和安装"></a>1、下载和安装</h5><p>下载地址：<a href="https://github.com/alibaba/Sentinel/releases" target="_blank" rel="noopener">https://github.com/alibaba/Sentinel/releases</a></p>
<p>下载版本：sentinel-dashboard-1.7.0.jar</p>
<h5 id="2、启动控制台"><a href="#2、启动控制台" class="headerlink" title="2、启动控制台"></a>2、启动控制台</h5><p>控制台本身是一个SpringBoot项目，直接使用jar命令启动项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar sentinel-dashboard-1.7.0.jar</span><br></pre></td></tr></table></figure>

<p><a href="https://imgse.com/i/pSwi3VK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwi3VK.png" alt="pSwi3VK.png"></a></p>
<h4 id="八、微服务集成Sentinel客户端"><a href="#八、微服务集成Sentinel客户端" class="headerlink" title="八、微服务集成Sentinel客户端"></a>八、微服务集成Sentinel客户端</h4><h5 id="1、引入依赖-2"><a href="#1、引入依赖-2" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h5><p>service模块中配置Sentinel的pom依赖（实际是在服务消费者端需要依赖）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--服务容错--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2、添加测试方法"><a href="#2、添加测试方法" class="headerlink" title="2、添加测试方法"></a>2、添加测试方法</h5><p>TeacherController中添加如下方法用于测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"message1"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">message1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"message1"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"message2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">message2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"message2"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="九、微服务连接控制台"><a href="#九、微服务连接控制台" class="headerlink" title="九、微服务连接控制台"></a>九、微服务连接控制台</h4><h5 id="1、微服务配置"><a href="#1、微服务配置" class="headerlink" title="1、微服务配置"></a>1、微服务配置</h5><p>service_edu微服务yml中添加以下配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  cloud:</span><br><span class="line">	sentinel:</span><br><span class="line">  	  transport:</span><br><span class="line">		port: 8081 #跟控制台交流的端口，随意指定一个未使用的端口即可</span><br><span class="line">		dashboard: localhost:8080  # 指定控制台服务的地址</span><br></pre></td></tr></table></figure>

<h5 id="2、swagger中测试"><a href="#2、swagger中测试" class="headerlink" title="2、swagger中测试"></a>2、swagger中测试</h5><p>测试message1和message2的访问</p>
<h5 id="3、查看sentinel控制台"><a href="#3、查看sentinel控制台" class="headerlink" title="3、查看sentinel控制台"></a>3、查看sentinel控制台</h5><p><a href="https://imgse.com/i/pSwidKI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwidKI.png" alt="pSwidKI.png"></a></p>
<h5 id="4、控制台运行原理"><a href="#4、控制台运行原理" class="headerlink" title="4、控制台运行原理"></a>4、控制台运行原理</h5><p>Sentinel的控制台是一个SpringBoot编写的程序。我们需要将我们的微服务程序注册到控制台上，即在微服务中指定控制台的地址（localhost:8080）</p>
<p>并且还要开启一个跟控制台传递数据的端口（8081），控制台也可以通过此端口调用微服务中的监控程序获取微服务的各种信息。</p>
<h4 id="十、Sentinel的概念及功能"><a href="#十、Sentinel的概念及功能" class="headerlink" title="十、Sentinel的概念及功能"></a>十、Sentinel的概念及功能</h4><h5 id="一、实现接口限流"><a href="#一、实现接口限流" class="headerlink" title="一、实现接口限流"></a><strong>一、实现接口限流</strong></h5><h6 id="1、添加流控规则"><a href="#1、添加流控规则" class="headerlink" title="1、添加流控规则"></a>1、添加流控规则</h6><p><a href="https://imgse.com/i/pSwFCJe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwFCJe.png" alt="pSwFCJe.png"></a></p>
<h6 id="2、基本参数"><a href="#2、基本参数" class="headerlink" title="2、基本参数"></a>2、基本参数</h6><ul>
<li>资源名：唯一名称，默认是请求路径，可自定义</li>
<li>针对来源：指定对哪个微服务进行限流，默认指default，意思是不区分来源，全部限制</li>
<li>阈值类型/单机阈值：</li>
<li>QPS（每秒请求数量）: 当调用该接口的QPS达到阈值的时候，进行限流</li>
<li>线程数：当调用该接口的线程数达到阈值的时候，进行限流</li>
<li>是否集群：暂不需要集群</li>
</ul>
<p><a href="https://imgse.com/i/pSwF9iD" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwF9iD.png" alt="pSwF9iD.png"></a></p>
<h6 id="3、测试限流效果"><a href="#3、测试限流效果" class="headerlink" title="3、测试限流效果"></a><strong>3、测试限流效果</strong></h6><p>快速访问message1</p>
<h5 id="二、基本概念"><a href="#二、基本概念" class="headerlink" title="二、基本概念"></a>二、基本概念</h5><h6 id="1、资源"><a href="#1、资源" class="headerlink" title="1、资源"></a>1、资源</h6><p>资源就是Sentinel要保护的东西</p>
<p>资源是 Sentinel 的关键概念。它可以是 Java 应用程序中的任何内容，可以是一个服务，也可以是一个方法，甚至可以是一段代码。</p>
<ul>
<li>案例中的message1方法就可以认为是一个资源</li>
</ul>
<h6 id="2、规则"><a href="#2、规则" class="headerlink" title="2、规则"></a>2、规则</h6><p>规则就是用来定义如何进行保护资源的</p>
<p>作用在资源之上, 定义以什么样的方式保护资源，主要包括流量控制规则、熔断降级规则以及系统保护规则。</p>
<ul>
<li>案例中就是为message1资源设置了一种流控规则, 限制了进入message1的流量</li>
</ul>
<h5 id="三、重要功能"><a href="#三、重要功能" class="headerlink" title="三、重要功能"></a>三、重要功能</h5><p><a href="https://imgse.com/i/pSwFKJg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwFKJg.png" alt="pSwFKJg.png"></a></p>
<h6 id="1、流量控制"><a href="#1、流量控制" class="headerlink" title="1、流量控制"></a>1、流量控制</h6><p>思想：保证自己不被上游服务压垮</p>
<p>任意时间到来的请求往往是随机不可控的，而系统的处理能力是有限的。我们需要根据系统的处理能力对流量进行控制。Sentinel可以根据需要把随机的请求调整成合适的形状。</p>
<h6 id="2、熔断降级"><a href="#2、熔断降级" class="headerlink" title="2、熔断降级"></a>2、熔断降级</h6><p>思想：保证自己不被下游服务拖垮</p>
<p>当检测到调用链路中某个资源出现不稳定的表现，例如请求响应时间长或异常比例升高的时候，则对这个资源的调用进行限制，让请求快速失败，避免影响到其它的资源而导致级联故障。</p>
<h6 id="3、系统负载保护"><a href="#3、系统负载保护" class="headerlink" title="3、系统负载保护"></a>3、系统负载保护</h6><p>思想：保证外界环境良好（CPU、内存）</p>
<p>当系统负载较高的时候，如果还持续让请求进入可能会导致系统崩溃，无法响应。在集群环境下，会把本应这台机器承载的流量转发到其它的机器上去。如果这个时候其它的机器也处在一个边缘状态的时候，Sentinel 提供了对应的保护机制，让系统的入口流量和系统的负载达到一个平衡，保证系统在能力范围之内处理最多的请求。</p>
<h4 id="十一、OpenFeign-整合-Sentinel"><a href="#十一、OpenFeign-整合-Sentinel" class="headerlink" title="十一、OpenFeign 整合 Sentinel"></a>十一、OpenFeign 整合 Sentinel</h4><h5 id="1、引入sentinel的依赖"><a href="#1、引入sentinel的依赖" class="headerlink" title="1、引入sentinel的依赖"></a><strong>1、引入sentinel的依赖</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--服务容错--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2、开启Sentinel支持"><a href="#2、开启Sentinel支持" class="headerlink" title="2、开启Sentinel支持"></a>2、开启Sentinel支持</h5><p>在service_edu的yml配置文件中开启Feign对Sentinel的支持</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">sentinel:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h5 id="3、创建容错类"><a href="#3、创建容错类" class="headerlink" title="3、创建容错类"></a>3、创建容错类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.feign.fallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.R;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.feign.OssFileService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.java.Log;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/19 22:59</span></span><br><span class="line"><span class="comment"> * 若OSS 远程宕机了 我们必须要让程序执行下去，头像可以不删但是删除讲师必须执行，但是OSS那边会向上传递一个异常导致 TeacherController无法继续执行下去</span></span><br><span class="line"><span class="comment"> * 于是我们要对程序进行降级处理，我们在这里接住OSS那边的异常并弹出一个友好的消息，然后不阻碍后面的程序继续执行下去</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OssFileServiceFallBack</span> <span class="keyword">implements</span> <span class="title">OssFileService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">removeFile</span><span class="params">(String url)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"程序熔断"</span>);</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、指定容错类"><a href="#4、指定容错类" class="headerlink" title="4、指定容错类"></a>4、指定容错类</h5><p>为OpenFeign远程调用接口添加fallback属性值没指定容错类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"service-oss"</span>, fallback = OssFileServiceFallBack<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">interface</span> <span class="title">OssFileService</span> </span>&#123;</span><br></pre></td></tr></table></figure>

<h5 id="5、测试"><a href="#5、测试" class="headerlink" title="5、测试"></a>5、测试</h5><p>停止service_oss微服务，测试删除讲师的功能</p>
<h2 id="day-8-Alibaba-EasyExcel"><a href="#day-8-Alibaba-EasyExcel" class="headerlink" title="day 8 Alibaba EasyExcel"></a>day 8 Alibaba EasyExcel</h2><h3 id="一、EasyExcel-简介"><a href="#一、EasyExcel-简介" class="headerlink" title="一、EasyExcel 简介"></a>一、EasyExcel 简介</h3><h4 id="一、Excel导入导出的应用场景"><a href="#一、Excel导入导出的应用场景" class="headerlink" title="一、Excel导入导出的应用场景"></a>一、Excel导入导出的应用场景</h4><h5 id="1、数据导入"><a href="#1、数据导入" class="headerlink" title="1、数据导入"></a>1、数据导入</h5><p>减轻录入工作量</p>
<h5 id="2、数据导出"><a href="#2、数据导出" class="headerlink" title="2、数据导出"></a>2、数据导出</h5><p>统计信息归档</p>
<h5 id="3、数据传输"><a href="#3、数据传输" class="headerlink" title="3、数据传输"></a>3、数据传输</h5><p>异构系统之间数据传输</p>
<h4 id="二、EasyExcel简介"><a href="#二、EasyExcel简介" class="headerlink" title="二、EasyExcel简介"></a>二、EasyExcel简介</h4><h5 id="1、官方网站"><a href="#1、官方网站" class="headerlink" title="1、官方网站"></a>1、官方网站</h5><p><a href="https://github.com/alibaba/easyexcel" target="_blank" rel="noopener">https://github.com/alibaba/easyexcel</a></p>
<p>快速开始：<a href="https://www.yuque.com/easyexcel/doc/easyexcel" target="_blank" rel="noopener">https://www.yuque.com/easyexcel/doc/easyexcel</a></p>
<h5 id="2、EasyExcel特点"><a href="#2、EasyExcel特点" class="headerlink" title="2、EasyExcel特点"></a>2、EasyExcel特点</h5><ul>
<li>Java领域解析、生成Excel比较有名的框架有Apache poi、jxl等。但他们都存在一个严重的问题就是非常的耗内存。如果你的系统并发量不大的话可能还行，但是一旦并发上来后一定会OOM或者JVM频繁的full gc。</li>
<li>EasyExcel是阿里巴巴开源的一个excel处理框架，<strong>以使用简单、节省内存著称</strong>。EasyExcel能大大减少占用内存的主要原因是在解析Excel时没有将文件数据一次性全部加载到内存中，而是从磁盘上一行行读取数据，逐个解析。</li>
<li>EasyExcel采用一行一行的解析模式，并将一行的解析结果以观察者的模式通知处理（AnalysisEventListener）。</li>
</ul>
<h3 id="二、写Excel"><a href="#二、写Excel" class="headerlink" title="二、写Excel"></a>二、写Excel</h3><h4 id="一、创建项目"><a href="#一、创建项目" class="headerlink" title="一、创建项目"></a>一、创建项目</h4><h5 id="1、创建一个普通的maven项目"><a href="#1、创建一个普通的maven项目" class="headerlink" title="1、创建一个普通的maven项目"></a>1、创建一个普通的maven项目</h5><p>项目名：alibaba_easyexcel</p>
<h5 id="2、pom中引入xml相关依赖"><a href="#2、pom中引入xml相关依赖" class="headerlink" title="2、pom中引入xml相关依赖"></a>2、pom中引入xml相关依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zwz<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>alibaba_easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.xmlbeans<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xmlbeans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="二、最简单的写"><a href="#二、最简单的写" class="headerlink" title="二、最简单的写"></a>二、最简单的写</h4><h5 id="1、创建实体类"><a href="#1、创建实体类" class="headerlink" title="1、创建实体类"></a>1、创建实体类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.easyexcel.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.annotation.ExcelIgnore;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.annotation.ExcelProperty;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.annotation.format.DateTimeFormat;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/20 15:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelStudentData</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"姓名"</span>,index = <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@DateTimeFormat("yyyy-MM-dd ")</span></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"生日"</span>,index = <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"薪资"</span>,index = <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">private</span> Double salary;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        忽略这个字段</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@ExcelIgnore</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、测试用例"><a href="#2、测试用例" class="headerlink" title="2、测试用例"></a>2、测试用例</h5><ul>
<li>07版本的Excel和03版本的写入方式有所不同</li>
<li>03版本的Excel写入最多一次可写65536行</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguzwzigu.easyexcel;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelWriteTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 最简单的写</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">simpleWrite07</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String fileName = <span class="string">"d:/01-simpleWrite-07.xlsx"</span>;</span><br><span class="line">        <span class="comment">// 这里 需要指定写用哪个class去写，然后写到第一个sheet，名字为模板 然后文件流会自动关闭</span></span><br><span class="line">        EasyExcel.write(fileName, ExcelStudentData.class).sheet("模板").doWrite(data());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">simpleWrite03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String fileName = <span class="string">"d:/01-simpleWrite-03.xls"</span>;</span><br><span class="line">        <span class="comment">// 如果这里想使用03 则 传入excelType参数即可</span></span><br><span class="line">        EasyExcel.write(fileName, ExcelStudentData.class).excelType(ExcelTypeEnum.XLS).sheet("模板").doWrite(data());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;ExcelStudentData&gt; <span class="title">data</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;ExcelStudentData&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//算上标题，做多可写65536行</span></span><br><span class="line">        <span class="comment">//超出：java.lang.IllegalArgumentException: Invalid row number (65536) outside allowable range (0..65535)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">65535</span>; i++) &#123;</span><br><span class="line">            ExcelStudentData data = <span class="keyword">new</span> ExcelStudentData();</span><br><span class="line">            data.setName(<span class="string">"zwz"</span> + i);</span><br><span class="line">            data.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">            data.setSalary(<span class="number">0.56</span>);</span><br><span class="line">            data.setPassword(<span class="string">"123"</span>); <span class="comment">//即使设置也不会被导出</span></span><br><span class="line">            list.add(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="三、指定写入列"><a href="#三、指定写入列" class="headerlink" title="三、指定写入列"></a>三、指定写入列</h4><p>为列配置 index 属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.easyexcel.entity;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelStudentData</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"姓名"</span>, index = <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"生日"</span>, index = <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这里设置3 会导致第二列空的</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"薪资"</span>, index = <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">private</span> Double salary;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 忽略这个字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelIgnore</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="四、自定义格式转换"><a href="#四、自定义格式转换" class="headerlink" title="四、自定义格式转换"></a>四、自定义格式转换</h4><p>配置@DateTimeFormat 和 @NumberFormat</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.easyexcel.entity;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelStudentData</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"姓名"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DateTimeFormat</span>(<span class="string">"yyyy年MM月dd日HH时mm分ss秒"</span>)</span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"生日"</span>)</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@NumberFormat</span>(<span class="string">"#.##%"</span>)<span class="comment">//百分比表示，保留两位小数</span></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"薪资"</span>)</span><br><span class="line">    <span class="keyword">private</span> Double salary;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 忽略这个字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelIgnore</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="三、读Excel"><a href="#三、读Excel" class="headerlink" title="三、读Excel"></a>三、读Excel</h3><h4 id="最简单的读"><a href="#最简单的读" class="headerlink" title="最简单的读"></a>最简单的读</h4><h5 id="1、参考文档"><a href="#1、参考文档" class="headerlink" title="1、参考文档"></a>1、参考文档</h5><p><a href="https://www.yuque.com/easyexcel/doc/read" target="_blank" rel="noopener">https://www.yuque.com/easyexcel/doc/read</a></p>
<h5 id="2、创建监听器"><a href="#2、创建监听器" class="headerlink" title="2、创建监听器"></a>2、创建监听器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.easyexcel.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;</span><br><span class="line"><span class="keyword">import</span> com.zwz.easyexcel.entity.ExcelStudentData;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/20 18:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelStudentDataListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">ExcelStudentData</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BATCH_COUNT = <span class="number">1000</span>;</span><br><span class="line">    List&lt;ExcelStudentData&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 遍历每一行的记录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> excelStudentData</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> analysisContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(ExcelStudentData excelStudentData, AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//log.info("解析到一条记录:&#123;&#125;",excelStudentData);</span></span><br><span class="line">        list.add(excelStudentData);</span><br><span class="line">        <span class="keyword">if</span> (list.size()&gt;=BATCH_COUNT)&#123;</span><br><span class="line">            <span class="comment">//TODO 存储数据库</span></span><br><span class="line">            log.info(<span class="string">"存储数据库，并清理内存"</span>);</span><br><span class="line">            list.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有数据读取之后的收尾工作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> analysisContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"存储剩余数据"</span>);</span><br><span class="line">        log.info(<span class="string">"所有数据解析完成"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、测试用例"><a href="#3、测试用例" class="headerlink" title="3、测试用例"></a>3、测试用例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.easyexcel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.EasyExcel;</span><br><span class="line"><span class="keyword">import</span> com.zwz.easyexcel.entity.ExcelStudentData;</span><br><span class="line"><span class="keyword">import</span> com.zwz.easyexcel.listener.ExcelStudentDataListener;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/20 18:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelReadTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">simpleRead07</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String fileName = <span class="string">"D:/excelzwz/simple-write.xlsx"</span>;</span><br><span class="line">        EasyExcel.read(fileName, ExcelStudentData<span class="class">.<span class="keyword">class</span>,<span class="title">new</span> <span class="title">ExcelStudentDataListener</span>())</span></span><br><span class="line"><span class="class">                .<span class="title">sheet</span>()</span></span><br><span class="line"><span class="class">                .<span class="title">doRead</span>()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="四、需求和类别导入前端实现"><a href="#四、需求和类别导入前端实现" class="headerlink" title="四、需求和类别导入前端实现"></a>四、需求和类别导入前端实现</h3><h4 id="一、需求"><a href="#一、需求" class="headerlink" title="一、需求"></a>一、需求</h4><h5 id="1、导入课程分类"><a href="#1、导入课程分类" class="headerlink" title="1、导入课程分类"></a>1、导入课程分类</h5><p><a href="https://imgse.com/i/pSwtoTK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwtoTK.png" alt="pSwtoTK.png"></a></p>
<h5 id="2、课程分类列表"><a href="#2、课程分类列表" class="headerlink" title="2、课程分类列表"></a><strong>2、课程分类列表</strong></h5><p><a href="https://imgse.com/i/pSwN9k8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwN9k8.png" alt="pSwN9k8.png"></a></p>
<h4 id="二、Excel模板上传"><a href="#二、Excel模板上传" class="headerlink" title="二、Excel模板上传"></a>二、Excel模板上传</h4><h5 id="1、编辑Excel模板"><a href="#1、编辑Excel模板" class="headerlink" title="1、编辑Excel模板"></a>1、编辑Excel模板</h5><h5 id="2、将文件上传至阿里云OSS"><a href="#2、将文件上传至阿里云OSS" class="headerlink" title="2、将文件上传至阿里云OSS"></a>2、将文件上传至阿里云OSS</h5><p><a href="https://imgse.com/i/pSwNFpQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwNFpQ.png" alt="pSwNFpQ.png"></a></p>
<h4 id="三、路由和组件"><a href="#三、路由和组件" class="headerlink" title="三、路由和组件"></a>三、路由和组件</h4><h5 id="1、添加vue组件"><a href="#1、添加vue组件" class="headerlink" title="1、添加vue组件"></a>1、添加vue组件</h5><p><a href="https://imgse.com/i/pSwNukT" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwNukT.png" alt="pSwNukT.png"></a></p>
<h5 id="2、添加路由"><a href="#2、添加路由" class="headerlink" title="2、添加路由"></a>2、添加路由</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 课程分类管理</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/subject'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: <span class="string">'/subject/list'</span>,</span><br><span class="line">    name: <span class="string">'Subject'</span>,</span><br><span class="line">    meta: &#123; <span class="attr">title</span>: <span class="string">'课程分类管理'</span> &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'list'</span>,</span><br><span class="line">        name: <span class="string">'SubjectList'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/subject/list'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'课程分类列表'</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'import'</span>,</span><br><span class="line">        name: <span class="string">'SubjectImport'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/subject/import'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'导入课程分类'</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h4 id="四、import-vue组件"><a href="#四、import-vue组件" class="headerlink" title="四、import.vue组件"></a>四、import.vue组件</h4><h5 id="1、添加配置"><a href="#1、添加配置" class="headerlink" title="1、添加配置"></a>1、添加配置</h5><p>config/dev.env.js中添加阿里云oss bucket地址，<strong>注意：修改后重启前端服务器</strong></p>
<p><a href="https://imgse.com/i/pSwdSTx" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwdSTx.png" alt="pSwdSTx.png"></a></p>
<h5 id="2、js定义数据"><a href="#2、js定义数据" class="headerlink" title="2、js定义数据"></a>2、js定义数据</h5><p><a href="https://imgse.com/i/pSwdFpD" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwdFpD.png" alt="pSwdFpD.png"></a></p>
<h5 id="3、template"><a href="#3、template" class="headerlink" title="3、template"></a>3、template</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">"120px"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"信息描述"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">"info"</span>&gt;</span>excel模版说明<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tag</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-download"</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">"defaultExcelTemplate"</span>&gt;</span>点击下载模版<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"选择Excel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">          <span class="attr">ref</span>=<span class="string">"upload"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:auto-upload</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:on-exceed</span>=<span class="string">"fileUploadExceed"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:on-success</span>=<span class="string">"fileUploadSuccess"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:on-error</span>=<span class="string">"fileUploadError"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:limit</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">action</span>=<span class="string">"http://127.0.0.1:8110/admin/edu/subject/import"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"file"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">accept</span>=<span class="string">"application/vnd.ms-excel"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">slot</span>=<span class="string">"trigger"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>选取文件<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:disabled</span>=<span class="string">"importBtnDisabled"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"margin-left: 10px;"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"success"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">"submitUpload()"</span>&gt;</span>导入<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4、js上传方法"><a href="#4、js上传方法" class="headerlink" title="4、js上传方法"></a>4、js上传方法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// 执行上传</span></span><br><span class="line">    submitUpload() &#123;</span><br><span class="line">      <span class="keyword">this</span>.importBtnDisabled = <span class="literal">true</span> <span class="comment">// 禁用按钮</span></span><br><span class="line">      <span class="keyword">this</span>.$refs.upload.submit()</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当选择文件超出约定时触发</span></span><br><span class="line">    fileUploadExceed() &#123;</span><br><span class="line">      <span class="keyword">this</span>.$message.warning(<span class="string">`只能选取一个文件`</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 当选择文件上传成功的回调</span></span><br><span class="line">    fileUploadSuccess(response) &#123;</span><br><span class="line">      <span class="keyword">this</span>.importBtnDisabled = <span class="literal">false</span> <span class="comment">// 启用按钮</span></span><br><span class="line">      <span class="keyword">this</span>.$message.success(response)</span><br><span class="line">      <span class="keyword">this</span>.$refs.upload.clearFiles() <span class="comment">// 清空文件列表</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 当选择文件上传失败的回调</span></span><br><span class="line">    fileUploadError(err) &#123;</span><br><span class="line">      <span class="keyword">this</span>.importBtnDisabled = <span class="literal">false</span> <span class="comment">// 启用按钮</span></span><br><span class="line">      <span class="keyword">this</span>.$message.error(err.message)</span><br><span class="line">      <span class="keyword">this</span>.$refs.upload.clearFiles() <span class="comment">// 清空文件列表</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h3 id="五、导入课程分类"><a href="#五、导入课程分类" class="headerlink" title="五、导入课程分类"></a>五、导入课程分类</h3><h4 id="一、准备"><a href="#一、准备" class="headerlink" title="一、准备"></a>一、准备</h4><h5 id="1、添加依赖"><a href="#1、添加依赖" class="headerlink" title="1、添加依赖"></a>1、添加依赖</h5><p>service_edu中添加如下依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.xmlbeans<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xmlbeans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2、创建Excel实体类"><a href="#2、创建Excel实体类" class="headerlink" title="2、创建Excel实体类"></a>2、创建Excel实体类</h5><p><a href="https://imgse.com/i/pSwdJns" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwdJns.png" alt="pSwdJns.png"></a></p>
<h4 id="二、实现Excel导入"><a href="#二、实现Excel导入" class="headerlink" title="二、实现Excel导入"></a>二、实现Excel导入</h4><h5 id="1、创建监听器"><a href="#1、创建监听器" class="headerlink" title="1、创建监听器"></a>1、创建监听器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.Subject;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.excel.ExcelSubjectData;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.mapper.SubjectMapper;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/20 22:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelSubjectDataListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">ExcelSubjectData</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SubjectMapper subjectMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 遍历每一行数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> excelSubjectData</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> analysisContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(ExcelSubjectData excelSubjectData, AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"解析到一条记录：&#123;&#125;"</span>,excelSubjectData);</span><br><span class="line">        <span class="comment">//处理读取出来的数据</span></span><br><span class="line">        String levelOneTitle = excelSubjectData.getLevelOneTitle();     <span class="comment">// 一级标题</span></span><br><span class="line">        String levelTwoTitle = excelSubjectData.getLevelTwoTitle();     <span class="comment">// 二级标题</span></span><br><span class="line">        log.info(<span class="string">"levelOneTitle:&#123;&#125;"</span>,levelOneTitle);</span><br><span class="line">        log.info(<span class="string">"levelTwoTitle:&#123;&#125;"</span>,levelTwoTitle);</span><br><span class="line">        String parentId = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//先判断数据是否存在</span></span><br><span class="line">        Subject subjectLevelOne = <span class="keyword">this</span>.getByTitle(levelOneTitle);</span><br><span class="line">        <span class="keyword">if</span> (subjectLevelOne==<span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//组装一级类别</span></span><br><span class="line">            Subject subject = <span class="keyword">new</span> Subject();</span><br><span class="line">            subject.setParentId(<span class="string">"0"</span>);</span><br><span class="line">            subject.setTitle(levelOneTitle);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//组装数据，存入数据库</span></span><br><span class="line">            subjectMapper.insert(subject);</span><br><span class="line">            parentId = subject.getId();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            parentId = subjectLevelOne.getId();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断数据是否存在</span></span><br><span class="line">        Subject subjectLevelTwo = <span class="keyword">this</span>.getSubByTitle(levelTwoTitle, parentId);</span><br><span class="line">        <span class="keyword">if</span> (subjectLevelTwo == <span class="keyword">null</span>) &#123;</span><br><span class="line">            Subject subject = <span class="keyword">new</span> Subject();</span><br><span class="line">            subject.setTitle(levelTwoTitle);</span><br><span class="line">            subject.setParentId(parentId);</span><br><span class="line">            <span class="comment">//传入数据库</span></span><br><span class="line">            subjectMapper.insert(subject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有数据读取完成后的收尾工作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> analysisContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"所有数据解析完成"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、监听器中添加辅助方法"><a href="#2、监听器中添加辅助方法" class="headerlink" title="2、监听器中添加辅助方法"></a>2、监听器中添加辅助方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据一级分类的名称查询数据是否存在</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> title</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Subject <span class="title">getByTitle</span><span class="params">(String title)</span></span>&#123;</span><br><span class="line">    QueryWrapper&lt;Subject&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">"title"</span>,title);</span><br><span class="line">    queryWrapper.eq(<span class="string">"parent_id"</span>,<span class="string">"0"</span>); <span class="comment">//一级分类</span></span><br><span class="line">    <span class="keyword">return</span> subjectMapper.selectOne(queryWrapper);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据分类的名称和父id判断是否存在</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> title</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parentId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Subject <span class="title">getSubByTitle</span><span class="params">(String title,String parentId)</span></span>&#123;</span><br><span class="line">    QueryWrapper&lt;Subject&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">"title"</span>,title);</span><br><span class="line">    queryWrapper.eq(<span class="string">"parent_id"</span>,parentId); <span class="comment">//二级分类</span></span><br><span class="line">    <span class="keyword">return</span> subjectMapper.selectOne(queryWrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、SubjectService"><a href="#3、SubjectService" class="headerlink" title="3、SubjectService"></a><strong>3、SubjectService</strong></h5><p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">batchImport</span><span class="params">(InputStream inputStream)</span></span>;</span><br></pre></td></tr></table></figure>

<p>实现：获取Excel记录并逐条导入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.EasyExcel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.support.ExcelTypeEnum;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.Subject;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.excel.ExcelSubjectData;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.SubjectVo;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.listener.ExcelSubjectDataListener;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.mapper.SubjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.service.SubjectService;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 课程科目 服务实现类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">SubjectMapper</span>, <span class="title">Subject</span>&gt; <span class="keyword">implements</span> <span class="title">SubjectService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SubjectMapper subjectMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batchImport</span><span class="params">(InputStream inputStream)</span> </span>&#123;</span><br><span class="line">        EasyExcel.read(inputStream,ExcelSubjectData<span class="class">.<span class="keyword">class</span>,<span class="title">new</span> <span class="title">ExcelSubjectDataListener</span>(<span class="title">subjectMapper</span>))</span></span><br><span class="line"><span class="class">                .<span class="title">excelType</span>(<span class="title">ExcelTypeEnum</span>.<span class="title">XLS</span>)</span></span><br><span class="line"><span class="class">                .<span class="title">sheet</span>().<span class="title">doRead</span>()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、SubjectController"><a href="#4、SubjectController" class="headerlink" title="4、SubjectController"></a>4、SubjectController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.controller.admin;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.R;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.ResultCodeEnum;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.util.ExceptionUtils;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.base.exception.GuliException;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.SubjectVo;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.service.SubjectService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.java.Log;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 课程科目 前端控制器</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Api</span>(tags = <span class="string">"课程分类管理"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/admin/edu/subject"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SubjectService subjectService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"Excel批量导入"</span>)</span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"import"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">batchImport</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            @ApiParam(value = <span class="string">"Excel文件"</span>,required = <span class="keyword">true</span>)</span></span></span><br><span class="line"><span class="function">            @<span class="title">RequestParam</span><span class="params">(<span class="string">"file"</span>)</span> MultipartFile file)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream inputStream = file.getInputStream();</span><br><span class="line">            subjectService.batchImport(inputStream);</span><br><span class="line">            <span class="keyword">return</span> R.ok().message(<span class="string">"批量导入成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(ExceptionUtils.getMessage(e));</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(ResultCodeEnum.EXCEL_DATA_IMPORT_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="三、前端完善回调函数"><a href="#三、前端完善回调函数" class="headerlink" title="三、前端完善回调函数"></a><strong>三、前端完善回调函数</strong></h4><h5 id="1、成功回调"><a href="#1、成功回调" class="headerlink" title="1、成功回调"></a>1、成功回调</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当选择文件上传成功的回调</span></span><br><span class="line">fileUploadSuccess(response) &#123;</span><br><span class="line">    <span class="keyword">this</span>.importBtnDisabled = <span class="literal">false</span> <span class="comment">// 启用按钮</span></span><br><span class="line">    <span class="keyword">this</span>.$message.success(response)</span><br><span class="line">    <span class="keyword">this</span>.$refs.upload.clearFiles() <span class="comment">// 清空文件列表</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h5 id="2、失败回调"><a href="#2、失败回调" class="headerlink" title="2、失败回调"></a>2、失败回调</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当选择文件上传失败的回调</span></span><br><span class="line">fileUploadError(err) &#123;</span><br><span class="line">    <span class="keyword">this</span>.importBtnDisabled = <span class="keyword">false</span> <span class="comment">// 启用按钮</span></span><br><span class="line">    <span class="keyword">this</span>.$message.error(err.message)</span><br><span class="line">    <span class="keyword">this</span>.$refs.upload.clearFiles() <span class="comment">// 清空文件列表</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="六、分类列表展示"><a href="#六、分类列表展示" class="headerlink" title="六、分类列表展示"></a>六、分类列表展示</h3><h4 id="一、后端接口-2"><a href="#一、后端接口-2" class="headerlink" title="一、后端接口"></a>一、后端接口</h4><h5 id="1、创建vo"><a href="#1、创建vo" class="headerlink" title="1、创建vo"></a>1、创建vo</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.entity.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/28 14:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectVo</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> Integer sort;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;SubjectVo&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、创建controller方法"><a href="#2、创建controller方法" class="headerlink" title="2、创建controller方法"></a>2、创建controller方法</h5><p>SubjectController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"嵌套数据列表"</span>)</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"nested-list"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">nestedList</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;SubjectVo&gt; subjectVoList =  subjectService.nestedList();</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"items"</span>,subjectVoList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、创建SubjectService方法"><a href="#3、创建SubjectService方法" class="headerlink" title="3、创建SubjectService方法"></a>3、创建SubjectService方法</h5><p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;SubjectVo&gt; <span class="title">nestedList</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;SubjectVo&gt; <span class="title">nestedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseMapper.selectNestedListByParentId(<span class="string">"0"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、创建mapper映射"><a href="#4、创建mapper映射" class="headerlink" title="4、创建mapper映射"></a>4、创建mapper映射</h5><p>SubjectMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;SubjectVo&gt; <span class="title">selectNestedListByParentId</span><span class="params">(String parentId)</span></span>;</span><br></pre></td></tr></table></figure>

<p>SubjectMapper.xml</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC <span class="string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">"com.zwz.guli.service.edu.mapper.SubjectMapper"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;resultMap id=<span class="string">"nestedSubject"</span> type=<span class="string">"com.zwz.guli.service.edu.entity.vo.SubjectVo"</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">"id"</span> column=<span class="string">"id"</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">"title"</span> column=<span class="string">"title"</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">"sort"</span> column=<span class="string">"sort"</span> /&gt;</span><br><span class="line">        &lt;collection property=<span class="string">"children"</span></span><br><span class="line">                    column=<span class="string">"id"</span></span><br><span class="line">                    select=<span class="string">"selectNestedListByParentId"</span></span><br><span class="line">                    ofType=<span class="string">"com.zwz.guli.service.edu.entity.vo.SubjectVo"</span> /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=<span class="string">"selectNestedListByParentId"</span> resultMap=<span class="string">"nestedSubject"</span>&gt;</span><br><span class="line">        select id,sort,title from edu_subject where parent_id = #&#123;parentId&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<h5 id="5、Swagger测试"><a href="#5、Swagger测试" class="headerlink" title="5、Swagger测试"></a>5、Swagger测试</h5><blockquote>
<p> 报告异常：</p>
</blockquote>
<p>ResultCodeEnum(success=false, code=20001, message=未知错误)</p>
<p>Invalid bound statement (not found): </p>
<p>com.zwz.guli.service.edu.mapper.SubjectMapper.selectNestedListByParentId</p>
<h4 id="二、异常解决"><a href="#二、异常解决" class="headerlink" title="二、异常解决"></a>二、异常解决</h4><h5 id="1、问题分析"><a href="#1、问题分析" class="headerlink" title="1、问题分析"></a>1、问题分析</h5><p>dao层编译后只有class文件，没有mapper.xml，<br>因为maven工程在默认情况下src/main/java目录下的所有资源文件是不发布到target目录下的</p>
<h5 id="2、解决方案"><a href="#2、解决方案" class="headerlink" title="2、解决方案"></a>2、解决方案</h5><p>（1）在service_edu的pom中配置如下节点<br>项目打包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 项目打包时会将java目录中的*.xml文件也进行打包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>重新打包项目会发现target目录下出现了xml文件夹</p>
<p>（2）还需要在Spring Boot配置文件中添加配置</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:com/atguigu/guli/service/edu/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure>

<h4 id="三、前端整合"><a href="#三、前端整合" class="headerlink" title="三、前端整合"></a><strong>三、前端整合</strong></h4><h5 id="1、api-2"><a href="#1、api-2" class="headerlink" title="1、api"></a>1、api</h5><p>创建api/subject.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  getNestedTreeList() &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      url: <span class="string">'/admin/edu/subject/nested-list'</span>,</span><br><span class="line">      method: <span class="string">'get'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、list组件"><a href="#2、list组件" class="headerlink" title="2、list组件"></a>2、list组件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model&#x3D;&quot;filterText&quot;</span><br><span class="line">      placeholder&#x3D;&quot;输入关键字进行过滤&quot;</span><br><span class="line">      style&#x3D;&quot;margin-bottom: 15px;&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-tree ref&#x3D;&quot;tree&quot; :data&#x3D;&quot;subjectList&quot; :props&#x3D;&quot;defaultProps&quot; :filter-node-method&#x3D;&quot;filterNode&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import subjectApi from &#39;@&#x2F;api&#x2F;subject&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      filterText: &#39;&#39;, &#x2F;&#x2F; 过滤文本</span><br><span class="line">      subjectList: [], &#x2F;&#x2F; 数据列表</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        children: &#39;children&#39;,</span><br><span class="line">        label: &#39;title&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    filterText(val) &#123;</span><br><span class="line">      &#x2F;&#x2F; console.log(val)</span><br><span class="line">      this.$refs.tree.filter(val)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.fetchNodeList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    fetchNodeList() &#123;</span><br><span class="line">      subjectApi.getNestedTreeList().then(res &#x3D;&gt; &#123;</span><br><span class="line">        this.subjectList &#x3D; res.data.items</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 过滤节点的方法 对应&lt;el-tree :filter-node-method&#x3D;&quot;filterNode&quot;&#x2F;&gt;</span><br><span class="line">    filterNode(value, data) &#123;</span><br><span class="line">      if (!value) &#123;</span><br><span class="line">        return true</span><br><span class="line">      &#125;</span><br><span class="line">      return data.title.toLowerCase().indexOf(value.toLowerCase()) !&#x3D;&#x3D; -1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h5 id="3、优化前端过滤功能"><a href="#3、优化前端过滤功能" class="headerlink" title="3、优化前端过滤功能"></a>3、优化前端过滤功能</h5><p>忽略大小写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">filterNode(value, data) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> data.title.toLowerCase().indexOf(value.toLowerCase()) !== <span class="number">-1</span><span class="comment">//忽略大小写</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="day-9"><a href="#day-9" class="headerlink" title="day 9"></a>day 9</h2><h3 id="一、需求分析"><a href="#一、需求分析" class="headerlink" title="一、需求分析"></a>一、需求分析</h3><h4 id="一、课程发布流程"><a href="#一、课程发布流程" class="headerlink" title="一、课程发布流程"></a>一、课程发布流程</h4><h5 id="1、编辑课程基本信息"><a href="#1、编辑课程基本信息" class="headerlink" title="1、编辑课程基本信息"></a>1、编辑课程基本信息</h5><p><a href="https://imgse.com/i/pSwrYFI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwrYFI.png" alt="pSwrYFI.png"></a></p>
<h5 id="2、课程大纲列表"><a href="#2、课程大纲列表" class="headerlink" title="2、课程大纲列表"></a>2、课程大纲列表</h5><p><a href="https://imgse.com/i/pSwrlOe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwrlOe.png" alt="pSwrlOe.png"></a></p>
<h5 id="3、添加章节"><a href="#3、添加章节" class="headerlink" title="3、添加章节"></a>3、添加章节</h5><p><a href="https://imgse.com/i/pSwr3eH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwr3eH.png" alt="pSwr3eH.png"></a></p>
<h5 id="4、添加章节"><a href="#4、添加章节" class="headerlink" title="4、添加章节"></a>4、添加章节</h5><p><img src="https://s1.ax1x.com/2023/01/30/pSwr8wd.png" alt="pSwr8wd.png"></p>
<h5 id="5、课程发布预览"><a href="#5、课程发布预览" class="headerlink" title="5、课程发布预览"></a>5、课程发布预览</h5><p><a href="https://imgse.com/i/pSwrtYt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwrtYt.png" alt="pSwrtYt.png"></a></p>
<h4 id="二、课程列表"><a href="#二、课程列表" class="headerlink" title="二、课程列表"></a>二、课程列表</h4><p><a href="https://imgse.com/i/pSwrGTA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/30/pSwrGTA.png" alt="pSwrGTA.png"></a></p>
<h3 id="二、课程发布表单-步骤导航"><a href="#二、课程发布表单-步骤导航" class="headerlink" title="二、课程发布表单-步骤导航"></a>二、课程发布表单-步骤导航</h3><h4 id="一、配置路由"><a href="#一、配置路由" class="headerlink" title="一、配置路由"></a>一、配置路由</h4><h5 id="1、添加vue组件-1"><a href="#1、添加vue组件-1" class="headerlink" title="1、添加vue组件"></a>1、添加vue组件</h5><p>组件开发的场景</p>
<ul>
<li>业务逻辑独立</li>
<li>组件可复用</li>
<li>组件过于庞大可拆分为子组件</li>
</ul>
<p><img src="C:%5CUsers%5CZWZ%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1675342372473.png" alt="1675342372473"></p>
<h5 id="2、添加路由-1"><a href="#2、添加路由-1" class="headerlink" title="2、添加路由"></a>2、添加路由</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 课程管理</span></span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/course'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: <span class="string">'/course/list'</span>,</span><br><span class="line">    name: <span class="string">'Course'</span>,</span><br><span class="line">    meta: &#123; <span class="attr">title</span>: <span class="string">'课程管理'</span> &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'list'</span>,</span><br><span class="line">        name: <span class="string">'CourseList'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/course/list'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'课程列表'</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'info'</span>,</span><br><span class="line">        name: <span class="string">'CourseInfo'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/course/form'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'发布课程'</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'info/:id'</span>,</span><br><span class="line">        name: <span class="string">'CourseInfoEdit'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/course/form'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'编辑课程'</span> &#125;,</span><br><span class="line">        hidden: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'chapter/:id'</span>,</span><br><span class="line">        name: <span class="string">'CourseChapterEdit'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/course/form'</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'编辑大纲'</span> &#125;,</span><br><span class="line">        hidden: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h4 id="二、整合步骤导航"><a href="#二、整合步骤导航" class="headerlink" title="二、整合步骤导航"></a>二、整合步骤导航</h4><p><strong>组件开发的步骤</strong></p>
<ul>
<li>step1：创建组件文件（*.vue）</li>
<li>step2：在父组件中引入组件  import</li>
<li>step3：注册组件 components</li>
<li>step4：使用组件 &lt;组件名&gt;</li>
</ul>
<h5 id="1、表单页面"><a href="#1、表单页面" class="headerlink" title="1、表单页面"></a>1、表单页面</h5><p>form.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;h2 style&#x3D;&quot;text-align: center;&quot;&gt;发布新课程&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;el-steps :active&#x3D;&quot;active&quot; finish-status&#x3D;&quot;success&quot; simple style&#x3D;&quot;margin-bottom: 40px&quot;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;填写课程基本信息&quot; &#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;创建课程大纲&quot; &#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;发布课程&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-steps&gt;</span><br><span class="line">    &lt;!-- 填写课程基本信息 --&gt;</span><br><span class="line">    &lt;info v-if&#x3D;&quot;active &#x3D;&#x3D;&#x3D; 0&quot; &#x2F;&gt;	</span><br><span class="line">    &lt;!-- 创建课程大纲 --&gt;</span><br><span class="line">    &lt;chapter v-if&#x3D;&quot;active &#x3D;&#x3D;&#x3D; 1&quot; &#x2F;&gt;</span><br><span class="line">    &lt;!-- 发布课程 --&gt;</span><br><span class="line">    &lt;Publish v-if&#x3D;&quot;active &#x3D;&#x3D;&#x3D; 2 || active &#x3D;&#x3D;&#x3D; 3&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 引入子组件</span><br><span class="line">import Info from &#39;@&#x2F;views&#x2F;course&#x2F;components&#x2F;Info&#39;</span><br><span class="line">import Chapter from &#39;@&#x2F;views&#x2F;course&#x2F;components&#x2F;Chapter&#39;</span><br><span class="line">import Publish from &#39;@&#x2F;views&#x2F;course&#x2F;components&#x2F;Publish&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123; Info, Chapter, Publish &#125;, &#x2F;&#x2F; 注册子组件</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      active: 0,</span><br><span class="line">      courseId: null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此处的active用于组件间的切换，当active  = 0 时为填写课程基本信息页面 (info.vue页面)</p>
<p>当active = 1 时是 创建课程大纲页面 (Chapter.vue页面)</p>
<p>当active = 2 时是 创建发布课程页面 (Publish.vue页面)</p>
</blockquote>
<h5 id="2、课程信息页面"><a href="#2、课程信息页面" class="headerlink" title="2、课程信息页面"></a>2、课程信息页面</h5><p>components/info.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;!-- 课程信息表单 TODO --&gt;</span><br><span class="line">    &lt;div style&#x3D;&quot;text-align:center&quot;&gt;</span><br><span class="line">      &lt;el-button :disabled&#x3D;&quot;saveBtnDisabled&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;saveAndNext()&quot;&gt;保存并下一步&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      saveBtnDisabled: false &#x2F;&#x2F; 按钮是否禁用</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; 保存并下一步</span><br><span class="line">    saveAndNext() &#123;</span><br><span class="line">      this.saveBtnDisabled &#x3D; true   </span><br><span class="line">      this.$parent.active &#x3D; 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3、课程大纲页面"><a href="#3、课程大纲页面" class="headerlink" title="3、课程大纲页面"></a>3、课程大纲页面</h5><p>components/Chapter/index.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 章节列表 TODO --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"prev()"</span>&gt;</span>上一步<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"next()"</span>&gt;</span>下一步<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 上一步</span></span></span><br><span class="line">    prev() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$parent.active = <span class="number">0</span></span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// 下一步</span></span></span><br><span class="line">    next() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$parent.active = <span class="number">2</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4、课程发布页面"><a href="#4、课程发布页面" class="headerlink" title="4、课程发布页面"></a>4、课程发布页面</h5><p>components/publish.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--课程预览 TODO--&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"prev()"</span>&gt;</span>上一步<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:disabled</span>=<span class="string">"publishBtnDisabled"</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"publish()"</span>&gt;</span>发布课程<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      publishBtnDisabled: <span class="literal">false</span> <span class="comment">// 按钮是否禁用</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 上一步</span></span></span><br><span class="line">    prev() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$parent.active = <span class="number">1</span></span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// 下一步</span></span></span><br><span class="line">    publish() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.publishBtnDisabled = <span class="literal">true</span>   </span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$parent.active = <span class="number">3</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="三、编辑课程基本信息"><a href="#三、编辑课程基本信息" class="headerlink" title="三、编辑课程基本信息"></a>三、编辑课程基本信息</h3><h4 id="一、后端接口-3"><a href="#一、后端接口-3" class="headerlink" title="一、后端接口"></a>一、后端接口</h4><p>service_edu微服务</p>
<h5 id="1、定义form表单对象"><a href="#1、定义form表单对象" class="headerlink" title="1、定义form表单对象"></a>1、定义form表单对象</h5><p>CourseInfoForm.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.entity.form;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Data</span>:2023/1/31 12:20</span></span><br><span class="line"><span class="comment"> * 表单对象的封装，用于新增课程的表单，由于新增表单的所需数据比较杂所以用新的entity对象来封装</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModel</span>(<span class="string">"课程基本信息"</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseInfoForm</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程讲师ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String teacherId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程专业ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String subjectId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程专业父级ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String subjectParentId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程标题"</span>)</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程销售价格，设置为0则可免费观看"</span>)</span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"总课时"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程封面图片路径"</span>)</span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程简介"</span>)</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、CourseDescription主键策略"><a href="#2、CourseDescription主键策略" class="headerlink" title="2、CourseDescription主键策略"></a>2、CourseDescription主键策略</h5><p>在CourseDescription中添加主键定义，并定义生成策略为IdType.NONE</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"讲师ID"</span>)</span><br><span class="line"><span class="meta">@TableId</span>(value = <span class="string">"id"</span>, type = IdType.NONE)</span><br><span class="line"><span class="keyword">private</span> String id;</span><br></pre></td></tr></table></figure>

<h5 id="3、定义常量"><a href="#3、定义常量" class="headerlink" title="3、定义常量"></a>3、定义常量</h5><p>实体类Course.Java中定义</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String COURSE_DRAFT = <span class="string">"Draft"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String COURSE_NORMAL = <span class="string">"Normal"</span>;</span><br></pre></td></tr></table></figure>

<h5 id="4、定义控制层接口"><a href="#4、定义控制层接口" class="headerlink" title="4、定义控制层接口"></a>4、定义控制层接口</h5><p>CourseController.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwz.guli.service.edu.controller.admin;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.common.base.result.R;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.Course;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.form.CourseInfoForm;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.CoursePublishVo;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.CourseQueryVo;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.CourseVo;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.entity.vo.TeacherQueryVo;</span><br><span class="line"><span class="keyword">import</span> com.zwz.guli.service.edu.service.CourseService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 课程 前端控制器</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Api</span>(tags = <span class="string">"课程管理"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/admin/edu/course"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CourseService courseService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"新增课程"</span>)</span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"save-courseInfo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">saveCourseInfo</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            @ApiParam(value = <span class="string">"课程基本信息"</span>, required = <span class="keyword">true</span>)</span></span></span><br><span class="line"><span class="function">            @RequestBody</span></span><br><span class="line"><span class="function">                    CourseInfoForm courseInfoForm</span></span><br><span class="line"><span class="function">    ) </span>&#123;</span><br><span class="line">        String courseId = courseService.saveCourseInfo(courseInfoForm);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"courseId"</span>, courseId).message(<span class="string">"保存成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5、定义业务层方法"><a href="#5、定义业务层方法" class="headerlink" title="5、定义业务层方法"></a>5、定义业务层方法</h5><p>接口：CourseService.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CourseService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">Course</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">saveCourseInfo</span><span class="params">(CourseInfoForm courseInfoForm)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现：CourseServiceImpl.java</p>
<p>注意：这里使用了事务</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span>(rollbackFor = Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">Override</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">String</span> <span class="title">saveCourseInfo</span>(<span class="title">CourseInfoForm</span> <span class="title">courseInfoForm</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//保存course</span></span><br><span class="line">    Course course = <span class="keyword">new</span> Course();</span><br><span class="line">    BeanUtils.copyProperties(courseInfoForm,course);        <span class="comment">//把一个不同的类的相同字段复制给另一个拥有相同属性的对象</span></span><br><span class="line">    course.setStatus(Course.COURSE_DRAFT);</span><br><span class="line">    baseMapper.insert(course);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存CourseDescription</span></span><br><span class="line">    CourseDescription courseDescription = <span class="keyword">new</span> CourseDescription();</span><br><span class="line">    courseDescription.setDescription(courseInfoForm.getDescription());</span><br><span class="line">    courseDescription.setId(course.getId());</span><br><span class="line">    courseDescriptionMapper.insert(courseDescription);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> course.getId();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、前端实现"><a href="#二、前端实现" class="headerlink" title="二、前端实现"></a>二、前端实现</h4><h5 id="1、定义api"><a href="#1、定义api" class="headerlink" title="1、定义api"></a>1、定义api</h5><p>api/course.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="comment">// @会使用guli_admin/src/utils/request.js中定义的 process.env.BASE_API (api 的 base_url)</span></span><br><span class="line">  saveCourseInfo(courseInfo) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      url: <span class="string">'/admin/edu/course/save-courseInfo'</span>,</span><br><span class="line">      method: <span class="string">'post'</span>,</span><br><span class="line">      data: courseInfo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、组件模板"><a href="#2、组件模板" class="headerlink" title="2、组件模板"></a>2、组件模板</h5><p>src/views/course/components/Info.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 课程信息表单 --&gt;</span><br><span class="line"></span><br><span class="line">&lt;el-form label-width&#x3D;&quot;120px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;课程标题&quot;&gt;</span><br><span class="line">        &lt;el-input v-model&#x3D;&quot;courseInfo.title&quot; placeholder&#x3D;&quot; 示例：机器学习项目课：从基础到搭建项目视频课程。专业名称注意大小写&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 课程讲师 TODO --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 所属分类 TODO --&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;总课时&quot;&gt;</span><br><span class="line">        &lt;el-input-number :min&#x3D;&quot;0&quot; v-model&#x3D;&quot;courseInfo.lessonNum&quot; controls-position&#x3D;&quot;right&quot; placeholder&#x3D;&quot;请填写课程的总课时数&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 课程简介 TODO --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 课程封面 TODO --&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;课程价格&quot;&gt;</span><br><span class="line">        &lt;el-input-number :min&#x3D;&quot;0&quot; v-model&#x3D;&quot;courseInfo.price&quot; controls-position&#x3D;&quot;right&quot; placeholder&#x3D;&quot;免费课程请设置为0元&quot;&#x2F;&gt; 元</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">&lt;&#x2F;el-form&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3、组件js"><a href="#3、组件js" class="headerlink" title="3、组件js"></a>3、组件js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> courseApi <span class="keyword">from</span> <span class="string">'@/api/course'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      saveBtnDisabled: <span class="literal">false</span>, <span class="comment">// 按钮是否禁用</span></span><br><span class="line">      courseInfo: &#123;<span class="comment">// 表单数据</span></span><br><span class="line">        price: <span class="number">0</span>,</span><br><span class="line">        lessonNum: <span class="number">0</span>,</span><br><span class="line">        <span class="comment">// 以下解决表单数据不全时insert语句非空校验</span></span><br><span class="line">        teacherId: <span class="string">''</span>,</span><br><span class="line">        subjectId: <span class="string">''</span>,</span><br><span class="line">        subjectParentId: <span class="string">''</span>,</span><br><span class="line">        cover: <span class="string">''</span>,</span><br><span class="line">        description: <span class="string">''</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// 保存并下一步</span></span><br><span class="line">    saveAndNext() &#123;</span><br><span class="line">      <span class="keyword">this</span>.saveBtnDisabled = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">this</span>.saveData()</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存</span></span><br><span class="line">    saveData() &#123;</span><br><span class="line">      courseApi.saveCourseInfo(<span class="keyword">this</span>.courseInfo).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.success(response.message)</span><br><span class="line">        <span class="keyword">this</span>.$parent.courseId = response.data.courseId <span class="comment">// 获取courseId</span></span><br><span class="line">        <span class="keyword">this</span>.$parent.active = <span class="number">1</span> <span class="comment">// 下一步  </span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="四、讲师下拉列表"><a href="#四、讲师下拉列表" class="headerlink" title="四、讲师下拉列表"></a>四、讲师下拉列表</h3><h4 id="一、前端实现"><a href="#一、前端实现" class="headerlink" title="一、前端实现"></a>一、前端实现</h4><h5 id="1、组件脚本"><a href="#1、组件脚本" class="headerlink" title="1、组件脚本"></a>1、组件脚本</h5><p>Info.vue组件中引入teacher api</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> teacherApi <span class="keyword">from</span> <span class="string">'@/api/teacher'</span></span><br></pre></td></tr></table></figure>

<p>定义data</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">teacherList: [] <span class="comment">// 讲师列表</span></span><br></pre></td></tr></table></figure>

<p>methods中获取讲师列表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">initTeacherList() &#123;</span><br><span class="line">  teacherApi.list().then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.teacherList = response.data.items</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>组件初始化时获取讲师列表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">  <span class="comment">// 获取讲师列表</span></span><br><span class="line">  <span class="keyword">this</span>.initTeacherList()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h5 id="2、组件模板-1"><a href="#2、组件模板-1" class="headerlink" title="2、组件模板"></a>2、组件模板</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 课程讲师 --&gt;</span><br><span class="line">&lt;el-form-item label=<span class="string">"课程讲师"</span>&gt;</span><br><span class="line">  &lt;el-select</span><br><span class="line">    v-model=<span class="string">"courseInfo.teacherId"</span></span><br><span class="line">    placeholder=<span class="string">"请选择"</span>&gt;</span><br><span class="line">    &lt;el-option</span><br><span class="line">      v-<span class="keyword">for</span>=<span class="string">"teacher in teacherList"</span></span><br><span class="line">      :key=<span class="string">"teacher.id"</span></span><br><span class="line">      :label=<span class="string">"teacher.name"</span></span><br><span class="line">      :value=<span class="string">"teacher.id"</span>/&gt;</span><br><span class="line">  &lt;<span class="regexp">/el-select&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>el-form-item&gt;</span><br></pre></td></tr></table></figure>

<h3 id="五、课程分类多级联动的实现"><a href="#五、课程分类多级联动的实现" class="headerlink" title="五、课程分类多级联动的实现"></a>五、课程分类多级联动的实现</h3><h4 id="一、获取一级分类"><a href="#一、获取一级分类" class="headerlink" title="一、获取一级分类"></a>一、获取一级分类</h4><h5 id="1、组件数据定义"><a href="#1、组件数据定义" class="headerlink" title="1、组件数据定义"></a>1、组件数据定义</h5><p>添加在Info.vue的data中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">subjectList: [],<span class="comment">//一级分类列表</span></span><br><span class="line">subjectLevelTwoList: []<span class="comment">//二级分类列表</span></span><br></pre></td></tr></table></figure>

<h5 id="2、组件脚本"><a href="#2、组件脚本" class="headerlink" title="2、组件脚本"></a>2、组件脚本</h5><p>表单初始化时获取一级分类嵌套列表，引入subject api</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subjectApi <span class="keyword">from</span> <span class="string">'@/api/subject'</span></span><br></pre></td></tr></table></figure>

<p>定义方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">initSubjectList() &#123;</span><br><span class="line">  subjectApi.getNestedTreeList().then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.subjectList = response.data.items</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>页面加载时</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">    <span class="comment">// 获取讲师列表</span></span><br><span class="line">    <span class="keyword">this</span>.initTeacherList()</span><br><span class="line">    <span class="comment">// 初始化分类列表</span></span><br><span class="line">    <span class="keyword">this</span>.initSubjectList()</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h5 id="3、组件模板"><a href="#3、组件模板" class="headerlink" title="3、组件模板"></a>3、组件模板</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 所属分类：级联下拉列表 --&gt;</span><br><span class="line">&lt;el-form-item label=<span class="string">"课程类别"</span>&gt;</span><br><span class="line">  &lt;!-- 一级分类 --&gt;</span><br><span class="line">  &lt;el-select</span><br><span class="line">    v-model=<span class="string">"courseInfo.subjectParentId"</span></span><br><span class="line">    placeholder=<span class="string">"请选择"</span>&gt;</span><br><span class="line">    &lt;el-option</span><br><span class="line">      v-<span class="keyword">for</span>=<span class="string">"subject in subjectList"</span></span><br><span class="line">      :key=<span class="string">"subject.id"</span></span><br><span class="line">      :label=<span class="string">"subject.title"</span></span><br><span class="line">      :value=<span class="string">"subject.id"</span>/&gt;</span><br><span class="line">  &lt;<span class="regexp">/el-select&gt;</span></span><br><span class="line"><span class="regexp">  &lt;!-- 二级分类 TODO --&gt;  </span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>el-form-item&gt;</span><br></pre></td></tr></table></figure>

<h4 id="二、级联显示二级分类"><a href="#二、级联显示二级分类" class="headerlink" title="二、级联显示二级分类"></a>二、级联显示二级分类</h4><h5 id="1、注册change事件"><a href="#1、注册change事件" class="headerlink" title="1、注册change事件"></a>1、注册change事件</h5><p>在一级分类的<el-select>组件中注册change事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-select @change=<span class="string">"subjectChanged"</span> ......</span><br></pre></td></tr></table></figure>

<h5 id="2、定义change事件方法"><a href="#2、定义change事件方法" class="headerlink" title="2、定义change事件方法"></a>2、定义change事件方法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">subjectChanged(value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.subjectList.forEach(<span class="function"><span class="params">subject</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (subject.id === value) &#123;</span><br><span class="line">            <span class="keyword">this</span>.courseInfo.subjectId = <span class="string">''</span></span><br><span class="line">            <span class="keyword">this</span>.subjectLevelTwoList = subject.children</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>








    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/01/04/VUE%202/" rel="prev" title="VUE 2">
      <i class="fa fa-chevron-left"></i> VUE 2
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#在线教育项目"><span class="nav-number">1.</span> <span class="nav-text">在线教育项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#day1"><span class="nav-number">1.1.</span> <span class="nav-text">day1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mybatis-Plus"><span class="nav-number">1.1.1.</span> <span class="nav-text">Mybatis-Plus</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#简介"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mybatis-plus使用入门"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">Mybatis-plus使用入门</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建数据库"><span class="nav-number">1.1.1.2.1.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#创建User表"><span class="nav-number">1.1.1.2.2.</span> <span class="nav-text">创建User表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#idea创建SpringBoot项目"><span class="nav-number">1.1.1.2.3.</span> <span class="nav-text">idea创建SpringBoot项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#application-properties配置"><span class="nav-number">1.1.1.2.4.</span> <span class="nav-text">application.properties配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SpringBoot-启动类"><span class="nav-number">1.1.1.2.5.</span> <span class="nav-text">SpringBoot 启动类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#创建实体类"><span class="nav-number">1.1.1.2.6.</span> <span class="nav-text">创建实体类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#创建mapper"><span class="nav-number">1.1.1.2.7.</span> <span class="nav-text">创建mapper</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#进行测试"><span class="nav-number">1.1.1.2.8.</span> <span class="nav-text">进行测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看sql语句"><span class="nav-number">1.1.1.2.9.</span> <span class="nav-text">查看sql语句</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CURD接口-主键策略"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">CURD接口-主键策略</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#插入"><span class="nav-number">1.1.1.3.1.</span> <span class="nav-text">插入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#雪花算法：分布式ID生成器"><span class="nav-number">1.1.1.3.2.</span> <span class="nav-text">雪花算法：分布式ID生成器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#MP的主键策略"><span class="nav-number">1.1.1.3.3.</span> <span class="nav-text">MP的主键策略</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Update操作"><span class="nav-number">1.1.1.4.</span> <span class="nav-text">Update操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#自动填充"><span class="nav-number">1.1.1.4.1.</span> <span class="nav-text">自动填充</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#需求描述："><span class="nav-number">1.1.1.4.1.1.</span> <span class="nav-text">需求描述：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#数据库修改"><span class="nav-number">1.1.1.4.1.2.</span> <span class="nav-text">数据库修改</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#实体类修改"><span class="nav-number">1.1.1.4.1.3.</span> <span class="nav-text">实体类修改</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#实现元对象处理器接口"><span class="nav-number">1.1.1.4.2.</span> <span class="nav-text">实现元对象处理器接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#乐观锁"><span class="nav-number">1.1.1.4.3.</span> <span class="nav-text">乐观锁</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#模拟冲突"><span class="nav-number">1.1.1.4.3.1.</span> <span class="nav-text">模拟冲突</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#乐观锁实现流程"><span class="nav-number">1.1.1.4.3.2.</span> <span class="nav-text">乐观锁实现流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分页"><span class="nav-number">1.1.1.5.</span> <span class="nav-text">分页</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#首先先看批处理查询"><span class="nav-number">1.1.1.5.1.</span> <span class="nav-text">首先先看批处理查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#简单条件查询"><span class="nav-number">1.1.1.5.2.</span> <span class="nav-text">简单条件查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#接着是分页"><span class="nav-number">1.1.1.5.3.</span> <span class="nav-text">接着是分页</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#逻辑删除"><span class="nav-number">1.1.1.6.</span> <span class="nav-text">逻辑删除</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#首先先看删除"><span class="nav-number">1.1.1.6.1.</span> <span class="nav-text">首先先看删除</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#再看逻辑删除"><span class="nav-number">1.1.1.6.2.</span> <span class="nav-text">再看逻辑删除</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件构造器"><span class="nav-number">1.1.1.7.</span> <span class="nav-text">条件构造器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-Wrapper"><span class="nav-number">1.1.1.7.1.</span> <span class="nav-text">1. Wrapper</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-测试"><span class="nav-number">1.1.1.7.2.</span> <span class="nav-text">2.测试</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、ge、gt、le、lt、isNull、isNotNull"><span class="nav-number">1.1.1.7.2.1.</span> <span class="nav-text">1、ge、gt、le、lt、isNull、isNotNull</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、eq、ne"><span class="nav-number">1.1.1.7.2.2.</span> <span class="nav-text">2、eq、ne</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、between、notBetween"><span class="nav-number">1.1.1.7.2.3.</span> <span class="nav-text">3、between、notBetween</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4、like、notLike、likeLeft、likeRight"><span class="nav-number">1.1.1.7.2.4.</span> <span class="nav-text">4、like、notLike、likeLeft、likeRight</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day2"><span class="nav-number">1.2.</span> <span class="nav-text">day2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#搭建项目"><span class="nav-number">1.2.1.</span> <span class="nav-text">搭建项目</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-创建父工程"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">1. 创建父工程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-创建版本控制工程-guli-parent"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">2. 创建版本控制工程(guli_parent)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#搭建父模块common"><span class="nav-number">1.2.2.</span> <span class="nav-text">搭建父模块common</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#搭建Service"><span class="nav-number">1.2.3.</span> <span class="nav-text">搭建Service</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库设计"><span class="nav-number">1.2.4.</span> <span class="nav-text">数据库设计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、数据库"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">1、数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、数据库设计规约"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">2、数据库设计规约</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MP的代码生成器"><span class="nav-number">1.2.5.</span> <span class="nav-text">MP的代码生成器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#执行代码生成器"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">执行代码生成器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#讲师接口开发"><span class="nav-number">1.2.6.</span> <span class="nav-text">讲师接口开发</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、创建application-yml文件"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">1、创建application.yml文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、创建SpringBoot配置文件"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">2、创建SpringBoot配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、创建SpringBoot启动类"><span class="nav-number">1.2.6.3.</span> <span class="nav-text">3、创建SpringBoot启动类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#讲师列表API"><span class="nav-number">1.2.7.</span> <span class="nav-text">讲师列表API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、编写讲师管理接口"><span class="nav-number">1.2.7.1.</span> <span class="nav-text">1、编写讲师管理接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、统一返回的json时间格式"><span class="nav-number">1.2.7.2.</span> <span class="nav-text">2、统一返回的json时间格式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑删除API"><span class="nav-number">1.2.8.</span> <span class="nav-text">逻辑删除API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、添加删除方法"><span class="nav-number">1.2.8.1.</span> <span class="nav-text">1、添加删除方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、使用postman测试删除"><span class="nav-number">1.2.8.2.</span> <span class="nav-text">2、使用postman测试删除</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Swagger2介绍"><span class="nav-number">1.2.9.</span> <span class="nav-text">Swagger2介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#配置Swagger2"><span class="nav-number">1.2.9.1.</span> <span class="nav-text">配置Swagger2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建Swagger2配置文件"><span class="nav-number">1.2.9.2.</span> <span class="nav-text">创建Swagger2配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重启服务器查看接口"><span class="nav-number">1.2.9.3.</span> <span class="nav-text">重启服务器查看接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见注解"><span class="nav-number">1.2.9.4.</span> <span class="nav-text">常见注解</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#统一返回数据"><span class="nav-number">1.2.10.</span> <span class="nav-text">统一返回数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#二、定义统一返回结果"><span class="nav-number">1.2.10.1.</span> <span class="nav-text">二、定义统一返回结果</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建返回码定义枚举类"><span class="nav-number">1.2.10.1.1.</span> <span class="nav-text">1、创建返回码定义枚举类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、创建结果类"><span class="nav-number">1.2.10.1.2.</span> <span class="nav-text">2、创建结果类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、修改Controller中的返回结果"><span class="nav-number">1.2.10.1.3.</span> <span class="nav-text">3、修改Controller中的返回结果</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一、分页"><span class="nav-number">1.2.11.</span> <span class="nav-text">一、分页</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分页Controller方法"><span class="nav-number">1.2.11.1.</span> <span class="nav-text">分页Controller方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、条件查询"><span class="nav-number">1.2.12.</span> <span class="nav-text">二、条件查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、新增和修改"><span class="nav-number">1.2.13.</span> <span class="nav-text">三、新增和修改</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、自动填充"><span class="nav-number">1.2.13.1.</span> <span class="nav-text">一、自动填充</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、定义API"><span class="nav-number">1.2.13.2.</span> <span class="nav-text">二、定义API</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、新增"><span class="nav-number">1.2.13.2.1.</span> <span class="nav-text">1、新增</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、根据id修改"><span class="nav-number">1.2.13.2.2.</span> <span class="nav-text">2、根据id修改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、根据id获取讲师数据"><span class="nav-number">1.2.13.2.3.</span> <span class="nav-text">3、根据id获取讲师数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、统一异常处理"><span class="nav-number">1.2.14.</span> <span class="nav-text">四、统一异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、创建统一异常处理器"><span class="nav-number">1.2.14.1.</span> <span class="nav-text">1、创建统一异常处理器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一、统一日志管理"><span class="nav-number">1.2.15.</span> <span class="nav-text">一、统一日志管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、什么是日志"><span class="nav-number">1.2.15.1.</span> <span class="nav-text">1、什么是日志</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、配置日志级别"><span class="nav-number">1.2.15.2.</span> <span class="nav-text">2、配置日志级别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、Logback日志"><span class="nav-number">1.2.15.3.</span> <span class="nav-text">二、Logback日志</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、配置logback日志"><span class="nav-number">1.2.15.3.1.</span> <span class="nav-text">1、配置logback日志</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、节点说明"><span class="nav-number">1.2.15.3.2.</span> <span class="nav-text">2、节点说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、控制日志级别"><span class="nav-number">1.2.15.3.3.</span> <span class="nav-text">3、控制日志级别</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、错误日志处理"><span class="nav-number">1.2.15.4.</span> <span class="nav-text">三、错误日志处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、用日志记录器记录错误日志"><span class="nav-number">1.2.15.4.1.</span> <span class="nav-text">1、用日志记录器记录错误日志</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、输出日志堆栈信息"><span class="nav-number">1.2.15.4.2.</span> <span class="nav-text">2、输出日志堆栈信息</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day3"><span class="nav-number">1.3.</span> <span class="nav-text">day3</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、Node-js的概念"><span class="nav-number">1.3.0.1.</span> <span class="nav-text">一、Node.js的概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、JavaScript引擎"><span class="nav-number">1.3.0.1.1.</span> <span class="nav-text">1、JavaScript引擎</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、什么是Node-js"><span class="nav-number">1.3.0.1.2.</span> <span class="nav-text">2、什么是Node.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、Node-js有什么用"><span class="nav-number">1.3.0.1.3.</span> <span class="nav-text">3、Node.js有什么用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、BFF-用户体验适配器"><span class="nav-number">1.3.0.2.</span> <span class="nav-text">二、BFF (用户体验适配器)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、BFF-解决什么问题"><span class="nav-number">1.3.0.2.1.</span> <span class="nav-text">1、BFF 解决什么问题</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、安装"><span class="nav-number">1.3.0.3.</span> <span class="nav-text">三、安装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、下载"><span class="nav-number">1.3.0.3.1.</span> <span class="nav-text">1、下载</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、安装"><span class="nav-number">1.3.0.3.2.</span> <span class="nav-text">2、安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、查看版本"><span class="nav-number">1.3.0.3.3.</span> <span class="nav-text">3、查看版本</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、ECMAScript-6"><span class="nav-number">1.3.0.4.</span> <span class="nav-text">四、ECMAScript 6</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、什么是-ECMAScript-6"><span class="nav-number">1.3.0.4.1.</span> <span class="nav-text">1、什么是 ECMAScript 6</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、ECMAScript-和-JavaScript-的关系"><span class="nav-number">1.3.0.4.2.</span> <span class="nav-text">2、ECMAScript 和 JavaScript 的关系</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ES6基本语法"><span class="nav-number">1.3.0.4.3.</span> <span class="nav-text">ES6基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、let声明变量"><span class="nav-number">1.3.0.4.3.1.</span> <span class="nav-text">1、let声明变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、const声明常量（只读变量）"><span class="nav-number">1.3.0.4.3.2.</span> <span class="nav-text">2、const声明常量（只读变量）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、解构赋值"><span class="nav-number">1.3.0.4.3.3.</span> <span class="nav-text">3、解构赋值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4、模板字符串"><span class="nav-number">1.3.0.4.3.4.</span> <span class="nav-text">4、模板字符串</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5、声明对象简写"><span class="nav-number">1.3.0.4.3.5.</span> <span class="nav-text">5、声明对象简写</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6、箭头函数"><span class="nav-number">1.3.0.4.3.6.</span> <span class="nav-text">6、箭头函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#五、Vue"><span class="nav-number">1.3.0.5.</span> <span class="nav-text">五、Vue</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、Vue-js-是什么"><span class="nav-number">1.3.0.5.1.</span> <span class="nav-text">1、Vue.js 是什么</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、初识Vue-js"><span class="nav-number">1.3.0.5.2.</span> <span class="nav-text">2、初识Vue.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、基本语法"><span class="nav-number">1.3.0.5.3.</span> <span class="nav-text">二、基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、基本数据渲染和指令"><span class="nav-number">1.3.0.5.3.1.</span> <span class="nav-text">1、基本数据渲染和指令</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、事件"><span class="nav-number">1.3.0.5.3.2.</span> <span class="nav-text">3、事件</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4、修饰符"><span class="nav-number">1.3.0.5.3.3.</span> <span class="nav-text">4、修饰符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5、条件渲染"><span class="nav-number">1.3.0.5.3.4.</span> <span class="nav-text">5、条件渲染</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6、列表渲染"><span class="nav-number">1.3.0.5.3.5.</span> <span class="nav-text">6、列表渲染</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7、实例生命周期"><span class="nav-number">1.3.0.5.3.6.</span> <span class="nav-text">7、实例生命周期</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#六、axios"><span class="nav-number">1.3.0.6.</span> <span class="nav-text">六、axios</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、复制js资源"><span class="nav-number">1.3.0.6.1.</span> <span class="nav-text">1、复制js资源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、创建-axios-html"><span class="nav-number">1.3.0.6.2.</span> <span class="nav-text">2、创建 axios.html</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、引入js"><span class="nav-number">1.3.0.6.3.</span> <span class="nav-text">3、引入js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、启动课程中心微服务"><span class="nav-number">1.3.0.6.4.</span> <span class="nav-text">4、启动课程中心微服务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、编写js"><span class="nav-number">1.3.0.6.5.</span> <span class="nav-text">5、编写js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、html渲染数据"><span class="nav-number">1.3.0.6.6.</span> <span class="nav-text">6、html渲染数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7、跨域"><span class="nav-number">1.3.0.6.7.</span> <span class="nav-text">7、跨域</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#为什么会出现跨域问题？"><span class="nav-number">1.3.0.6.7.1.</span> <span class="nav-text">为什么会出现跨域问题？</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#解决跨域问题："><span class="nav-number">1.3.0.6.7.2.</span> <span class="nav-text">解决跨域问题：</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8、使用生命周期函数"><span class="nav-number">1.3.0.6.8.</span> <span class="nav-text">8、使用生命周期函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9、业务分层的简单实现"><span class="nav-number">1.3.0.6.9.</span> <span class="nav-text">9、业务分层的简单实现</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#七、element-ui"><span class="nav-number">1.3.0.7.</span> <span class="nav-text">七、element-ui</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、引入脚本库"><span class="nav-number">1.3.0.7.0.1.</span> <span class="nav-text">1、引入脚本库</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、引入css"><span class="nav-number">1.3.0.7.0.2.</span> <span class="nav-text">2、引入css</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、引入js-1"><span class="nav-number">1.3.0.7.0.3.</span> <span class="nav-text">3、引入js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4、渲染讲师列表"><span class="nav-number">1.3.0.7.0.4.</span> <span class="nav-text">4、渲染讲师列表</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5、浏览器中运行"><span class="nav-number">1.3.0.7.0.5.</span> <span class="nav-text">5、浏览器中运行</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day4"><span class="nav-number">1.4.</span> <span class="nav-text">day4</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、NPM"><span class="nav-number">1.4.1.</span> <span class="nav-text">1、NPM</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用npm管理项目"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">使用npm管理项目</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、项目初始化"><span class="nav-number">1.4.1.1.1.</span> <span class="nav-text">1、项目初始化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、修改npm镜像"><span class="nav-number">1.4.1.1.2.</span> <span class="nav-text">2、修改npm镜像</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、npm-install命令的使用"><span class="nav-number">1.4.1.1.3.</span> <span class="nav-text">3、npm install命令的使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、其它命令"><span class="nav-number">1.4.1.1.4.</span> <span class="nav-text">4、其它命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、模块化简介"><span class="nav-number">1.4.2.</span> <span class="nav-text">2、模块化简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#模块化规范"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">模块化规范</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ES6模块化规范"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">ES6模块化规范</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、导出模块"><span class="nav-number">1.4.2.2.1.</span> <span class="nav-text">1、导出模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、导入模块"><span class="nav-number">1.4.2.2.2.</span> <span class="nav-text">2、导入模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、运行程序"><span class="nav-number">1.4.2.2.3.</span> <span class="nav-text">3、运行程序</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用Babel转码"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">使用Babel转码</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、安装"><span class="nav-number">1.4.2.3.1.</span> <span class="nav-text">1、安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、初始化项目"><span class="nav-number">1.4.2.3.2.</span> <span class="nav-text">2、初始化项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、配置-babelrc"><span class="nav-number">1.4.2.3.3.</span> <span class="nav-text">3、配置.babelrc</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、安装转码器"><span class="nav-number">1.4.2.3.4.</span> <span class="nav-text">4、安装转码器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、转码"><span class="nav-number">1.4.2.3.5.</span> <span class="nav-text">5、转码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、运行程序"><span class="nav-number">1.4.2.3.6.</span> <span class="nav-text">6、运行程序</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更多的方式"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">更多的方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、Webpack"><span class="nav-number">1.4.3.</span> <span class="nav-text">3、Webpack</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Webpack安装"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">Webpack安装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、全局安装"><span class="nav-number">1.4.3.1.1.</span> <span class="nav-text">1、全局安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、安装后查看版本号"><span class="nav-number">1.4.3.1.2.</span> <span class="nav-text">2、安装后查看版本号</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建项目"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">创建项目</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、初始化项目"><span class="nav-number">1.4.3.2.1.</span> <span class="nav-text">1、初始化项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、创建src文件夹"><span class="nav-number">1.4.3.2.2.</span> <span class="nav-text">2、创建src文件夹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、src下创建common-js"><span class="nav-number">1.4.3.2.3.</span> <span class="nav-text">3、src下创建common.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、src下创建utils-js"><span class="nav-number">1.4.3.2.4.</span> <span class="nav-text">4、src下创建utils.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、src下创建main-js"><span class="nav-number">1.4.3.2.5.</span> <span class="nav-text">5、src下创建main.js</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JS打包"><span class="nav-number">1.4.3.3.</span> <span class="nav-text">JS打包</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建配置文件"><span class="nav-number">1.4.3.3.1.</span> <span class="nav-text">1、创建配置文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、执行编译命令"><span class="nav-number">1.4.3.3.2.</span> <span class="nav-text">2、执行编译命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、创建入口页面"><span class="nav-number">1.4.3.3.3.</span> <span class="nav-text">3、创建入口页面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、测试"><span class="nav-number">1.4.3.3.4.</span> <span class="nav-text">4、测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CSS打包"><span class="nav-number">1.4.3.4.</span> <span class="nav-text">CSS打包</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、安装插件"><span class="nav-number">1.4.3.4.1.</span> <span class="nav-text">1、安装插件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、修改webpack-config-js"><span class="nav-number">1.4.3.4.2.</span> <span class="nav-text">2、修改webpack.config.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、在src文件夹-创建style-css"><span class="nav-number">1.4.3.4.3.</span> <span class="nav-text">3、在src文件夹**创建style.css</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、修改main-js"><span class="nav-number">1.4.3.4.4.</span> <span class="nav-text">4、修改main.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、运行编译命令"><span class="nav-number">1.4.3.4.5.</span> <span class="nav-text">5、运行编译命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1、vue-element-admin-重要！！"><span class="nav-number">1.4.4.</span> <span class="nav-text">4-1、vue-element-admin(重要！！)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、简介"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">1、简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、安装-1"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">2、安装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2、vue-admin-template"><span class="nav-number">1.4.5.</span> <span class="nav-text">4-2、vue-admin-template</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、简介-1"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">1、简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、安装-2"><span class="nav-number">1.4.5.2.</span> <span class="nav-text">2、安装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、ESLint"><span class="nav-number">1.4.6.</span> <span class="nav-text">5、ESLint</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#启用ESLint"><span class="nav-number">1.4.6.1.</span> <span class="nav-text">启用ESLint</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、ESLint插件安装"><span class="nav-number">1.4.6.1.1.</span> <span class="nav-text">1、ESLint插件安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、插件的扩展设置"><span class="nav-number">1.4.6.1.2.</span> <span class="nav-text">2、插件的扩展设置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、确认开启语法检查"><span class="nav-number">1.4.6.1.3.</span> <span class="nav-text">3、确认开启语法检查</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ESLint规则说明"><span class="nav-number">1.4.6.2.</span> <span class="nav-text">ESLint规则说明</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、规则说明"><span class="nav-number">1.4.6.2.1.</span> <span class="nav-text">1、规则说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、语法规则"><span class="nav-number">1.4.6.2.2.</span> <span class="nav-text">2、语法规则</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、vue-element-admin-的目录结构"><span class="nav-number">1.4.7.</span> <span class="nav-text">6、vue-element-admin 的目录结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#关键文件"><span class="nav-number">1.4.7.1.</span> <span class="nav-text">关键文件</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、package-js"><span class="nav-number">1.4.7.1.0.1.</span> <span class="nav-text">1、package.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、build-webpack-dev-conf-js"><span class="nav-number">1.4.7.1.0.2.</span> <span class="nav-text">2、build&#x2F;webpack.dev.conf.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、index-html"><span class="nav-number">1.4.7.1.0.3.</span> <span class="nav-text">3、index.html</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4、src-main-js"><span class="nav-number">1.4.7.1.0.4.</span> <span class="nav-text">4、src&#x2F;main.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5、config-dev-env-js"><span class="nav-number">1.4.7.1.0.5.</span> <span class="nav-text">5、config&#x2F;dev.env.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6、src-utils-request-js"><span class="nav-number">1.4.7.1.0.6.</span> <span class="nav-text">6、src&#x2F;utils&#x2F;request.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7、src-api-login-js"><span class="nav-number">1.4.7.1.0.7.</span> <span class="nav-text">7、src&#x2F;api&#x2F;login.js</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、前端登录问题"><span class="nav-number">1.4.8.</span> <span class="nav-text">7、前端登录问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、修改前端接口配置"><span class="nav-number">1.4.8.0.1.</span> <span class="nav-text">1、修改前端接口配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、前端登录接口文件"><span class="nav-number">1.4.8.0.2.</span> <span class="nav-text">2、前端登录接口文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、后端接口文件"><span class="nav-number">1.4.8.0.3.</span> <span class="nav-text">3、后端接口文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、router"><span class="nav-number">1.4.9.</span> <span class="nav-text">8、router</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#路由的作用"><span class="nav-number">1.4.9.1.</span> <span class="nav-text">路由的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#路由实例"><span class="nav-number">1.4.9.2.</span> <span class="nav-text">路由实例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、复制js资源-1"><span class="nav-number">1.4.9.2.1.</span> <span class="nav-text">1、复制js资源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、创建-路由-html"><span class="nav-number">1.4.9.2.2.</span> <span class="nav-text">2、创建 路由.html</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、引入js-2"><span class="nav-number">1.4.9.2.3.</span> <span class="nav-text">3、引入js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、编写html"><span class="nav-number">1.4.9.2.4.</span> <span class="nav-text">4、编写html</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、编写js-1"><span class="nav-number">1.4.9.2.5.</span> <span class="nav-text">5、编写js</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、前端路由配置"><span class="nav-number">1.4.10.</span> <span class="nav-text">9、前端路由配置</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、form-vue"><span class="nav-number">1.4.10.0.1.</span> <span class="nav-text">1、form.vue</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、list-vue"><span class="nav-number">1.4.10.0.2.</span> <span class="nav-text">2、list.vue</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、路由定义"><span class="nav-number">1.4.10.1.</span> <span class="nav-text">二、路由定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、其他定义"><span class="nav-number">1.4.10.2.</span> <span class="nav-text">三、其他定义</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、项目名称"><span class="nav-number">1.4.10.2.1.</span> <span class="nav-text">1、项目名称</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、端口号"><span class="nav-number">1.4.10.2.2.</span> <span class="nav-text">2、端口号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、国际化设置"><span class="nav-number">1.4.10.2.3.</span> <span class="nav-text">3、国际化设置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、入口页面"><span class="nav-number">1.4.10.2.4.</span> <span class="nav-text">4、入口页面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、登录页"><span class="nav-number">1.4.10.2.5.</span> <span class="nav-text">5、登录页</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day5"><span class="nav-number">1.5.</span> <span class="nav-text">day5</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#01-前端项目开发流程"><span class="nav-number">1.5.1.</span> <span class="nav-text">01-前端项目开发流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、项目开发流程"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">一、项目开发流程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义路由模块"><span class="nav-number">1.5.1.1.1.</span> <span class="nav-text">1、定义路由模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义api模块"><span class="nav-number">1.5.1.1.2.</span> <span class="nav-text">2、定义api模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、定义页面组件脚本"><span class="nav-number">1.5.1.1.3.</span> <span class="nav-text">3、定义页面组件脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、定义页面组件模板"><span class="nav-number">1.5.1.1.4.</span> <span class="nav-text">4、定义页面组件模板</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、项目执行流程"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">二、项目执行流程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2、页面渲染流程"><span class="nav-number">1.5.1.2.1.</span> <span class="nav-text">2、页面渲染流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#02-分页列表组件"><span class="nav-number">1.5.2.</span> <span class="nav-text">02-分页列表组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、分页查询"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">一、分页查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义api模块"><span class="nav-number">1.5.2.1.1.</span> <span class="nav-text">1、定义api模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义页面组件脚本"><span class="nav-number">1.5.2.1.2.</span> <span class="nav-text">2、定义页面组件脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、定义页面组件模板"><span class="nav-number">1.5.2.1.3.</span> <span class="nav-text">3、定义页面组件模板</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、改变每页条数"><span class="nav-number">1.5.2.1.4.</span> <span class="nav-text">4、改变每页条数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、翻页"><span class="nav-number">1.5.2.1.5.</span> <span class="nav-text">5、翻页</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、序号列"><span class="nav-number">1.5.2.1.6.</span> <span class="nav-text">6、序号列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7、查询表单"><span class="nav-number">1.5.2.1.7.</span> <span class="nav-text">7、查询表单</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、数据删除"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">二、数据删除</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义api模块-1"><span class="nav-number">1.5.2.2.1.</span> <span class="nav-text">1、定义api模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义页面组件模板"><span class="nav-number">1.5.2.2.2.</span> <span class="nav-text">2、定义页面组件模板</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、定义页面组件模板-1"><span class="nav-number">1.5.2.2.3.</span> <span class="nav-text">3、定义页面组件模板</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、axios响应拦截器"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">三、axios响应拦截器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、关于code-20000"><span class="nav-number">1.5.2.3.1.</span> <span class="nav-text">1、关于code&#x3D;&#x3D;&#x3D;20000</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、关于response"><span class="nav-number">1.5.2.3.2.</span> <span class="nav-text">2、关于response</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、关于error"><span class="nav-number">1.5.2.3.3.</span> <span class="nav-text">3、关于error</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#03-表单组件"><span class="nav-number">1.5.3.</span> <span class="nav-text">03-表单组件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、新增讲师"><span class="nav-number">1.5.3.0.1.</span> <span class="nav-text">一、新增讲师</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义api模块-2"><span class="nav-number">1.5.3.0.2.</span> <span class="nav-text">1、定义api模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义页面组件脚本-1"><span class="nav-number">1.5.3.0.3.</span> <span class="nav-text">2、定义页面组件脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、定义页面组件模板-2"><span class="nav-number">1.5.3.0.4.</span> <span class="nav-text">3、定义页面组件模板</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、实现新增功能"><span class="nav-number">1.5.3.0.5.</span> <span class="nav-text">4、实现新增功能</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、显示讲师信息"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">二、显示讲师信息</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义api模块-3"><span class="nav-number">1.5.3.1.1.</span> <span class="nav-text">1、定义api模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义页面组件脚本-2"><span class="nav-number">1.5.3.1.2.</span> <span class="nav-text">2、定义页面组件脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、定义页面组件模板-3"><span class="nav-number">1.5.3.1.3.</span> <span class="nav-text">3、定义页面组件模板</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、更新讲师"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">三、更新讲师</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义api模块-4"><span class="nav-number">1.5.3.2.1.</span> <span class="nav-text">1、定义api模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义页面组件脚本-3"><span class="nav-number">1.5.3.2.2.</span> <span class="nav-text">2、定义页面组件脚本</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、组件重用问题"><span class="nav-number">1.5.3.3.</span> <span class="nav-text">四、组件重用问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#04-计算组件"><span class="nav-number">1.5.4.</span> <span class="nav-text">04-计算组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#计算属性缓存-vs-方法"><span class="nav-number">1.5.4.1.</span> <span class="nav-text">计算属性缓存 vs 方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#05-关于Vue组件"><span class="nav-number">1.5.5.</span> <span class="nav-text">05-关于Vue组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、什么是组件"><span class="nav-number">1.5.5.1.</span> <span class="nav-text">一、什么是组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、前端项目组件分析"><span class="nav-number">1.5.5.2.</span> <span class="nav-text">二、前端项目组件分析</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2、入口文件"><span class="nav-number">1.5.5.2.1.</span> <span class="nav-text">2、入口文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、主页面模块"><span class="nav-number">1.5.5.2.2.</span> <span class="nav-text">3、主页面模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、路由模块"><span class="nav-number">1.5.5.2.3.</span> <span class="nav-text">4、路由模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、登录页面组件"><span class="nav-number">1.5.5.2.4.</span> <span class="nav-text">5、登录页面组件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、前端项目布局分析"><span class="nav-number">1.5.5.3.</span> <span class="nav-text">三、前端项目布局分析</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、路由模块"><span class="nav-number">1.5.5.3.1.</span> <span class="nav-text">1、路由模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、布局模块"><span class="nav-number">1.5.5.3.2.</span> <span class="nav-text">2、布局模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、核心内容区域"><span class="nav-number">1.5.5.3.3.</span> <span class="nav-text">3、核心内容区域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、讲师列表页面组件"><span class="nav-number">1.5.5.3.4.</span> <span class="nav-text">4、讲师列表页面组件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day6"><span class="nav-number">1.6.</span> <span class="nav-text">day6</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#OSS服务"><span class="nav-number">1.6.1.</span> <span class="nav-text">OSS服务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、开通“对象存储OSS”服务"><span class="nav-number">1.6.1.1.</span> <span class="nav-text">一、开通“对象存储OSS”服务</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、申请阿里云账号"><span class="nav-number">1.6.1.1.1.</span> <span class="nav-text">1、申请阿里云账号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、实名认证"><span class="nav-number">1.6.1.1.2.</span> <span class="nav-text">2、实名认证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、开通“对象存储OSS”服务"><span class="nav-number">1.6.1.1.3.</span> <span class="nav-text">3、开通“对象存储OSS”服务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、进入管理控制台"><span class="nav-number">1.6.1.1.4.</span> <span class="nav-text">4、进入管理控制台</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、控制台使用"><span class="nav-number">1.6.1.2.</span> <span class="nav-text">二、控制台使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建Bucket"><span class="nav-number">1.6.1.2.1.</span> <span class="nav-text">1、创建Bucket</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、上传默认头像"><span class="nav-number">1.6.1.2.2.</span> <span class="nav-text">2、上传默认头像</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、使用RAM子用户"><span class="nav-number">1.6.1.3.</span> <span class="nav-text">三、使用RAM子用户</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、进入子用户管理页面"><span class="nav-number">1.6.1.3.1.</span> <span class="nav-text">1、进入子用户管理页面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、添加用户"><span class="nav-number">1.6.1.3.2.</span> <span class="nav-text">2、添加用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、获取子用户key"><span class="nav-number">1.6.1.3.3.</span> <span class="nav-text">3、获取子用户key</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、设置用户权限"><span class="nav-number">1.6.1.3.4.</span> <span class="nav-text">4、设置用户权限</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、使用SDK"><span class="nav-number">1.6.1.4.</span> <span class="nav-text">四、使用SDK</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#五、创建测试项目"><span class="nav-number">1.6.1.5.</span> <span class="nav-text">五、创建测试项目</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建Maven项目"><span class="nav-number">1.6.1.5.1.</span> <span class="nav-text">1、创建Maven项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、配置pom"><span class="nav-number">1.6.1.5.2.</span> <span class="nav-text">2、配置pom</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、确认常量"><span class="nav-number">1.6.1.5.3.</span> <span class="nav-text">3、确认常量</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#六、测试用例"><span class="nav-number">1.6.1.6.</span> <span class="nav-text">六、测试用例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建Bucket-1"><span class="nav-number">1.6.1.6.1.</span> <span class="nav-text">1、创建Bucket</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、判断bucket是否存在"><span class="nav-number">1.6.1.6.2.</span> <span class="nav-text">2、判断bucket是否存在</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、设置bucket访问权限"><span class="nav-number">1.6.1.6.3.</span> <span class="nav-text">3、设置bucket访问权限</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正式开始项目"><span class="nav-number">1.6.2.</span> <span class="nav-text">正式开始项目</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、加入OSS微服务"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">一、加入OSS微服务</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建模块"><span class="nav-number">1.6.2.1.1.</span> <span class="nav-text">1、创建模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、配置pom-xml"><span class="nav-number">1.6.2.1.2.</span> <span class="nav-text">2、配置pom.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、配置application-yml"><span class="nav-number">1.6.2.1.3.</span> <span class="nav-text">3、配置application.yml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、logback-spring-xml"><span class="nav-number">1.6.2.1.4.</span> <span class="nav-text">4、logback-spring.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、创建启动类"><span class="nav-number">1.6.2.1.5.</span> <span class="nav-text">5、创建启动类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、启动项目"><span class="nav-number">1.6.2.1.6.</span> <span class="nav-text">6、启动项目</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、实现文件上传"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">二、实现文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、从配置文件读取常量"><span class="nav-number">1.6.2.2.1.</span> <span class="nav-text">1、从配置文件读取常量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、文件上传业务"><span class="nav-number">1.6.2.2.2.</span> <span class="nav-text">2、文件上传业务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、控制层"><span class="nav-number">1.6.2.2.3.</span> <span class="nav-text">3、控制层</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、前端整合文件上传"><span class="nav-number">1.6.3.</span> <span class="nav-text">三、前端整合文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、前端组件参考"><span class="nav-number">1.6.3.1.</span> <span class="nav-text">一、前端组件参考</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、整合上传组件"><span class="nav-number">1.6.3.2.</span> <span class="nav-text">二、整合上传组件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义页面组件模板"><span class="nav-number">1.6.3.2.1.</span> <span class="nav-text">1、定义页面组件模板</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义页面组件脚本-4"><span class="nav-number">1.6.3.2.2.</span> <span class="nav-text">2、定义页面组件脚本</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、自定义异常类"><span class="nav-number">1.6.4.</span> <span class="nav-text">四、自定义异常类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、文件上传异常分析"><span class="nav-number">1.6.4.1.</span> <span class="nav-text">一、文件上传异常分析</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、制造异常"><span class="nav-number">1.6.4.1.1.</span> <span class="nav-text">1、制造异常</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、异常处理方案"><span class="nav-number">1.6.4.1.2.</span> <span class="nav-text">2、异常处理方案</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、自定义异常处理"><span class="nav-number">1.6.4.2.</span> <span class="nav-text">二、自定义异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建自定义异常类"><span class="nav-number">1.6.4.2.1.</span> <span class="nav-text">1、创建自定义异常类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、添加异常处理方法"><span class="nav-number">1.6.4.2.2.</span> <span class="nav-text">2、添加异常处理方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、修改FileController"><span class="nav-number">1.6.4.2.3.</span> <span class="nav-text">3、修改FileController</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、打印完整的异常信息"><span class="nav-number">1.6.4.2.4.</span> <span class="nav-text">4、打印完整的异常信息</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、前端错误处理"><span class="nav-number">1.6.4.3.</span> <span class="nav-text">三、前端错误处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、统一异常错误处理"><span class="nav-number">1.6.4.3.1.</span> <span class="nav-text">1、统一异常错误处理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、http异常错误处理"><span class="nav-number">1.6.4.3.2.</span> <span class="nav-text">2、http异常错误处理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、批量删除"><span class="nav-number">1.6.5.</span> <span class="nav-text">五、批量删除</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、后端接口"><span class="nav-number">1.6.5.1.</span> <span class="nav-text">一、后端接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、前端"><span class="nav-number">1.6.5.2.</span> <span class="nav-text">二、前端</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、api"><span class="nav-number">1.6.5.2.1.</span> <span class="nav-text">1、api</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、添加删除复选框"><span class="nav-number">1.6.5.2.2.</span> <span class="nav-text">2、添加删除复选框</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、添加删除按钮"><span class="nav-number">1.6.5.2.3.</span> <span class="nav-text">3、添加删除按钮</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、定义删除方法"><span class="nav-number">1.6.5.2.4.</span> <span class="nav-text">4、定义删除方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、data中定义数据"><span class="nav-number">1.6.5.2.5.</span> <span class="nav-text">5、data中定义数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、表格组件中添加事件"><span class="nav-number">1.6.5.2.6.</span> <span class="nav-text">6、表格组件中添加事件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7、定义事件的回调函数"><span class="nav-number">1.6.5.2.7.</span> <span class="nav-text">7、定义事件的回调函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8、完善removeRows方法"><span class="nav-number">1.6.5.2.8.</span> <span class="nav-text">8、完善removeRows方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、自动提示"><span class="nav-number">1.6.6.</span> <span class="nav-text">六、自动提示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、后端接口-1"><span class="nav-number">1.6.6.1.</span> <span class="nav-text">一、后端接口</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、TeacherController"><span class="nav-number">1.6.6.1.1.</span> <span class="nav-text">1、TeacherController</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、TeacherService"><span class="nav-number">1.6.6.1.2.</span> <span class="nav-text">2、TeacherService</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、前端整合"><span class="nav-number">1.6.6.2.</span> <span class="nav-text">二、前端整合</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、api-1"><span class="nav-number">1.6.6.2.1.</span> <span class="nav-text">1、api</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、组件"><span class="nav-number">1.6.6.2.2.</span> <span class="nav-text">2、组件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day7-Nacos注册中心和服务调用"><span class="nav-number">1.7.</span> <span class="nav-text">day7 Nacos注册中心和服务调用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、Springcloue-Alibaba"><span class="nav-number">1.7.1.</span> <span class="nav-text">一、Springcloue Alibaba</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、停更引发的升级惨案"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">一、停更引发的升级惨案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、版本选择"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">二、版本选择</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、Spring-Boot"><span class="nav-number">1.7.1.2.1.</span> <span class="nav-text">1、Spring Boot</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、Spring-Cloud"><span class="nav-number">1.7.1.2.2.</span> <span class="nav-text">2、Spring Cloud</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、Spring-Cloud-Alibaba"><span class="nav-number">1.7.1.2.3.</span> <span class="nav-text">3、Spring Cloud Alibaba</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、Nacos注册中心"><span class="nav-number">1.7.2.</span> <span class="nav-text">二、Nacos注册中心</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、Nacos"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">一、Nacos</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、常见注册中心"><span class="nav-number">1.7.2.1.1.</span> <span class="nav-text">1、常见注册中心</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、为什么叫Nacos"><span class="nav-number">1.7.2.1.2.</span> <span class="nav-text">2、为什么叫Nacos</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、Nacos下载和安装"><span class="nav-number">1.7.2.1.3.</span> <span class="nav-text">3、Nacos下载和安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、启动Nacos"><span class="nav-number">1.7.2.1.4.</span> <span class="nav-text">4、启动Nacos</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、服务注册"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">二、服务注册</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、引入依赖"><span class="nav-number">1.7.2.2.1.</span> <span class="nav-text">1、引入依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、添加服务配置信息"><span class="nav-number">1.7.2.2.2.</span> <span class="nav-text">2、添加服务配置信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、添加Nacos客户端注解"><span class="nav-number">1.7.2.2.3.</span> <span class="nav-text">3、添加Nacos客户端注解</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、启动客户端微服务"><span class="nav-number">1.7.2.2.4.</span> <span class="nav-text">4、启动客户端微服务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、注册oss微服务"><span class="nav-number">1.7.2.2.5.</span> <span class="nav-text">5、注册oss微服务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、OpenFeign"><span class="nav-number">1.7.3.</span> <span class="nav-text">三、OpenFeign</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、OpenFeign是什么"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">一、OpenFeign是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、OpenFeign的引入"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">二、OpenFeign的引入</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、引入依赖-1"><span class="nav-number">1.7.3.2.1.</span> <span class="nav-text">1、引入依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、启动类添加注解"><span class="nav-number">1.7.3.2.2.</span> <span class="nav-text">2、启动类添加注解</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、OpenFeign的使用"><span class="nav-number">1.7.3.3.</span> <span class="nav-text">三、OpenFeign的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、oss微服务中创建测试api"><span class="nav-number">1.7.3.3.1.</span> <span class="nav-text">1、oss微服务中创建测试api</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、edu微服务中创建远程调用接口"><span class="nav-number">1.7.3.3.2.</span> <span class="nav-text">2、edu微服务中创建远程调用接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、调用远程方法"><span class="nav-number">1.7.3.3.3.</span> <span class="nav-text">3、调用远程方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、负载均衡"><span class="nav-number">1.7.3.4.</span> <span class="nav-text">四、负载均衡</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、配置多实例"><span class="nav-number">1.7.3.4.1.</span> <span class="nav-text">1、配置多实例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、测试负载均衡"><span class="nav-number">1.7.3.4.2.</span> <span class="nav-text">2、测试负载均衡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、Ribbon的负载均衡策略"><span class="nav-number">1.7.3.4.3.</span> <span class="nav-text">3、Ribbon的负载均衡策略</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#五、OpenFeign的超时控制"><span class="nav-number">1.7.3.5.</span> <span class="nav-text">五、OpenFeign的超时控制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、模拟长流程业务"><span class="nav-number">1.7.3.5.1.</span> <span class="nav-text">1、模拟长流程业务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、远程调用测试"><span class="nav-number">1.7.3.5.2.</span> <span class="nav-text">2、远程调用测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、解决方案"><span class="nav-number">1.7.3.5.3.</span> <span class="nav-text">3、解决方案</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#六、OpenFeign日志"><span class="nav-number">1.7.3.6.</span> <span class="nav-text">六、OpenFeign日志</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、作用"><span class="nav-number">1.7.3.6.1.</span> <span class="nav-text">1、作用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、日志级别"><span class="nav-number">1.7.3.6.2.</span> <span class="nav-text">2、日志级别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、配置日志bean"><span class="nav-number">1.7.3.6.3.</span> <span class="nav-text">3、配置日志bean</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、开启日志"><span class="nav-number">1.7.3.6.4.</span> <span class="nav-text">4、开启日志</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、删除讲师头像"><span class="nav-number">1.7.4.</span> <span class="nav-text">四、删除讲师头像</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、删除文件接口"><span class="nav-number">1.7.4.1.</span> <span class="nav-text">一、删除文件接口</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、FileService接口"><span class="nav-number">1.7.4.1.1.</span> <span class="nav-text">1、FileService接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、FileService实现"><span class="nav-number">1.7.4.1.2.</span> <span class="nav-text">2、FileService实现</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、FileController"><span class="nav-number">1.7.4.1.3.</span> <span class="nav-text">3、FileController</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、OpenFeign远程调用"><span class="nav-number">1.7.4.2.</span> <span class="nav-text">二、OpenFeign远程调用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建远程调用接口"><span class="nav-number">1.7.4.2.1.</span> <span class="nav-text">1、创建远程调用接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、调用远程方法"><span class="nav-number">1.7.4.2.2.</span> <span class="nav-text">2、调用远程方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、controller层"><span class="nav-number">1.7.4.2.3.</span> <span class="nav-text">3、controller层</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、前端修改"><span class="nav-number">1.7.4.3.</span> <span class="nav-text">三、前端修改</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、Sentinel"><span class="nav-number">1.7.5.</span> <span class="nav-text">五、Sentinel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、service-edu"><span class="nav-number">1.7.5.1.</span> <span class="nav-text">一、service_edu</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、tomcat并发修改"><span class="nav-number">1.7.5.1.1.</span> <span class="nav-text">1、tomcat并发修改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、controller测试方法"><span class="nav-number">1.7.5.1.2.</span> <span class="nav-text">2、controller测试方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、测试"><span class="nav-number">1.7.5.1.3.</span> <span class="nav-text">3、测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、JMeter并发测试工具"><span class="nav-number">1.7.5.2.</span> <span class="nav-text">二、JMeter并发测试工具</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、JMeter下载和安装"><span class="nav-number">1.7.5.2.1.</span> <span class="nav-text">1、JMeter下载和安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、配置"><span class="nav-number">1.7.5.2.2.</span> <span class="nav-text">2、配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、启动JMeter"><span class="nav-number">1.7.5.2.3.</span> <span class="nav-text">3、启动JMeter</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、使用JMeter测试高并发"><span class="nav-number">1.7.5.3.</span> <span class="nav-text">三、使用JMeter测试高并发</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、添加线程组"><span class="nav-number">1.7.5.3.1.</span> <span class="nav-text">1、添加线程组</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、配置线程并发"><span class="nav-number">1.7.5.3.2.</span> <span class="nav-text">2、配置线程并发</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、添加Http请求取样器"><span class="nav-number">1.7.5.3.3.</span> <span class="nav-text">3、添加Http请求取样器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、配置Http取样器"><span class="nav-number">1.7.5.3.4.</span> <span class="nav-text">4、配置Http取样器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、配置查看结果树"><span class="nav-number">1.7.5.3.5.</span> <span class="nav-text">5、配置查看结果树</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、启动测试"><span class="nav-number">1.7.5.3.6.</span> <span class="nav-text">6、启动测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7、测试并发"><span class="nav-number">1.7.5.3.7.</span> <span class="nav-text">7、测试并发</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、服务雪崩"><span class="nav-number">1.7.5.4.</span> <span class="nav-text">四、服务雪崩</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#五、服务容错"><span class="nav-number">1.7.5.5.</span> <span class="nav-text">五、服务容错</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、容错方案"><span class="nav-number">1.7.5.5.1.</span> <span class="nav-text">一、容错方案</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、隔离"><span class="nav-number">1.7.5.5.1.1.</span> <span class="nav-text">1、隔离</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、超时"><span class="nav-number">1.7.5.5.1.2.</span> <span class="nav-text">2、超时</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、限流"><span class="nav-number">1.7.5.5.1.3.</span> <span class="nav-text">3、限流</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4、熔断"><span class="nav-number">1.7.5.5.1.4.</span> <span class="nav-text">4、熔断</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5、降级"><span class="nav-number">1.7.5.5.1.5.</span> <span class="nav-text">5、降级</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、容错组件"><span class="nav-number">1.7.5.5.2.</span> <span class="nav-text">二、容错组件</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、Hystrix"><span class="nav-number">1.7.5.5.2.1.</span> <span class="nav-text">1、Hystrix</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、Resilience4J"><span class="nav-number">1.7.5.5.2.2.</span> <span class="nav-text">2、Resilience4J</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、Sentinel"><span class="nav-number">1.7.5.5.2.3.</span> <span class="nav-text">3、Sentinel</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#六、Sentinel介绍"><span class="nav-number">1.7.5.6.</span> <span class="nav-text">六、Sentinel介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、什么是Sentinel"><span class="nav-number">1.7.5.6.1.</span> <span class="nav-text">1、什么是Sentinel</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、Sentinel-的特征"><span class="nav-number">1.7.5.6.2.</span> <span class="nav-text">2、Sentinel 的特征</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、Sentinel-的组成"><span class="nav-number">1.7.5.6.3.</span> <span class="nav-text">3、Sentinel 的组成</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#七、Sentinel控制台"><span class="nav-number">1.7.5.7.</span> <span class="nav-text">七、Sentinel控制台</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、下载和安装"><span class="nav-number">1.7.5.7.1.</span> <span class="nav-text">1、下载和安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、启动控制台"><span class="nav-number">1.7.5.7.2.</span> <span class="nav-text">2、启动控制台</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#八、微服务集成Sentinel客户端"><span class="nav-number">1.7.5.8.</span> <span class="nav-text">八、微服务集成Sentinel客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、引入依赖-2"><span class="nav-number">1.7.5.8.1.</span> <span class="nav-text">1、引入依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、添加测试方法"><span class="nav-number">1.7.5.8.2.</span> <span class="nav-text">2、添加测试方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#九、微服务连接控制台"><span class="nav-number">1.7.5.9.</span> <span class="nav-text">九、微服务连接控制台</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、微服务配置"><span class="nav-number">1.7.5.9.1.</span> <span class="nav-text">1、微服务配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、swagger中测试"><span class="nav-number">1.7.5.9.2.</span> <span class="nav-text">2、swagger中测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、查看sentinel控制台"><span class="nav-number">1.7.5.9.3.</span> <span class="nav-text">3、查看sentinel控制台</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、控制台运行原理"><span class="nav-number">1.7.5.9.4.</span> <span class="nav-text">4、控制台运行原理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#十、Sentinel的概念及功能"><span class="nav-number">1.7.5.10.</span> <span class="nav-text">十、Sentinel的概念及功能</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、实现接口限流"><span class="nav-number">1.7.5.10.1.</span> <span class="nav-text">一、实现接口限流</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、添加流控规则"><span class="nav-number">1.7.5.10.1.1.</span> <span class="nav-text">1、添加流控规则</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、基本参数"><span class="nav-number">1.7.5.10.1.2.</span> <span class="nav-text">2、基本参数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、测试限流效果"><span class="nav-number">1.7.5.10.1.3.</span> <span class="nav-text">3、测试限流效果</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、基本概念"><span class="nav-number">1.7.5.10.2.</span> <span class="nav-text">二、基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、资源"><span class="nav-number">1.7.5.10.2.1.</span> <span class="nav-text">1、资源</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、规则"><span class="nav-number">1.7.5.10.2.2.</span> <span class="nav-text">2、规则</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#三、重要功能"><span class="nav-number">1.7.5.10.3.</span> <span class="nav-text">三、重要功能</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1、流量控制"><span class="nav-number">1.7.5.10.3.1.</span> <span class="nav-text">1、流量控制</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2、熔断降级"><span class="nav-number">1.7.5.10.3.2.</span> <span class="nav-text">2、熔断降级</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3、系统负载保护"><span class="nav-number">1.7.5.10.3.3.</span> <span class="nav-text">3、系统负载保护</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#十一、OpenFeign-整合-Sentinel"><span class="nav-number">1.7.5.11.</span> <span class="nav-text">十一、OpenFeign 整合 Sentinel</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、引入sentinel的依赖"><span class="nav-number">1.7.5.11.1.</span> <span class="nav-text">1、引入sentinel的依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、开启Sentinel支持"><span class="nav-number">1.7.5.11.2.</span> <span class="nav-text">2、开启Sentinel支持</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、创建容错类"><span class="nav-number">1.7.5.11.3.</span> <span class="nav-text">3、创建容错类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、指定容错类"><span class="nav-number">1.7.5.11.4.</span> <span class="nav-text">4、指定容错类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、测试"><span class="nav-number">1.7.5.11.5.</span> <span class="nav-text">5、测试</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day-8-Alibaba-EasyExcel"><span class="nav-number">1.8.</span> <span class="nav-text">day 8 Alibaba EasyExcel</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、EasyExcel-简介"><span class="nav-number">1.8.1.</span> <span class="nav-text">一、EasyExcel 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、Excel导入导出的应用场景"><span class="nav-number">1.8.1.1.</span> <span class="nav-text">一、Excel导入导出的应用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、数据导入"><span class="nav-number">1.8.1.1.1.</span> <span class="nav-text">1、数据导入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、数据导出"><span class="nav-number">1.8.1.1.2.</span> <span class="nav-text">2、数据导出</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、数据传输"><span class="nav-number">1.8.1.1.3.</span> <span class="nav-text">3、数据传输</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、EasyExcel简介"><span class="nav-number">1.8.1.2.</span> <span class="nav-text">二、EasyExcel简介</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、官方网站"><span class="nav-number">1.8.1.2.1.</span> <span class="nav-text">1、官方网站</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、EasyExcel特点"><span class="nav-number">1.8.1.2.2.</span> <span class="nav-text">2、EasyExcel特点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、写Excel"><span class="nav-number">1.8.2.</span> <span class="nav-text">二、写Excel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、创建项目"><span class="nav-number">1.8.2.1.</span> <span class="nav-text">一、创建项目</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建一个普通的maven项目"><span class="nav-number">1.8.2.1.1.</span> <span class="nav-text">1、创建一个普通的maven项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、pom中引入xml相关依赖"><span class="nav-number">1.8.2.1.2.</span> <span class="nav-text">2、pom中引入xml相关依赖</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、最简单的写"><span class="nav-number">1.8.2.2.</span> <span class="nav-text">二、最简单的写</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建实体类"><span class="nav-number">1.8.2.2.1.</span> <span class="nav-text">1、创建实体类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、测试用例"><span class="nav-number">1.8.2.2.2.</span> <span class="nav-text">2、测试用例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、指定写入列"><span class="nav-number">1.8.2.3.</span> <span class="nav-text">三、指定写入列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、自定义格式转换"><span class="nav-number">1.8.2.4.</span> <span class="nav-text">四、自定义格式转换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、读Excel"><span class="nav-number">1.8.3.</span> <span class="nav-text">三、读Excel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最简单的读"><span class="nav-number">1.8.3.1.</span> <span class="nav-text">最简单的读</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、参考文档"><span class="nav-number">1.8.3.1.1.</span> <span class="nav-text">1、参考文档</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、创建监听器"><span class="nav-number">1.8.3.1.2.</span> <span class="nav-text">2、创建监听器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、测试用例"><span class="nav-number">1.8.3.1.3.</span> <span class="nav-text">3、测试用例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、需求和类别导入前端实现"><span class="nav-number">1.8.4.</span> <span class="nav-text">四、需求和类别导入前端实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、需求"><span class="nav-number">1.8.4.1.</span> <span class="nav-text">一、需求</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、导入课程分类"><span class="nav-number">1.8.4.1.1.</span> <span class="nav-text">1、导入课程分类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、课程分类列表"><span class="nav-number">1.8.4.1.2.</span> <span class="nav-text">2、课程分类列表</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、Excel模板上传"><span class="nav-number">1.8.4.2.</span> <span class="nav-text">二、Excel模板上传</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、编辑Excel模板"><span class="nav-number">1.8.4.2.1.</span> <span class="nav-text">1、编辑Excel模板</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、将文件上传至阿里云OSS"><span class="nav-number">1.8.4.2.2.</span> <span class="nav-text">2、将文件上传至阿里云OSS</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、路由和组件"><span class="nav-number">1.8.4.3.</span> <span class="nav-text">三、路由和组件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、添加vue组件"><span class="nav-number">1.8.4.3.1.</span> <span class="nav-text">1、添加vue组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、添加路由"><span class="nav-number">1.8.4.3.2.</span> <span class="nav-text">2、添加路由</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、import-vue组件"><span class="nav-number">1.8.4.4.</span> <span class="nav-text">四、import.vue组件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、添加配置"><span class="nav-number">1.8.4.4.1.</span> <span class="nav-text">1、添加配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、js定义数据"><span class="nav-number">1.8.4.4.2.</span> <span class="nav-text">2、js定义数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、template"><span class="nav-number">1.8.4.4.3.</span> <span class="nav-text">3、template</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、js上传方法"><span class="nav-number">1.8.4.4.4.</span> <span class="nav-text">4、js上传方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、导入课程分类"><span class="nav-number">1.8.5.</span> <span class="nav-text">五、导入课程分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、准备"><span class="nav-number">1.8.5.1.</span> <span class="nav-text">一、准备</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、添加依赖"><span class="nav-number">1.8.5.1.1.</span> <span class="nav-text">1、添加依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、创建Excel实体类"><span class="nav-number">1.8.5.1.2.</span> <span class="nav-text">2、创建Excel实体类</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、实现Excel导入"><span class="nav-number">1.8.5.2.</span> <span class="nav-text">二、实现Excel导入</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建监听器"><span class="nav-number">1.8.5.2.1.</span> <span class="nav-text">1、创建监听器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、监听器中添加辅助方法"><span class="nav-number">1.8.5.2.2.</span> <span class="nav-text">2、监听器中添加辅助方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、SubjectService"><span class="nav-number">1.8.5.2.3.</span> <span class="nav-text">3、SubjectService</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、SubjectController"><span class="nav-number">1.8.5.2.4.</span> <span class="nav-text">4、SubjectController</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、前端完善回调函数"><span class="nav-number">1.8.5.3.</span> <span class="nav-text">三、前端完善回调函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、成功回调"><span class="nav-number">1.8.5.3.1.</span> <span class="nav-text">1、成功回调</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、失败回调"><span class="nav-number">1.8.5.3.2.</span> <span class="nav-text">2、失败回调</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、分类列表展示"><span class="nav-number">1.8.6.</span> <span class="nav-text">六、分类列表展示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、后端接口-2"><span class="nav-number">1.8.6.1.</span> <span class="nav-text">一、后端接口</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、创建vo"><span class="nav-number">1.8.6.1.1.</span> <span class="nav-text">1、创建vo</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、创建controller方法"><span class="nav-number">1.8.6.1.2.</span> <span class="nav-text">2、创建controller方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、创建SubjectService方法"><span class="nav-number">1.8.6.1.3.</span> <span class="nav-text">3、创建SubjectService方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、创建mapper映射"><span class="nav-number">1.8.6.1.4.</span> <span class="nav-text">4、创建mapper映射</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、Swagger测试"><span class="nav-number">1.8.6.1.5.</span> <span class="nav-text">5、Swagger测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、异常解决"><span class="nav-number">1.8.6.2.</span> <span class="nav-text">二、异常解决</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、问题分析"><span class="nav-number">1.8.6.2.1.</span> <span class="nav-text">1、问题分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、解决方案"><span class="nav-number">1.8.6.2.2.</span> <span class="nav-text">2、解决方案</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、前端整合"><span class="nav-number">1.8.6.3.</span> <span class="nav-text">三、前端整合</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、api-2"><span class="nav-number">1.8.6.3.1.</span> <span class="nav-text">1、api</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、list组件"><span class="nav-number">1.8.6.3.2.</span> <span class="nav-text">2、list组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、优化前端过滤功能"><span class="nav-number">1.8.6.3.3.</span> <span class="nav-text">3、优化前端过滤功能</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#day-9"><span class="nav-number">1.9.</span> <span class="nav-text">day 9</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、需求分析"><span class="nav-number">1.9.1.</span> <span class="nav-text">一、需求分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、课程发布流程"><span class="nav-number">1.9.1.1.</span> <span class="nav-text">一、课程发布流程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、编辑课程基本信息"><span class="nav-number">1.9.1.1.1.</span> <span class="nav-text">1、编辑课程基本信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、课程大纲列表"><span class="nav-number">1.9.1.1.2.</span> <span class="nav-text">2、课程大纲列表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、添加章节"><span class="nav-number">1.9.1.1.3.</span> <span class="nav-text">3、添加章节</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、添加章节"><span class="nav-number">1.9.1.1.4.</span> <span class="nav-text">4、添加章节</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、课程发布预览"><span class="nav-number">1.9.1.1.5.</span> <span class="nav-text">5、课程发布预览</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、课程列表"><span class="nav-number">1.9.1.2.</span> <span class="nav-text">二、课程列表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、课程发布表单-步骤导航"><span class="nav-number">1.9.2.</span> <span class="nav-text">二、课程发布表单-步骤导航</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、配置路由"><span class="nav-number">1.9.2.1.</span> <span class="nav-text">一、配置路由</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、添加vue组件-1"><span class="nav-number">1.9.2.1.1.</span> <span class="nav-text">1、添加vue组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、添加路由-1"><span class="nav-number">1.9.2.1.2.</span> <span class="nav-text">2、添加路由</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、整合步骤导航"><span class="nav-number">1.9.2.2.</span> <span class="nav-text">二、整合步骤导航</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、表单页面"><span class="nav-number">1.9.2.2.1.</span> <span class="nav-text">1、表单页面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、课程信息页面"><span class="nav-number">1.9.2.2.2.</span> <span class="nav-text">2、课程信息页面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、课程大纲页面"><span class="nav-number">1.9.2.2.3.</span> <span class="nav-text">3、课程大纲页面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、课程发布页面"><span class="nav-number">1.9.2.2.4.</span> <span class="nav-text">4、课程发布页面</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、编辑课程基本信息"><span class="nav-number">1.9.3.</span> <span class="nav-text">三、编辑课程基本信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、后端接口-3"><span class="nav-number">1.9.3.1.</span> <span class="nav-text">一、后端接口</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义form表单对象"><span class="nav-number">1.9.3.1.1.</span> <span class="nav-text">1、定义form表单对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、CourseDescription主键策略"><span class="nav-number">1.9.3.1.2.</span> <span class="nav-text">2、CourseDescription主键策略</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、定义常量"><span class="nav-number">1.9.3.1.3.</span> <span class="nav-text">3、定义常量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、定义控制层接口"><span class="nav-number">1.9.3.1.4.</span> <span class="nav-text">4、定义控制层接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、定义业务层方法"><span class="nav-number">1.9.3.1.5.</span> <span class="nav-text">5、定义业务层方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、前端实现"><span class="nav-number">1.9.3.2.</span> <span class="nav-text">二、前端实现</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、定义api"><span class="nav-number">1.9.3.2.1.</span> <span class="nav-text">1、定义api</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、组件模板"><span class="nav-number">1.9.3.2.2.</span> <span class="nav-text">2、组件模板</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、组件js"><span class="nav-number">1.9.3.2.3.</span> <span class="nav-text">3、组件js</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、讲师下拉列表"><span class="nav-number">1.9.4.</span> <span class="nav-text">四、讲师下拉列表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、前端实现"><span class="nav-number">1.9.4.1.</span> <span class="nav-text">一、前端实现</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、组件脚本"><span class="nav-number">1.9.4.1.1.</span> <span class="nav-text">1、组件脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、组件模板-1"><span class="nav-number">1.9.4.1.2.</span> <span class="nav-text">2、组件模板</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、课程分类多级联动的实现"><span class="nav-number">1.9.5.</span> <span class="nav-text">五、课程分类多级联动的实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、获取一级分类"><span class="nav-number">1.9.5.1.</span> <span class="nav-text">一、获取一级分类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、组件数据定义"><span class="nav-number">1.9.5.1.1.</span> <span class="nav-text">1、组件数据定义</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、组件脚本"><span class="nav-number">1.9.5.1.2.</span> <span class="nav-text">2、组件脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、组件模板"><span class="nav-number">1.9.5.1.3.</span> <span class="nav-text">3、组件模板</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、级联显示二级分类"><span class="nav-number">1.9.5.2.</span> <span class="nav-text">二、级联显示二级分类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、注册change事件"><span class="nav-number">1.9.5.2.1.</span> <span class="nav-text">1、注册change事件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、定义change事件方法"><span class="nav-number">1.9.5.2.2.</span> <span class="nav-text">2、定义change事件方法</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ZWZ</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">42</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZWZ</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.1
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
